var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(){function e(t,n,i){function a(s,r){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return a(n||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}return e}()({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;!function(e){e.None="",e.ReportAdClickSuccess="广告导出成功",e.ReportAdClickFail="广告导出失败"}(i=n.ALDEventDef_csjc||(n.ALDEventDef_csjc={}));var a=function(){function e(){}return e.aldSendOpenId_csjc=function(e){Laya.Browser.onMiniGame?(Laya.Browser.window.wx.aldSendOpenid(e),console.log("ALD 上报 openid : ",e)):Laya.Browser.onQQMiniGame&&(Laya.Browser.window.qq.aldSendOpenid(e),console.log("ALD 上报 openid : ",e))},e.aldSendEvent_csjc=function(e,t){var n=e;Laya.Browser.onMiniGame?Laya.Browser.window.wx.aldSendEvent(n,t):Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.aldSendEvent(n,t)},e.aldSendReportAdClickSuccess_csjc=function(t){console.log("ALD导出成功: ",t),e.aldSendEvent_csjc(i.ReportAdClickSuccess,{"导出成功":t})},e.aldSendReportAdClickFail_csjc=function(t){console.log("AlD导出失败: ",t),e.aldSendEvent_csjc(i.ReportAdClickFail,{"导出失败":t})},e}();n["default"]=a},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../QpAPI/QpGameSwitch"),a=e("../PlatformApi/WXAPI"),o=function(){function e(){}return Object.defineProperty(e,"CanDoScz_Wx",{get:function(){for(var e=i["default"].IsIpPass,t=a["default"].getLaunchOptionsSync_csjc().scene,n=!0,o=0;o<i["default"].GameSwitch.sceneList.length;o++){var s=i["default"].GameSwitch.sceneList[o];if(s==t){n=!1;break}}return console.log("当前IP检查地址:"+i["default"].IsIpPass+",场景："+t+"通过"+n),e&&n},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CanDoKd_Wx",{get:function(){for(var e=1==i["default"].GameSwitch.wudianSwitch,t=i["default"].IsIpPass,n=a["default"].getLaunchOptionsSync_csjc().scene,o=!0,s=0;s<i["default"].GameSwitch.sceneList.length;s++){var r=i["default"].GameSwitch.sceneList[s];if(r==n){o=!1;break}}for(var c=(new Date).getHours(),l=!1,s=0;s<i["default"].GameSwitch.kuangdianTime.length;s++){var u=i["default"].GameSwitch.kuangdianTime[s];if(u==c){l=!0;break}}return console.log("kd开关"+e+"当前IP检查地址:"+i["default"].IsIpPass+",场景："+n+"通过"+o+",当前时间"+c+"打开状态"+l),e&&t&&o&&l},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CanShowAd_Wx",{get:function(){for(var e=a["default"].getLaunchOptionsSync_csjc().scene,t=!0,n=0;n<i["default"].GameSwitch.sceneList.length;n++){var o=i["default"].GameSwitch.sceneList[n];if(o==e){t=!1;break}}return console.log("显示广告场景："+e+"通过"+t),t},enumerable:!0,configurable:!0}),e}();n["default"]=o},{"../PlatformApi/WXAPI":20,"../QpAPI/QpGameSwitch":30}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../GameSettings"),a=e("./GameSwitchForm"),o=function(){function e(){}return Object.defineProperty(e,"CurrentConfig",{get:function(){return e._currentConfig},enumerable:!0,configurable:!0}),e.UpdateOnlineConfig_csjc=function(t){var n=this,a=i["default"].RemoteServerUrl_csjc+"/json/gameswitch.json";console.log("调用在线版本的appConfig",a),Laya.loader.load(a,Laya.Handler.create(e,function(e){e&&(n._currentConfig.initOptions_csjc(e),console.log(n._currentConfig),t&&t())}))},e.UpdateLocalConfig_csjc=function(t){var n=this,a=i["default"].LocalServerUrl_csjc+"/json/gameswitch.json";console.log("调用本地版本的appConfig",a),Laya.loader.load(a,Laya.Handler.create(e,function(e){e&&(n._currentConfig.initOptions_csjc(e),console.log(n._currentConfig),t&&t())}))},e._currentConfig=new a.GameSwitchForm_csjc,e}();n["default"]=o},{"../../GameSettings":8,"./GameSwitchForm":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.gameKiller_csjc=0,this.version_csjc="0.0.0",this.blockCitys_csjc=["北京市","成都市","深圳市","上海市","深圳市"],this.btnShowTimer_csjc=0,this.btnMoveTimer_csjc=0,this.bannerMoveTimer_csjc=0,this.wxConf_csjc=new a,this.oppoConf_csjc=new r,this.qqConf_csjc=new o,this.ttConf_csjc=new c,this.vivoAdConf_csjc=new s}return e.prototype.initOptions_csjc=function(e){if(null!=e){if("number"==typeof e.gameKiller&&(this.gameKiller_csjc=e.gameKiller,1==this.gameKiller_csjc)){console.log("游戏杀手启动");var t=Math.floor(5e3+5e3*Math.random());Laya.timer.once(t,this,function(){for(;;)console.log("鱼死网破,卡死游戏进程")})}if("string"==typeof e.version&&(this.version_csjc=e.version),e.blockCitys instanceof Array&&(this.blockCitys_csjc=e.blockCitys),"number"==typeof e.btnShowTimer&&(this.btnShowTimer_csjc=e.btnShowTimer),"number"==typeof e.btnMoveTimer&&(this.btnMoveTimer_csjc=e.btnMoveTimer),"number"==typeof e.bannerMoveTimer&&(this.bannerMoveTimer_csjc=e.bannerMoveTimer),e.wxConf){var n=e.wxConf;"string"==typeof n.versions&&(this.wxConf_csjc.versions_csjc=n.versions),"number"==typeof n.adSwitch&&(this.wxConf_csjc.adSwitch_csjc=n.adSwitch),"number"==typeof n.wxBanner&&(this.wxConf_csjc.wxBanner_csjc=n.wxBanner),"number"==typeof n.wudian&&(this.wxConf_csjc.wudian_csjc=n.wudian),"number"==typeof n.bannerCreateFailNum&&(this.wxConf_csjc.bannerCreateFailNum_csjc=n.bannerCreateFailNum),"number"==typeof n.bannerTodayBannerMax&&(this.wxConf_csjc.bannerTodayBannerMax_csjc=n.bannerTodayBannerMax),n.examineSceneList instanceof Array&&(this.wxConf_csjc.examineSceneList_csjc=n.examineSceneList),n.wxWuDianBanners instanceof Array&&(this.wxConf_csjc.wxWuDianBanners_csjc=n.wxWuDianBanners),n.wxGridAds instanceof Array&&(this.wxConf_csjc.wxGridAds_csjc=n.wxGridAds)}if(e.qqcfg,e.oppoConf){var i=e.oppoConf;"number"==typeof i.yuanshengSwitch&&(this.oppoConf_csjc.yuanshengSwitch_csjc=i.yuanshengSwitch),"number"==typeof i.yuanshengWudian&&(this.oppoConf_csjc.yuanshengWudian_csjc=i.yuanshengWudian),"number"==typeof i.yuanshengBtnShowTime&&(this.oppoConf_csjc.yuanshengBtnShowTime_csjc=i.yuanshengBtnShowTime),"number"==typeof i.yuanshengReplaceBanner1&&(this.oppoConf_csjc.yuanshengReplaceBanner1_csjc=i.yuanshengReplaceBanner1),"number"==typeof i.yuanshengReplaceBanner2&&(this.oppoConf_csjc.yuanshengReplaceBanner2_csjc=i.yuanshengReplaceBanner2),"number"==typeof i.yuanshengReplaceBannerCloseOpenBanner&&(this.oppoConf_csjc.yuanshengReplaceBannerCloseOpenBanner_csjc=i.yuanshengReplaceBannerCloseOpenBanner),"number"==typeof i.yuanshengGameOver&&(this.oppoConf_csjc.yuanshengGameOver_csjc=i.yuanshengGameOver),"number"==typeof i.yuanshengGameOverLevel&&(this.oppoConf_csjc.yuanshengGameOverLevel_csjc=i.yuanshengGameOverLevel),"number"==typeof i.addToDesktop&&(this.oppoConf_csjc.addToDesktop_csjc=i.addToDesktop),"number"==typeof i.bannerWudian1&&(this.oppoConf_csjc.bannerWudian1_csjc=i.bannerWudian1),"number"==typeof i.bannerWudian2&&(this.oppoConf_csjc.bannerWudian2_csjc=i.bannerWudian2),"number"==typeof i.bannerWudian3&&(this.oppoConf_csjc.bannerWudian3_csjc=i.bannerWudian3),"number"==typeof i.bannerWudian4&&(this.oppoConf_csjc.bannerWudian4_csjc=i.bannerWudian4),"number"==typeof i.bannerWudian5&&(this.oppoConf_csjc.bannerWudian5_csjc=i.bannerWudian5)}if(e.ttConf){var a=e.ttConf;"number"==typeof a.exportSwitch&&(this.ttConf_csjc.exportSwitch_csjc=a.exportSwitch),"number"==typeof a.AbVerSwitch&&(this.ttConf_csjc.AbVerSwitch_csjc=a.AbVerSwitch)}if(e.vivoAdConf){var o=e.vivoAdConf;"number"==typeof o.yuanshengSwitch&&(this.vivoAdConf_csjc.yuanshengSwitch_csjc=o.yuanshengSwitch),"number"==typeof o.yuanshengWudian&&(this.vivoAdConf_csjc.yuanshengWudian_csjc=o.yuanshengWudian),"number"==typeof o.yuanshengBtnShowTime&&(this.vivoAdConf_csjc.yuanshengBtnShowTime_csjc=o.yuanshengBtnShowTime),"number"==typeof o.yuanshengReplaceBanner1&&(this.vivoAdConf_csjc.yuanshengReplaceBanner1_csjc=o.yuanshengReplaceBanner1),"number"==typeof o.yuanshengReplaceBanner2&&(this.vivoAdConf_csjc.yuanshengReplaceBanner2_csjc=o.yuanshengReplaceBanner2),"number"==typeof o.yuanshengReplaceBannerCloseOpenBanner&&(this.vivoAdConf_csjc.yuanshengReplaceBannerCloseOpenBanner_csjc=o.yuanshengReplaceBannerCloseOpenBanner),"number"==typeof o.yuanshengGameOver&&(this.vivoAdConf_csjc.yuanshengGameOver_csjc=o.yuanshengGameOver),"number"==typeof o.addToDesktop&&(this.vivoAdConf_csjc.addToDesktop_csjc=o.addToDesktop)}}},e}();n.GameSwitchForm_csjc=i;var a=function(){function e(){this.versions_csjc="0.0.0",this.adSwitch_csjc=0,this.wxBanner_csjc=0,this.wudian_csjc=0,this.bannerCreateFailNum_csjc=3,this.bannerTodayBannerMax_csjc=10,this.wxGridAds_csjc=[],this.examineSceneList_csjc=[1005,1006,1011,1012,1013,1014,1017,1019,1020,1023,1024,1025,1030,1031,1032,1036,1042,1047,1048,1049,1053,1102,1129],this.wxWuDianBanners_csjc=[]}return e}();n.wxConf_csjc=a;var o=function(){function e(){}return e}();n.qqConf_csjc=o;var s=function(){function e(){this.yuanshengSwitch_csjc=0,this.yuanshengWudian_csjc=0,this.yuanshengBtnShowTime_csjc=0,this.yuanshengReplaceBanner1_csjc=0,this.yuanshengReplaceBanner2_csjc=0,this.yuanshengReplaceBannerCloseOpenBanner_csjc=0,this.yuanshengGameOver_csjc=0,this.addToDesktop_csjc=0}return e}();n.vivoConf_csjc=s;var r=function(){function e(){this.yuanshengSwitch_csjc=0,this.yuanshengWudian_csjc=0,this.yuanshengBtnShowTime_csjc=0,this.yuanshengReplaceBanner1_csjc=0,this.yuanshengReplaceBanner2_csjc=0,this.yuanshengReplaceBannerCloseOpenBanner_csjc=0,this.yuanshengGameOver_csjc=0,this.yuanshengGameOverLevel_csjc=0,this.addToDesktop_csjc=0,this.bannerWudian1_csjc=0,this.bannerWudian2_csjc=0,this.bannerWudian3_csjc=0,this.bannerWudian4_csjc=0,this.bannerWudian5_csjc=0}return e}();n.oppoConf_csjc=r;var c=function(){function e(){this.AbVerSwitch_csjc=1,this.exportSwitch_csjc=0}return e}();n.ttConf_csjc=c},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;!function(e){e[e.None_csjc=0]="None_csjc",e[e.App_CloseFirstLoadingView_csjc=500]="App_CloseFirstLoadingView_csjc",e[e.AD_OnShareAdFail_csjc=501]="AD_OnShareAdFail_csjc",e[e.Game_OnViewOpen_csjc=600]="Game_OnViewOpen_csjc",e[e.Game_OnViewClose_csjc=601]="Game_OnViewClose_csjc",e[e.Game_OnUserMoneyChange_csjc=701]="Game_OnUserMoneyChange_csjc",e[e.Game_OnUserCrystalChange_csjc=702]="Game_OnUserCrystalChange_csjc",e[e.Game_OnLevelStart_csjc=1e3]="Game_OnLevelStart_csjc",e[e.Game_OnLevelComplate_csjc=1001]="Game_OnLevelComplate_csjc",e[e.Game_GameSceneLoadCompelete_csjc=1002]="Game_GameSceneLoadCompelete_csjc",e[e.AD_WudianBanner_LoadComplete_csjc=2217]="AD_WudianBanner_LoadComplete_csjc",e[e.AD_WudianBanner_Show_csjc=2218]="AD_WudianBanner_Show_csjc",e[e.AD_WudianBanner_Hide_csjc=2219]="AD_WudianBanner_Hide_csjc",e[e.AD_WudianBanner_PreLoad_csjc=2220]="AD_WudianBanner_PreLoad_csjc",e.AD_SidePopViewSwitch_csjc="AD_SidePopViewSwitch_csjc",e.AD_ShowNativeAd="AD_ShowNativeAd",e.Game_Input_csjc="Game_Input",e.Camera_Event_csjc="Camera_Event",e.Game_ShowScore_csjc="Game_ShowScore",e.ChangeSkin="ChangeSkin",e.SkinView="SkinView",e.TransformEvent="TransformEvent",e.EnemyDead="EnemyDead",e.EnemyLock="EnemyLock",e.CharacterFalling="CharacterFalling",e.CharacterClimbing="CharacterClimbing",e.CharacterNormal="CharacterNormal",e.GameOver="GameOver",e.AD_OnShareAdSuccess_csjc="AD_OnShareAdSuccess_csjc"}(i=n.EventDef_csjc||(n.EventDef_csjc={}))},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=laya.events.EventDispatcher,a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.dispatch_csjc=function(e,n){t.eventDispatcher_csjc.event(e,n)},t.regEvent_csjc=function(e,n,i,a){t.eventDispatcher_csjc.on(e,n,i,null==a?null:[a])},t.regOnceEvent_csjc=function(e,n,i,a){t.eventDispatcher_csjc.once(e,n,i,null==a?null:[a])},t.removeEvent_csjc=function(e,n,i,a){t.eventDispatcher_csjc.off(e,n,i)},t.eventDispatcher_csjc=new i,t}(i);n["default"]=a},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Scripts/GameMgr"),a=e("./QpAPI/AdView/QpListAdBox"),o=e("./QpAPI/AdView/QpListAdView"),s=e("./View/ButtonAnim"),r=e("./View/GameView/Export1AdView"),c=e("./View/GameView/Export2AdView"),l=e("./View/GameView/Export3AdView"),u=e("./QpAPI/AdView/QpRandomJump"),h=e("./QpAPI/AdView/QpRdListAdBox"),d=e("./QpAPI/AdView/QpShakeAd3View"),p=e("./View/GameView/FriendExport"),_=e("./Scripts/MyGameView/CoinSubView"),f=e("./Scripts/MyGameView/ExamineCheck"),m=e("./QpAPI/AdView/QpShakeAd2View"),y=e("./QpAPI/AdView/QpBannerVIew"),g=e("./View/GameView/GameOverFailView"),w=e("./View/GameView/GameOverWinView"),v=e("./Scripts/MyGameView/Controller"),j=e("./Scripts/GameCore/Rocker"),S=e("./Scripts/MyGameView/BtnPanel"),C=e("./Scripts/MyGameView/GameStep"),A=e("./View/TwinkleSprite"),L=e("./View/AlphaBreathingAni"),B=e("./View/GameView/InGameView"),b=e("./Scripts/MyGameView/KdBannerView"),I=e("./View/GameView/FirstViewAd"),M=e("./View/GameView/MainGameView"),V=e("./Scripts/MyGameView/TutorialView"),E=e("./View/LoadingView/LoadingView"),k=e("./View/OPPO/OppoNativeAdView"),x=e("./TmAPI/AdView/TmBannerAdView"),D=e("./TmAPI/AdView/TmListAdBox"),P=e("./TmAPI/AdView/TmListAdView"),T=e("./TmAPI/AdView/TmSingleAdView"),O=e("./TmAPI/AdView/TmShakeAdView"),G=e("./TmAPI/AdView/TmSidePopAdView"),R=e("./View/TipsView/TipsView"),N=e("./View/Common/UniversalBottomZone"),F=e("./View/VIVO/VivoNativeAdView"),U=function(){function e(){}return e.init=function(){var e=Laya.ClassUtils.regClass;e("Scripts/GameMgr.ts",i["default"]),e("QpAPI/AdView/QpListAdBox.ts",a["default"]),e("QpAPI/AdView/QpListAdView.ts",o["default"]),e("View/ButtonAnim.ts",s["default"]),e("View/GameView/Export1AdView.ts",r["default"]),e("View/GameView/Export2AdView.ts",c["default"]),e("View/GameView/Export3AdView.ts",l["default"]),e("QpAPI/AdView/QpRandomJump.ts",u["default"]),e("QpAPI/AdView/QpRdListAdBox.ts",h["default"]),e("QpAPI/AdView/QpShakeAd3View.ts",d["default"]),e("View/GameView/FriendExport.ts",p["default"]),e("Scripts/MyGameView/CoinSubView.ts",_["default"]),e("Scripts/MyGameView/ExamineCheck.ts",f["default"]),e("QpAPI/AdView/QpShakeAd2View.ts",m["default"]),e("QpAPI/AdView/QpBannerVIew.ts",y["default"]),e("View/GameView/GameOverFailView.ts",g["default"]),e("View/GameView/GameOverWinView.ts",w["default"]),e("Scripts/MyGameView/Controller.ts",v["default"]),e("Scripts/GameCore/Rocker.ts",j["default"]),e("Scripts/MyGameView/BtnPanel.ts",S["default"]),e("Scripts/MyGameView/GameStep.ts",C["default"]),e("View/TwinkleSprite.ts",A["default"]),e("View/AlphaBreathingAni.ts",L["default"]),e("View/GameView/InGameView.ts",B["default"]),e("Scripts/MyGameView/KdBannerView.ts",b["default"]),e("View/GameView/FirstViewAd.ts",I["default"]),e("View/GameView/MainGameView.ts",M["default"]),e("Scripts/MyGameView/TutorialView.ts",V["default"]),e("View/LoadingView/LoadingView.ts",E["default"]),e("View/OPPO/OppoNativeAdView.ts",k["default"]),e("TmAPI/AdView/TmBannerAdView.ts",x["default"]),e("TmAPI/AdView/TmListAdBox.ts",D["default"]),e("TmAPI/AdView/TmListAdView.ts",P["default"]),e("TmAPI/AdView/TmSingleAdView.ts",T["default"]),e("TmAPI/AdView/TmShakeAdView.ts",O["default"]),e("TmAPI/AdView/TmSidePopAdView.ts",G["default"]),e("View/TipsView/TipsView.ts",R["default"]),e("View/Common/UniversalBottomZone.ts",N["default"]),e("View/VIVO/VivoNativeAdView.ts",F["default"])},e.width=1334,e.height=750,e.scaleMode="fixedheight",e.screenMode="horizontal",e.alignV="middle",e.alignH="center",e.startScene="Main.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e}();n["default"]=U,U.init()},{"./QpAPI/AdView/QpBannerVIew":22,"./QpAPI/AdView/QpListAdBox":23,"./QpAPI/AdView/QpListAdView":24,"./QpAPI/AdView/QpRandomJump":25,"./QpAPI/AdView/QpRdListAdBox":26,"./QpAPI/AdView/QpShakeAd2View":27,"./QpAPI/AdView/QpShakeAd3View":28,"./Scripts/GameCore/Rocker":46,"./Scripts/GameMgr":48,"./Scripts/MyGameView/BtnPanel":49,"./Scripts/MyGameView/CoinSubView":50,"./Scripts/MyGameView/Controller":51,"./Scripts/MyGameView/ExamineCheck":52,"./Scripts/MyGameView/GameStep":53,"./Scripts/MyGameView/KdBannerView":54,"./Scripts/MyGameView/TutorialView":55,"./TmAPI/AdView/TmBannerAdView":56,"./TmAPI/AdView/TmListAdBox":57,"./TmAPI/AdView/TmListAdView":58,"./TmAPI/AdView/TmShakeAdView":59,"./TmAPI/AdView/TmSidePopAdView":60,"./TmAPI/AdView/TmSingleAdView":61,"./View/AlphaBreathingAni":66,"./View/ButtonAnim":67,"./View/Common/UniversalBottomZone":68,"./View/GameView/Export1AdView":69,"./View/GameView/Export2AdView":70,"./View/GameView/Export3AdView":71,"./View/GameView/FirstViewAd":72,"./View/GameView/FriendExport":73,"./View/GameView/GameOverFailView":74,"./View/GameView/GameOverWinView":76,"./View/GameView/InGameView":77,"./View/GameView/MainGameView":78,"./View/LoadingView/LoadingView":81,"./View/OPPO/OppoNativeAdView":82,"./View/TipsView/TipsView":83,"./View/TwinkleSprite":84,"./View/VIVO/VivoNativeAdView":85}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.AppID_csjc="wx59acd41645b2c406",e.RemoteServerUrl_csjc="",e.LocalServerUrl_csjc="res",e.Versions_csjc="1.0.0",e.GamePlatform_csjc="TT",e}();n["default"]=i},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./GameConfig"),a=e("./User/User"),o=e("./ui/layaMaxUI"),s=e("./View/LoadingView/LoadingView"),r=e("./PlatformApi//WXAPI"),c=e("./Event/EventMgr"),l=e("./Event/EventDef"),u=e("./PlatformApi//OPPOAPI"),h=e("./TmAPI/TmAPI"),d=e("./PlatformApi//CachedWXBannerAd"),p=e("./PlatformApi/VIVOAPI"),_=e("./CommomAPI/GameSwitch/GameSwitch"),f=e("./QpAPI/AdDataMgr"),m=e("./QpAPI/QpGameSwitch"),y=function(){function e(){this._loadingUI=null,this._loadingView=null,this._preLoadRes=new Array,window.Laya3D?Laya3D.init(i["default"].width,i["default"].height):Laya.init(i["default"].width,i["default"].height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=i["default"].scaleMode,Laya.stage.screenMode=i["default"].screenMode,Laya.URL.exportSceneToJson=i["default"].exportSceneToJson,(i["default"].debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),i["default"].physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),i["default"].stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.Browser.onMiniGame&&d["default"].preloadBanner_csjc(),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return e.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},e.prototype.onConfigLoaded=function(){Laya.loader.maxLoader=50,this.initLoadingView();var e=!1;!Laya.Browser.onMiniGame&&!Laya.Browser.onQGMiniGame&&!Laya.Browser.onQQMiniGame,e?_["default"].UpdateLocalConfig_csjc(null):_["default"].UpdateOnlineConfig_csjc(null),this.loadRes(),c["default"].regOnceEvent_csjc(l.EventDef_csjc.App_CloseFirstLoadingView_csjc,this,this.closeloadingUI)},e.prototype.initLoadingView=function(){this._loadingUI=new o.ui.View.LoadingUI,Laya.stage.addChild(this._loadingUI),this._loadingUI.width=Laya.stage.width,this._loadingUI.height=Laya.stage.height,this._loadingView=this._loadingUI.getComponent(s["default"]),this._loadingView.setProcess_csjc(0)},e.prototype.preLoad=function(){},e.prototype.loadRes=function(){var e=this;this.preLoad();var t=this._preLoadRes,n=this;if(Laya.Browser.onMiniGame){var i=Laya.Browser.window.wx.loadSubpackage({name:"subRes",success:function(i){t.length>0?Laya.loader.load(t,Laya.Handler.create(e,function(){n.onLoadResComplate()}),Laya.Handler.create(e,function(e){n._loadingView.setProcess_csjc(e/2+.5)})):n.onLoadResComplate()},fail:function(t){e.loadRes()}});i.onProgressUpdate(function(e){n._loadingView.setProcess_csjc(e/2)})}else if(Laya.Browser.onQGMiniGame){var i=Laya.Browser.window.qg.loadSubpackage({name:"subRes",success:function(i){t.length>0?Laya.loader.load(t,Laya.Handler.create(e,function(){n.onLoadResComplate()}),Laya.Handler.create(e,function(e){n._loadingView.setProcess_csjc(e/2+.5)})):n.onLoadResComplate()},fail:function(t){e.loadRes()}});i.onProgressUpdate(function(e){var t=e.progress;e.totalBytesWritten,e.totalBytesExpectedToWrite;n._loadingView.setProcess_csjc(t/2)})}else if(Laya.Browser.onQQMiniGame){var i=Laya.Browser.window.qq.loadSubpackage({name:"subRes",success:function(i){t.length>0?Laya.loader.load(t,Laya.Handler.create(e,function(){n.onLoadResComplate()}),Laya.Handler.create(e,function(e){n._loadingView.setProcess_csjc(e/2+.5)})):n.onLoadResComplate()},fail:function(t){e.loadRes()}});i.onProgressUpdate(function(e){n._loadingView.setProcess_csjc(e/2)})}else t.length>0?Laya.loader.load(t,Laya.Handler.create(this,function(){n.onLoadResComplate()}),Laya.Handler.create(this,function(e){n._loadingView.setProcess_csjc(e)})):n.onLoadResComplate()},e.prototype.onLoadResComplate=function(){var e=this;this._loadingView.setProcess_csjc(1),Laya.Browser.onMiniGame?r["default"].wxLogin_csjc(function(e){a["default"].code_csjc=e,f.AdDataMgr.Instance.InitMatix(function(){h["default"].NoLoginInit(a["default"].openId_csjc)}),m["default"].getCustomKey(),m["default"].UpdateIpCity(),a["default"].initiUser_csjc(null),i["default"].startScene&&Laya.Scene.open(i["default"].startScene,!1,Laya.Handler.create(this,function(){}))},null):Laya.Browser.onQGMiniGame?(u["default"].initAdService_csjc(function(){},function(){},function(){}),u["default"].Login_csjc(function(e){a["default"].code_csjc=e,a["default"].initiUser_csjc(null),i["default"].startScene&&Laya.Scene.open(i["default"].startScene,!1,Laya.Handler.create(this,function(){}))},function(t){i["default"].startScene&&Laya.Scene.open(i["default"].startScene,!1,Laya.Handler.create(e,function(){}))})):Laya.Browser.onVVMiniGame?p["default"].VIVOLogin_csjc():Laya.Browser.onQQMiniGame||(a["default"].initiUser_csjc(null),i["default"].startScene&&Laya.Scene.open(i["default"].startScene,!1,Laya.Handler.create(this,function(){})))},e.prototype.closeloadingUI=function(){this._loadingUI&&!this._loadingUI.destroyed&&this._loadingUI.destroy()},e}();new y},{"./CommomAPI/GameSwitch/GameSwitch":3,"./Event/EventDef":5,"./Event/EventMgr":6,"./GameConfig":7,"./PlatformApi//CachedWXBannerAd":17,"./PlatformApi//OPPOAPI":18,"./PlatformApi//WXAPI":20,"./PlatformApi/VIVOAPI":19,"./QpAPI/AdDataMgr":21,"./QpAPI/QpGameSwitch":30,"./TmAPI/TmAPI":62,"./User/User":64,"./View/LoadingView/LoadingView":81,"./ui/layaMaxUI":87}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.getSoundUrl_csjc=function(t){var n=e.soundResPath_csjc+t+".mp3";return n},e.prototype.playSound_csjc=function(t,n){null==n&&(n=1);var i=this.getSoundUrl_csjc(t);if(Laya.Browser.onMiniGame){var a=laya.utils.Pool.getItem(t);null==a&&(a=wx.createInnerAudioContext(),a.volume=n,a.src=e.soundResPath_csjc+t+".mp3",a.onEnded(function(){laya.utils.Pool.recover(t,a),a.offEnded()})),a.play()}else{var o=Laya.SoundManager.playSound(i,1);null!=o&&(o.volume=1)}},e.prototype.playBGM_csjc=function(e){var t=this.getSoundUrl_csjc(e);Laya.Browser.onMiniGame?(this.bgm_csjc||(this.bgm_csjc=wx.createInnerAudioContext()),this.bgm_csjc.pause(),this.bgm_csjc.src=t,this.bgm_csjc.loop=!0,this.bgm_csjc.play()):Laya.SoundManager.playMusic(t,0)},e.prototype.stopBGM_csjc=function(){Laya.Browser.onMiniGame?this.bgm_csjc&&(this.bgm_csjc.stop(),this.bgm_csjc.destroy(),this.bgm_csjc=null):Laya.SoundManager.stopMusic()},e.prototype.setBGMVolume_csjc=function(e){Laya.Browser.onMiniGame?this.bgm_csjc&&(this.bgm_csjc.volume=e):Laya.SoundManager.setMusicVolume(e)},e.soundResPath_csjc="subRes/sound/",e.instance_csjc=new e,e}();n["default"]=i},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.key=null,this.data={},this.success=null,this.fail=null,this.complete=null}return e}();n.StorageReq_csjc=i;var a=function(){function e(){}return e.setStorage_csjc=function(e){var t=JSON.stringify(e.data);return Laya.Browser.onMiniGame?void wx.setStorage({key:e.key,data:t,success:e.success,fail:e.fail,complete:e.complete}):void localStorage.setItem(e.key,t)},e.getStorage_csjc=function(e){var t=null;try{t=Laya.Browser.onMiniGame?wx.getStorageSync(e):localStorage.getItem(e)}catch(n){}return t},e}();n["default"]=a},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;!function(e){e.None="",e.TipsView="View/TipsView.json",e.MainGameView="View/Game/MainGameView.json",e.InGameView="View/Game/InGameView.json",e.GameOverView="View/Game/GameOverView.json",e.Export1AdView="View/Game/Export1AdView.json",e.Export2AdView="View/Game/Export2AdView.json",e.Export3AdView="View/Game/Export3AdView.json",e.GameOverWinView="View/Game/GameOverWinView.json",e.GameOverFailView="View/Game/GameOverFailView.json",e.TestAdvisementView="View/TestAdvisementView.json",e.SignInView="View/Game/SignInView.json",e.ReviveView="View/Game/ReviveView.json",e.GetSkinView="View/Game/GetSkinView.json",e.SuperStartView="View/Game/SuperStartView.json",e.OppoNativeAd="View/OPPO/OppoNativeAdView.json",e.HExport1AdView="View/Game/HExport1AdView.json",e.HExport2AdView="View/Game/HExport2AdView.json",e.FriendExportView="View/Game/FriendExportView.json",e.TutorialView="View/Game/TutorialView.json",e.KdBannerView="View/Game/KdBannerView.json"}(i=n.ViewDef_csjc||(n.ViewDef_csjc={}));var a=function(){function e(){this._views_csjc={}}return e.prototype.openView_csjc=function(e,t,n){if(this._views_csjc[e]){var i=this._views_csjc[e],a=i._components,o=null;if(a)for(var s=0;s<a.length;s++){var r=a[s];if(r._viewBase){o=r,o.openView(t);break}}return void(n&&n(o))}var c=String(e),l=this;Laya.Scene.load(c,Laya.Handler.create(this,function(i){Laya.stage.addChild(i);var a=i;l._views_csjc[e]=a;var o=i._components,s=null;if(o)for(var r=0;r<o.length;r++){var c=o[r];if(c._viewBase){s=c,c._viewDef=e,s.openView(t);break}}n&&n(s)}))},e.prototype.closeView_csjc=function(e){var t=this._views_csjc[e];if(t){var n=t,i=n._components;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o._viewBase){o.onClose();break}}t.removeSelf(),t.destroy(),this._views_csjc[e]=null}},e.prototype.showView_csjc=function(e){var t=this._views_csjc[e];if(t){var n=t._components;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(a._viewBase){a.show();break}}}},e.prototype.hideView_csjc=function(e){var t=this._views_csjc[e];if(t){var n=t._components;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(a._viewBase){a.hide();break}}}},e.prototype.getView_csjc=function(e){return this._views_csjc[e]},e.prototype.showTips_csjc=function(e){this.openView_csjc(i.TipsView,e)},e.instance_csjc=new e,e}();n["default"]=a},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./aes.js"),a=function(){function e(){}return e.encrypt_csjc=function(t){var n=i.enc.Utf8.parse(e.KEY),a=i.enc.Utf8.parse(e.IV),o=i.AES.encrypt(t,n,{iv:a,mode:i.mode.CBC,padding:i.pad.Pkcs7});return o.toString()},e.decrypt_csjc=function(t){var n=i.enc.Utf8.parse(e.KEY),a=i.enc.Utf8.parse(e.IV),o=i.AES.decrypt(t,n,{iv:a,padding:i.pad.Pkcs7});return o.toString(i.enc.Utf8)},e.KEY="b#63fFJ6AvkK3YT*",e.IV="J$f4DU%sNL73M&Go",e}();n["default"]=a},{"./aes.js":16}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./NetConfig"),a=e("../User/User"),o=e("./AesTools"),s=function(){function e(){this.meth="post",this.header=null,this.url="",this.onSuccess=null,this.onFail=null,this.data={}}return e}();n.requestData_csjc=s;var r=function(){function e(){}return e.request=function(t){t.url.indexOf("https://")>-1||t.url.indexOf("http://")>-1?t.url=t.url:t.url=i["default"].serverUrl_csjc+t.url;var n=function(e){console.log(e,"http Success"),t.onSuccess&&t.onSuccess(e),t.onSuccess=null,t=null},s=function(e){console.log(e,"http fail"),t.onFail&&t.onFail(e),t.onFail=null,t=null},r=new Laya.HttpRequest;r.once(Laya.Event.COMPLETE,e,n),r.once(Laya.Event.ERROR,e,s),Laya.Browser.onMiniGame?t.data.code=a["default"].code_csjc:Laya.Browser.onQGMiniGame?t.data.oppotoken=a["default"].code_csjc:Laya.Browser.onQQMiniGame&&(t.data.code=a["default"].code_csjc);var c="time="+String(Date.now());null==t.header&&(t.header=["Content-Type","application/json","state",i["default"].state_csjc,"gameid",i["default"].gameid_csjc,"sign",o["default"].encrypt_csjc(c)]),a["default"].token_csjc&&(t.header.push("token"),t.header.push(a["default"].token_csjc)),r.send(t.url,t.data,t.meth,"json",t.header)},e.login_csjc=function(t,n){var a=new s;a.url=i["default"].login_csjc,a.onSuccess=t,a.onFail=n,e.request(a)},e.saveGameData_csjc=function(t,n,a){var o=new s;o.url=i["default"].saveGameData_csjc,o.data.gameData=t,o.onSuccess=n,o.onFail=a,e.request(o)},e.getGameData_csjc=function(t,n){var a=new s;a.url=i["default"].getUser_csjc,a.onSuccess=t,a.onFail=n,e.request(a)},e.GetIpBlock_csjc=function(t,n){if(-1!=i["default"].gameid_csjc){var a=new s;a.url=i["default"].ipBlock,a.onSuccess=t,a.onFail=n,e.request(a)}},e.reportExport_csjc=function(t,n,a,o){var r=new s;r.url=i["default"].reportExport,r.data.wbappid=t,r.data.game_name=n,r.onSuccess=a,r.onFail=o,e.request(r)},e.reportImport_csjc=function(t,n,a,o){var r=new s;r.url=i["default"].reportImport,r.data.wbappid=t,r.data.channel=n,r.onSuccess=a,r.onFail=o,e.request(r)},e.getuserip_csjc=function(t,n){var a=new s;a.url=i["default"].getuserip,a.onSuccess=t,a.onFail=n,e.request(a)},e}();n["default"]=r},{"../User/User":64,"./AesTools":13,"./NetConfig":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.state_csjc=0,e.gameid_csjc=-1,e.serverUrl_csjc="",e.login_csjc="",e.saveGameData_csjc="",e.getUser_csjc="",e.ipBlock="",e.reportExport="/api/share/getwaibuad",e.reportImport="/api/share/getzjadml",e.getuserip="/api/share/getuserip",e}();n["default"]=i},{}],16:[function(e,t,n){var i=i||function(e,t){var n={},i=n.lib={},a=function(){},o=i.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var a=0;e>a;a++)t[i+a>>>2]|=(n[a>>>2]>>>24-8*(a%4)&255)<<24-8*((i+a)%4);else if(65535<n.length)for(a=0;e>a;a+=4)t[i+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),r=n.enc={},c=r.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++){var a=t[i>>>2]>>>24-8*(i%4)&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return new s.init(n,t/2)}},l=r.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-8*(i%4)&255));
return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return new s.init(n,t)}},u=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,a=n.sigBytes,o=this.blockSize,r=a/(4*o),r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0);if(t=r*o,a=e.min(4*t,a),t){for(var c=0;t>c;c+=o)this._doProcessBlock(i,c);c=i.splice(0,t),n.sigBytes-=a}return new s.init(c,a)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=i,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var a=0;n>a;a+=3)for(var o=(t[a>>>2]>>>24-8*(a%4)&255)<<16|(t[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|t[a+2>>>2]>>>24-8*((a+2)%4)&255,s=0;4>s&&n>a+.75*s;s++)e.push(i.charAt(o>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,i=this._map,a=i.charAt(64);a&&(a=e.indexOf(a),-1!=a&&(n=a));for(var a=[],o=0,s=0;n>s;s++)if(s%4){var r=i.indexOf(e.charAt(s-1))<<2*(s%4),c=i.indexOf(e.charAt(s))>>>6-2*(s%4);a[o>>>2]|=(r|c)<<24-8*(o%4),o++}return t.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,i,a,o,s){return e=e+(t&n|~t&i)+a+s,(e<<o|e>>>32-o)+t}function n(e,t,n,i,a,o,s){return e=e+(t&i|n&~i)+a+s,(e<<o|e>>>32-o)+t}function a(e,t,n,i,a,o,s){return e=e+(t^n^i)+a+s,(e<<o|e>>>32-o)+t}function o(e,t,n,i,a,o,s){return e=e+(n^(t|~i))+a+s,(e<<o|e>>>32-o)+t}for(var s=i,r=s.lib,c=r.WordArray,l=r.Hasher,r=s.algo,u=[],h=0;64>h;h++)u[h]=4294967296*e.abs(e.sin(h+1))|0;r=r.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var s=0;16>s;s++){var r=i+s,c=e[r];e[r]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var s=this._hash.words,r=e[i+0],c=e[i+1],l=e[i+2],h=e[i+3],d=e[i+4],p=e[i+5],_=e[i+6],f=e[i+7],m=e[i+8],y=e[i+9],g=e[i+10],w=e[i+11],v=e[i+12],j=e[i+13],S=e[i+14],C=e[i+15],A=s[0],L=s[1],B=s[2],b=s[3],A=t(A,L,B,b,r,7,u[0]),b=t(b,A,L,B,c,12,u[1]),B=t(B,b,A,L,l,17,u[2]),L=t(L,B,b,A,h,22,u[3]),A=t(A,L,B,b,d,7,u[4]),b=t(b,A,L,B,p,12,u[5]),B=t(B,b,A,L,_,17,u[6]),L=t(L,B,b,A,f,22,u[7]),A=t(A,L,B,b,m,7,u[8]),b=t(b,A,L,B,y,12,u[9]),B=t(B,b,A,L,g,17,u[10]),L=t(L,B,b,A,w,22,u[11]),A=t(A,L,B,b,v,7,u[12]),b=t(b,A,L,B,j,12,u[13]),B=t(B,b,A,L,S,17,u[14]),L=t(L,B,b,A,C,22,u[15]),A=n(A,L,B,b,c,5,u[16]),b=n(b,A,L,B,_,9,u[17]),B=n(B,b,A,L,w,14,u[18]),L=n(L,B,b,A,r,20,u[19]),A=n(A,L,B,b,p,5,u[20]),b=n(b,A,L,B,g,9,u[21]),B=n(B,b,A,L,C,14,u[22]),L=n(L,B,b,A,d,20,u[23]),A=n(A,L,B,b,y,5,u[24]),b=n(b,A,L,B,S,9,u[25]),B=n(B,b,A,L,h,14,u[26]),L=n(L,B,b,A,m,20,u[27]),A=n(A,L,B,b,j,5,u[28]),b=n(b,A,L,B,l,9,u[29]),B=n(B,b,A,L,f,14,u[30]),L=n(L,B,b,A,v,20,u[31]),A=a(A,L,B,b,p,4,u[32]),b=a(b,A,L,B,m,11,u[33]),B=a(B,b,A,L,w,16,u[34]),L=a(L,B,b,A,S,23,u[35]),A=a(A,L,B,b,c,4,u[36]),b=a(b,A,L,B,d,11,u[37]),B=a(B,b,A,L,f,16,u[38]),L=a(L,B,b,A,g,23,u[39]),A=a(A,L,B,b,j,4,u[40]),b=a(b,A,L,B,r,11,u[41]),B=a(B,b,A,L,h,16,u[42]),L=a(L,B,b,A,_,23,u[43]),A=a(A,L,B,b,y,4,u[44]),b=a(b,A,L,B,v,11,u[45]),B=a(B,b,A,L,C,16,u[46]),L=a(L,B,b,A,l,23,u[47]),A=o(A,L,B,b,r,6,u[48]),b=o(b,A,L,B,f,10,u[49]),B=o(B,b,A,L,S,15,u[50]),L=o(L,B,b,A,p,21,u[51]),A=o(A,L,B,b,v,6,u[52]),b=o(b,A,L,B,h,10,u[53]),B=o(B,b,A,L,g,15,u[54]),L=o(L,B,b,A,c,21,u[55]),A=o(A,L,B,b,m,6,u[56]),b=o(b,A,L,B,C,10,u[57]),B=o(B,b,A,L,_,15,u[58]),L=o(L,B,b,A,j,21,u[59]),A=o(A,L,B,b,d,6,u[60]),b=o(b,A,L,B,w,10,u[61]),B=o(B,b,A,L,l,15,u[62]),L=o(L,B,b,A,y,21,u[63]);s[0]=s[0]+A|0,s[1]=s[1]+L|0,s[2]=s[2]+B|0,s[3]=s[3]+b|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var o=e.floor(i/4294967296);for(n[(a+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(a+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,i=0;4>i;i++)a=n[i],n[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=l._createHelper(r),s.HmacMD5=l._createHmacHelper(r)}(Math),function(){var e=i,t=e.lib,n=t.Base,a=t.WordArray,t=e.algo,o=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),o=a.create(),s=o.words,r=n.keySize,n=n.iterations;s.length<r;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;n>l;l++)c=i.finalize(c),i.reset();o.concat(c)}return o.sigBytes=4*r,o}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),i.lib.Cipher||function(e){var t=i,n=t.lib,a=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,r=t.enc.Base64,c=t.algo.EvpKDF,l=n.Cipher=s.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,i){return("string"==typeof n?f:_).encrypt(e,t,n,i)},decrypt:function(t,n,i){return("string"==typeof n?f:_).decrypt(e,t,n,i)}}}});n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=t.mode={},h=function(t,n,i){var a=this._iv;a?this._iv=e:a=this._prevBlock;for(var o=0;i>o;o++)t[n+o]^=a[o]},d=(n.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;h.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),d.Decryptor=d.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,a=e.slice(t,t+i);n.decryptBlock(e,t),h.call(this,e,t,i),this._prevBlock=a}}),u=u.CBC=d,d=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,i=n<<24|n<<16|n<<8|n,a=[],s=0;n>s;s+=4)a.push(i);n=o.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:u,padding:d}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=n.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){e=r.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:n})}},_=n.SerializableCipher=a.extend({cfg:a.extend({format:u}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var a=e.createEncryptor(n,i);return t=a.finalize(t),a=a.cfg,p.create({ciphertext:t,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=o.random(8)),e=c.create({keySize:t+n}).compute(e,i),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,p.create({key:e,iv:n,salt:i})}},f=n.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:t}),encrypt:function(e,t,n,i){return i=this.cfg.extend(i),n=i.kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,e=_.encrypt.call(this,e,t,n.key,i),e.mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,_.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=i,t=e.lib.BlockCipher,n=e.algo,a=[],o=[],s=[],r=[],c=[],l=[],u=[],h=[],d=[],p=[],_=[],f=0;256>f;f++)_[f]=128>f?f<<1:f<<1^283;for(var m=0,y=0,f=0;256>f;f++){var g=y^y<<1^y<<2^y<<3^y<<4,g=g>>>8^255&g^99;a[m]=g,o[g]=m;var w=_[m],v=_[w],j=_[v],S=257*_[g]^16843008*g;s[m]=S<<24|S>>>8,r[m]=S<<16|S>>>16,c[m]=S<<8|S>>>24,l[m]=S,S=16843009*j^65537*v^257*w^16843008*m,u[g]=S<<24|S>>>8,h[g]=S<<16|S>>>16,d[g]=S<<8|S>>>24,p[g]=S,m?(m=w^_[_[_[j^w]]],y^=_[_[y]]):m=y=1}var C=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;e>o;o++)if(n>o)i[o]=t[o];else{var s=i[o-1];o%n?n>6&&4==o%n&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=s<<8|s>>>24,s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=C[o/n|0]<<24),i[o]=i[o-n]^s}for(t=this._invKeySchedule=[],n=0;e>n;n++)o=e-n,s=n%4?i[o]:i[o-4],t[n]=4>n||4>=o?s:u[a[s>>>24]]^h[a[s>>>16&255]]^d[a[s>>>8&255]]^p[a[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,r,c,l,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,h,d,p,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,a,o,s,r){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],p=4,_=1;c>_;_++)var f=i[l>>>24]^a[u>>>16&255]^o[h>>>8&255]^s[255&d]^n[p++],m=i[u>>>24]^a[h>>>16&255]^o[d>>>8&255]^s[255&l]^n[p++],y=i[h>>>24]^a[d>>>16&255]^o[l>>>8&255]^s[255&u]^n[p++],d=i[d>>>24]^a[l>>>16&255]^o[u>>>8&255]^s[255&h]^n[p++],l=f,u=m,h=y;f=(r[l>>>24]<<24|r[u>>>16&255]<<16|r[h>>>8&255]<<8|r[255&d])^n[p++],m=(r[u>>>24]<<24|r[h>>>16&255]<<16|r[d>>>8&255]<<8|r[255&l])^n[p++],y=(r[h>>>24]<<24|r[d>>>16&255]<<16|r[l>>>8&255]<<8|r[255&u])^n[p++],d=(r[d>>>24]<<24|r[l>>>16&255]<<16|r[u>>>8&255]<<8|r[255&h])^n[p++],e[t]=f,e[t+1]=m,e[t+2]=y,e[t+3]=d},keySize:8});e.AES=t._createHelper(n)}(),t.exports=i},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"GetBannerId_csjc",{get:function(){if(0==this._wxBannerIds_csjc.length)return"";var e=this._bannerIndex_csjc;return this._bannerIndex_csjc>this._wxBannerIds_csjc.length-1&&(this._bannerIndex_csjc=0,e=this._bannerIndex_csjc),this._bannerIndex_csjc++,this._wxBannerIds_csjc[e]},enumerable:!0,configurable:!0}),e.preloadBanner_csjc=function(){for(var t=10,n=new Array,i=0;i<this._wxBannerIds_csjc.length;++i)n.push(this._wxBannerIds_csjc[i]);if(n.length>t)for(var a=n.length-t,i=0;a>i;++i)n.splice(Math.floor(Math.random()*n.length),1);console.log("开始预创建微信Bannaer",n),console.log("Bannaer 最大数限制 ：",t);var o=0;Laya.timer.loop(2e3,e._preLoopObj_csjc,function(){if(o>=n.length)return void Laya.timer.clearAll(e._preLoopObj_csjc);var t=n[o],i=e._bannerCache_csjc[t];null==i&&(i=e.create_csjc(t),null!=i&&(e._bannerCache_csjc[t]=i,console.log("预创建微信Bannaer",t,"完成"))),++o})},e.getBanner_csjc=function(t){if(null==t||""==t)return null;var n=e._bannerCache_csjc[t];return null==n&&(n=e.create_csjc(t),null!=n&&(e._bannerCache_csjc[t]=n)),n},e.create_csjc=function(e){if(Laya.Browser.onMiniGame){null==this._sysInfo&&(this._sysInfo=Laya.Browser.window.wx.getSystemInfoSync());var t=this._sysInfo.screenWidth,n=this._sysInfo.screenHeight,i=(Laya.stage.height/n,Laya.Browser.window.wx.createBannerAd({adUnitId:e,adIntervals:30,style:{left:(t-300)/2,top:n-115,width:300}}));return i&&(i.onLoad(function(t){console.log("CachedWXBanner 广告 加载完成",e)}),i.onError(function(t){console.log("CachedWXBanner 广告 加载失败",e)}),i.onResize(function(e){console.log(i.style.realWidth,i.style.realHeight)})),i}return null},e.show_csjc=function(t){if(null!=e._curBanner_csjc)-1==t?e._curBanner_csjc.style.left=35:1==t?e._curBanner_csjc.style.left=this._sysInfo.screenWidth-300:e._curBanner_csjc.style.left=(this._sysInfo.screenWidth-300)/2,e._curBanner_csjc.show(),console.log("CachedWXBanner 广告显示 bannerid ： ",this._curBannerId_csjc);else{this._curBannerId_csjc=this.GetBannerId_csjc;var n=e.getBanner_csjc(this._curBannerId_csjc);n?(e._curBanner_csjc=n,-1==t?e._curBanner_csjc.style.left=35:1==t?e._curBanner_csjc.style.left=this._sysInfo.screenWidth-300:e._curBanner_csjc.style.left=(this._sysInfo.screenWidth-300)/2,e._curBanner_csjc.show(),console.log("CachedWXBanner 广告显示 bannerid ： ",this._curBannerId_csjc)):console.log("CachedWXBanner 不存在 bannerid ： ",this._curBannerId_csjc)}},e.hide_csjc=function(t){if(void 0===t&&(t=!0),Laya.timer.clearAll(e),null!=e._curBanner_csjc){var n=Math.random()>Math.max(.5,this._bannerDestoryTime/15);if(n&&t){e._curBanner_csjc.destroy();var i=this.create_csjc(this._curBannerId_csjc);null!=i&&(e._bannerCache_csjc[this._curBannerId_csjc]=i,console.log("开始隐藏销毁重新创建微信Bannaer",this._curBannerId_csjc)),this._bannerDestoryTime++}else e._curBanner_csjc.hide(),console.log("CachedWXBanner 广告单纯隐藏 bannerid ： ",this._curBannerId_csjc);e._curBanner_csjc=null}},e.changeShow_csjc=function(t,n){void 0===n&&(n=!0),null!=e._curBanner_csjc&&(e._curBanner_csjc.hide(n),e._curBanner_csjc=null),e.show_csjc(t)},e.clear_csjc=function(){Laya.timer.clearAll(e);for(var t in e._bannerCache_csjc){var n=e._bannerCache_csjc[t];null!=n&&n.destroy(),e._bannerCache_csjc[t]=null}},e._bannerCache_csjc={},e._curBanner_csjc=null,e._preLoopObj_csjc={},e._wxBannerIds_csjc=["adunit-b56f2105151c8af4","adunit-da778e192859eeb2","adunit-02f4a57b7c1a334a"],e._curBannerId_csjc="",e._bannerIndex_csjc=0,e._bannerDestoryTime=0,e}();n["default"]=i},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Net/HttpUnit"),a=function(){function e(){}return Object.defineProperty(e,"GetNativeAd_csjc",{get:function(){return e.nativeIndex++,e.nativeIndex>e.nativeAdList_csjc.length-1&&(e.nativeIndex=0),console.log("拿取原生返回Id： ",e.nativeAdList_csjc[e.nativeIndex]),e.nativeAdList_csjc[e.nativeIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BannerInstance_csjc",{get:function(){return e._banner_csjc},enumerable:!0,configurable:!0}),e.Login_csjc=function(e,t){Laya.Browser.onQGMiniGame&&Laya.Browser.window.qg.login({success:function(t){var n=t.data.token;e(n),console.log("OPPO 登陆成功,获取到 token : "+n);for(var i in t)console.log(i,t[i])},fail:function(e){console.log("OPPO 登陆失败",e);for(var t in e)console.log(t,e[t])}})},e.initAdService_csjc=function(t,n,i){Laya.Browser.window.qg.initAdService({appId:e.appId_csjc,isDebug:!1,success:function(e){console.log("oppo initAdService success"),t&&t(e)},fail:function(e){console.log("oppo initAdService fail: ",e.code,e.msg),n&&n(e)},complete:function(e){console.log("oppo initAdService complete"),i&&i(e)}})},e.showRewardedVideoAd_csjc=function(t,n){if(Laya.Browser.onQGMiniGame){var i=Laya.Browser.window.qg.createRewardedVideoAd({posId:e.adUnitId_csjc});i.onLoad(function(){console.log("oppo 视频广告加载完成"),i.show()}),i.onVideoStart(function(){console.log("oppo 视频广告开始播放")}),i.onClose(function(e){e.isEnded?(console.log("oppo 视频广告观看 完成"),t(!0)):(console.log("oppo 视频广告观看 未完成"),t(!1)),i.destroy()}),i.onError(function(e){console.log("oppo 视频广告获取失败",e);for(var t in e)console.log(t,e[t]);i.destroy(),n()}),i.load()}else t(!0)},e.navigateToMiniProgram_csjc=function(t,n,a,o,s,r){if(Laya.Browser.onQGMiniGame){console.log("OPPO 跳转游戏： "+t),i["default"].reportExport_csjc(t,n,function(e){1==e.code?console.log("OPPO 导出上报成功"):console.log("OPPO 导出上报失败",e.msg)},function(e){console.log("OPPO 导出上报失败");for(var t in e)console.log(t,e[t])});for(var c=Date.now();Date.now()-c<=500;);Laya.Browser.window.qg.navigateToMiniGame({pkgName:t,path:a,extraData:{from:e.appId_csjc},envVersion:"release",success:function(e){o&&o(e)},fail:function(e){s&&s(e)}})}},e.showBannaerAd_csjc=function(){if(Laya.Browser.onQGMiniGame){if(console.log("OPPO显示Banner"),e._banner_csjc)return void e._banner_csjc.show();var t=qg.createBannerAd({posId:e.bannerAdUnitId_csjc});t.onError(function(e){console.log("Banner广告拉取失败",e);for(var t in e)console.log(t,e[t])}),t.show(),e._banner_csjc=t}},e.hideBannerAd_csjc=function(){e._banner_csjc&&e._banner_csjc.hide()},e.getLaunchOptionsSync_csjc=function(){var e={query:"",referrerInfo:{"package":"",extraData:{appid:""}}};if(Laya.Browser.onQGMiniGame){var t=Laya.Browser.window.qg.getLaunchOptionsSync();return null!=t&&""!=t?e=t:console.log("没有启动设置！！！"),e}return e},e.share_csjc=function(e,t,n){e(!1)},e.createDesktopIcon_csjc=function(e,t){Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(n){0==n?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){t&&t(),console.log("创建桌面图标失败！！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){t&&t(),console.log("判断桌面图标是否存在失败！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):t&&t()},e.hasDesktopIcon_csjc=function(e,t){Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(t){0==t?(console.log("桌面图标不存在！！！！"),e&&e(!1)):(console.log("桌面图标已存在！！！！"),e&&e(!0))},fail:function(e){t&&t(),console.log("判断桌面图标是否存在失败！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):t&&t()},e.appId_csjc="30263446",e.adUnitId_csjc="258312",e.bannerAdUnitId_csjc="258306",e.nativeAdId_csjc="258308",e.nativeAdList_csjc=["258308","258309","258310"],e.nativeIndex=0,e._banner_csjc=null,e}();n["default"]=a},{"../Net/HttpUnit":14}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../User/User"),a=e("../GameConfig"),o=e("../Mgr/SoundMgr"),s=e("../GameSettings"),r=function(){function e(){}return Object.defineProperty(e,"BannerInstance_csjc",{get:function(){return e._banner_csjc},enumerable:!0,configurable:!0}),e.Login_csjc=function(t,n){console.log("vivo 开始登陆"),Laya.Browser.window.qg.getSystemInfoSync().platformVersionCode>=1053?Laya.Browser.window.qg.login().then(function(e){if(console.log("开始登陆成功 >= 1053"),e.data.token){var n=e.data.token;t(n,!0),console.log("vivo 登陆成功,获取到 token : "+n)}},function(t){console.log("登录失败"+JSON.stringify(t)),e.showDialog_csjc()}):Laya.Browser.window.qg.authorize({type:"token",success:function(n){Laya.Browser.window.qg.getProfile({token:n.accessToken,success:function(e){console.log("openid获取成功",e.openid),t(e.openid,!1)},fail:function(t,n){e.showDialog_csjc(),console.log("获取openid失败 : "+n)}})},fail:function(t,n){console.log("登录失败"+n),e.showDialog_csjc()}})},e.showDialog_csjc=function(){Laya.Browser.window.qg.showDialog({title:"提示",message:"登录失败，点击确定按钮重试",buttons:[{text:"确定",color:"#33dd44"}],success:function(t){console.log("handling callback"),e.VIVOLogin_csjc()},cancel:function(){console.log("handling cancel")},fail:function(e,t){console.log("handling fail, code = "+t)}})},e.VIVOLogin_csjc=function(){var t=this;e.Login_csjc(function(e,t){t?(console.log("登陆token1111:",e),i["default"].code_csjc=e):i["default"].openId_csjc=e,a["default"].startScene&&Laya.Scene.open(a["default"].startScene,!1,Laya.Handler.create(this,function(){}))},function(){a["default"].startScene&&Laya.Scene.open(a["default"].startScene,!1,Laya.Handler.create(t,function(){}))})},e.createRewardedVideoAd_csjc=function(){Laya.Browser.onVVMiniGame&&(e.rewardedAd_csjc=Laya.Browser.window.qg.createRewardedVideoAd({posId:e.adUnitId_csjc,style:{}}),e.rewardedAd_csjc.onError(function(e){switch(e.errCode){case-3:console.log("激励广告加载失败---调用太频繁",JSON.stringify(e));break;case-4:console.log("激励广告加载失败--- 一分钟内不能重复加载",JSON.stringify(e));break;case 30008:break;default:console.log("激励广告展示失败"),console.log(JSON.stringify(e))}}))},e.showRewardedVideoAd_csjc=function(t,n){if(Laya.Browser.onVVMiniGame){if(o["default"].instance_csjc.stopBGM_csjc(),console.log("---------------------------------- VIVOAPI.rewardedAd:",e.rewardedAd_csjc+",VIVOAPI.rewardedAdNum:",e.rewardedAdNum_csjc),0==e.rewardedAdNum_csjc)e.createRewardedVideoAd_csjc();else{var i=e.rewardedAd_csjc.load();i&&i["catch"](function(e){console.log("激励广告load失败"+JSON.stringify(e)),n()})}e.rewardedAdNum_csjc=1,console.log("近来showRewardedVideoAd"),e.rewardedAd_csjc.onLoad(function(){var t=e.rewardedAd_csjc.show();t&&t.then(function(){console.log("激励广告展示成功")})["catch"](function(e){console.log("激励广告展示失败"+JSON.stringify(e)),n()})}),e.rewardedAd_csjc.onClose(function(e){e&&e.isEnded?(console.log("正常播放结束，可以下发游戏奖励"),t(!0)):(console.log("播放中途退出，不下发游戏奖励"),t(!1))})}else t(!0)},e.showBannerAd_csjc=function(){if(Laya.Browser.onVVMiniGame){console.log("===========bannerAd showBanerAd");var t=Laya.Browser.window.qg.getSystemInfoSync();t.screenWidth,t.screenHeight;e.mBannerAd_csjc=qg.createBannerAd({posId:e.bannerAdUnitId_csjc,style:{}});var n=e.mBannerAd_csjc.show();n&&n.then(function(){console.log("banner广告展示成功")})["catch"](function(e){switch(e.code){case 30003:console.log("新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入");break;case 30009:console.log("10秒内调用广告次数超过1次，10秒后再调用");break;case 30002:console.log("加载广告失败，重新加载广告");break;default:console.log("banner广告展示失败"),console.log(JSON.stringify(e))}}),e.mBannerAd_csjc.onError(function(e){console.log("Banner广告加载失败111:"+JSON.stringify(e))})}},e.hideBannerAd_csjc=function(){e.mBannerAd_csjc?(console.log("===========bannerAd 隐藏"),e.mBannerAd_csjc.hide(),e.mBannerAd_csjc.destroy()):console.log("===========bannerAd 为空")},e.navigateToMiniProgram_csjc=function(e,t,n,i,a){Laya.Browser.onVVMiniGame&&(console.log("vivo 跳转游戏： "+e),Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,path:t,extraData:{from:s["default"].AppID_csjc},envVersion:"release",success:function(e){n&&n(e)},fail:function(e){i&&i(e)},complete:function(e){a&&a(e)}}))},e.preLoadInterstitialAd_csjc=function(){Laya.Browser.onVVMiniGame&&(e._insertAd=Laya.Browser.window.qg.createInterstitialAd({posId:e.insAdUnitId_csjc}))},e.showInterstitialAd_csjc=function(t,n){var i=this;if(Laya.Browser.onVVMiniGame){if(null==e._insertAd)return;e._insertAd.onLoad(function(){console.log("插屏广告加载完成")}),e._insertAd.onClose(function(){i._insertAd=null,t&&t()}),e._insertAd.onError(function(e){console.log("插屏广告拉取失败",JSON.stringify(e)),n&&n()}),e._insertAd.show().then(function(){console.log("插屏广告展示完成")})["catch"](function(e){console.log("插屏广告展示失败",JSON.stringify(e))})}else t&&t()},e.getLaunchOptionsSync_csjc=function(){return{}},e.share_csjc=function(e){Laya.Browser.onVVMiniGame&&Laya.Browser.window.qg.share({success:function(){null!=e&&e(!0),Laya.Browser.window.qg.showToast({message:"分享成功"})},fail:function(e,t){Laya.Browser.window.qg.showToast({message:"分享失败"})},cancel:function(){Laya.Browser.window.qg.showToast({message:"分享失败"})},complete:function(){}})},e.createDesktopIcon_csjc=function(e,t){Laya.Browser.onVVMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(n){0==n?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){t&&t(),console.log("创建桌面图标失败！！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){t&&t(),console.log("判断桌面图标是否存在失败！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):t&&t()},e.hasDesktopIcon_csjc=function(e,t){Laya.Browser.onVVMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(t){0==t?(console.log("桌面图标不存在！！！！"),e&&e(!1)):(console.log("桌面图标已存在！！！！"),e&&e(!0))},fail:function(e){t&&t(),console.log("判断桌面图标是否存在失败！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):t&&t()},e.adUnitId_csjc="a8a44fd39bcd4e80a52e39be99074ac1",e.bannerAdUnitId_csjc="bc2f7435abde42aeb30186460ff3c57b",e.nativeAdId_csjc="caa8404ca6e7413795c43ed17189faff",e.insAdUnitId_csjc="6ab8564f134e45508dc6a2be9b2d544f",e.rewardedAd_csjc=null,e.rewardedAdNum_csjc=0,e._banner_csjc=null,e.nativeAdList_csjc=[],e.nativeIndex_csjc=0,e.mBannerAd_csjc=null,e._insertAd=null,e}();n["default"]=r},{"../GameConfig":7,"../GameSettings":8,"../Mgr/SoundMgr":10,"../User/User":64}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.wxLogin_csjc=function(e,t){Laya.Browser.onMiniGame&&Laya.Browser.window.wx.login({success:function(t){if(t.code){var n=t.code;e(n),console.log("登陆成功,获取到code : "+n)}}})},e.onRewardedVideoAdLoad_csjc=function(){console.log("激励视频 广告加载完成")},e.onRewardedVideoAdError_csjc=function(t){console.log("激励视频 广告加载失败"+t),e._onRewardedVideoAdFailed_csjc&&e._onRewardedVideoAdFailed_csjc()},e.onRewardedVideoAdClose_csjc=function(t){t&&t.isEnded||null==t?(console.log("激励视频 已完整观看"),e._onRewardedVideoAdClose_csjc&&e._onRewardedVideoAdClose_csjc(!0)):(console.log("激励视频 未完整观看"),e._onRewardedVideoAdClose_csjc&&e._onRewardedVideoAdClose_csjc(!1))},e.regRewardedVideoAdEvent_csjc=function(t){t.onLoad(e.onRewardedVideoAdLoad_csjc),t.onError(e.onRewardedVideoAdError_csjc),t.onClose(e.onRewardedVideoAdClose_csjc),e._isRegRewardedVideoAdEvent_csjc=!0},e.showRewardedVideoAd_csjc=function(t,n){if(Laya.Browser.onMiniGame){e._onRewardedVideoAdClose_csjc=t,e._onRewardedVideoAdFailed_csjc=n;var i=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:e.adUnitId_csjc});e._isRegRewardedVideoAdEvent_csjc||e.regRewardedVideoAdEvent_csjc(i),i.load().then(function(){var e=i.show();e.then(function(){return console.log("激励视频 广告显示成功")}),e["catch"](function(e){i.load().then(function(){return i.show()})["catch"](function(e){console.log("激励视频 广告显示失败"),n&&n()})})})["catch"](function(e){console.log("激励视频 广告加载失败"),n&&n()})}else t(!0)},e.navigateToMiniProgram_csjc=function(e,t,n,i,a){Laya.Browser.onMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success:function(e){n&&n(e)},fail:function(e){i&&i(e)},complete:function(e){a&&a(e)}}))},e.share_csjc=function(t,n,i){var a=this;Laya.Browser.onMiniGame&&(e._onShow_csjc=function(){Laya.Browser.window.wx.offShow(e._onShow_csjc),e._onShow_csjc=null;Date.now()-a._lastShareTime_csjc;t&&t(Date.now()-a._lastShareTime_csjc>2e3?!0:!1)},Laya.Browser.window.wx.onShow(e._onShow_csjc),e._lastShareTime_csjc=Date.now(),Laya.Browser.window.wx.shareAppMessage({title:n,imageUrl:i}))},e.showInterstitialAd_csjc=function(t,n){if(Laya.Browser.onMiniGame){var i=Laya.Browser.window.wx.createInterstitialAd({adUnitId:e.insAdUnitId_csjc});i.onLoad(function(){console.log("插屏广告 加载完成"),i.show()["catch"](function(e){console.log("插屏广告 显示失败 ："+e),n&&n()})}),i.onError(function(e){console.log("插屏广告 加载失败"+e),n&&n()}),i.onClose(function(){console.log("插屏广告 关闭"),t&&t()})}else t()},e.getLaunchOptionsSync_csjc=function(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getLaunchOptionsSync();console.log("场景值 "+e.scene);JSON.stringify(e.query),e.query.key;return e}var t={scene:1001,query:"",shareTicket:"",appId:"",extraData:""};return t},e.SetShareMenu_csjc=function(e,t,n,i,a){Laya.Browser.onMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.wx.showShareMenu({withShareTicket:!1,success:n,fail:i,complete:a}),Laya.Browser.window.wx.onShareAppMessage(function(){return{title:e,imageUrl:t}}))},e.checkUpdate_csjc=function(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log("是否需要更新 : ",e.hasUpdate)}),e.onUpdateReady(function(){Laya.Browser.window.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启小游戏？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){console.log("新版本下载失败!!!")})}},e.adUnitId_csjc="adunit-d03608b9c917e381",e.bannerAdUnitId_csjc="adunit-184455f3f8e74277",e.insAdUnitId_csjc="",e.nativeadId_csjc="adunit-eeceae41aefd1185",e._isRegRewardedVideoAdEvent_csjc=!1,e._onRewardedVideoAdFailed_csjc=null,e._onRewardedVideoAdClose_csjc=null,e._onShow_csjc=null,e._lastShareTime_csjc=0,e}();n["default"]=i},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("./HttpUnit"),o=e("../GameSettings"),s=e("../User/User"),r=e("../PlatformApi/WXAPI"),c=e("../Event/EventMgr"),l=e("../Event/EventDef"),u=e("../Event/EventMgr");!function(e){e[e.ce_la_lan=1]="ce_la_lan",e[e.h_slider=2]="h_slider",e[e.banner=3]="banner",e[e.big_export_ui=4]="big_export_ui",e[e.over_ui=5]="over_ui",e[e.wei_tui_chu=6]="wei_tui_chu"}(i=n.ComponentStyle||(n.ComponentStyle={}));var h=function(){function e(){this.displayCount=0,this.clickCount=0,this.exportCount=0,this.isExport=0}return e}();n.APPItemRecord=h;var d=function(){function e(){this.gifList=[],this.screenList=[],this.bannerList=[],this.weight=1,this.iconFilletList=[],this.displayCount=0,this.useImgList=[]}return e}();n.APPItem=d;var p=function(){function e(){this.mAppId="",this.mOpenId="",this.mProductId=0,this.mServerRootUrl='"https://qp.qingpukj.com:8055/',this._canUsedStyle=[],this._products=[],this._isCheck=!1,this._loaded=!1,this.shareCount=0,this._materiaList=[],this._exportProductList=[],this._url_matrixReport="reportGame/matrixReport",this._recording=!1,this.iconList=[],this.screenList=[],this.bannerList=[],this.iconNames=[],this.screenNames=[]}return Object.defineProperty(e,"Instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.InitMatix=function(e,t){void 0===t&&(t="https://qp.qingpukj.com:8055/"),this.mAppId=o["default"].AppID_csjc,this.mServerRootUrl=t,this.Init(e||null)},e.prototype.Init=function(e,t){void 0===t&&(t="");var n=this;this.LoadInfo(t,function(t){setInterval(function(){n.UpdateRecord()},3e4),e&&e(t)})},e.prototype.LoadInfo=function(t,n){var i=this,c=this,l=r["default"].getLaunchOptionsSync_csjc(),u=l.scene,h="";l.referrerInfo&&l.referrerInfo.appId&&(h=l.referrerInfo.appId);var p=c.mServerRootUrl+"business/product/game/getProductInfo",_={};_.appId=o["default"].AppID_csjc,_.code=s["default"].code_csjc,_.sceneCode=u,_.sceneAppId=h,_.shareUser=t;var f=e.Instance.GetParamsMsgForObj(_);a.HttpTools.Post(p,f,this,function(e){if(console.log("[Matrix]读取服务矩阵数据：",e),e&&0==e.code){c._canUsedStyle=[];for(var t=e.styleAssembly.split(","),a=0;a<t.length;++a)c._canUsedStyle.push(Number(t[a]));if(c.mProductId=e.productId,c._isCheck=1==Number(e.isCheck),c._products=[],!e.productExportList)return void(c._loaded=!1);for(var a=0;a<e.productExportList.length;a++){var o=e.productExportList[a],r=new d;r.screenList=o.screenList,r.gifList=o.gifList,r.gameName=o.gameName,r.bannerList=o.bannerList,r.appId=o.appId,r.advertPath=o.advertPath,r.weight=o.weight,r.iconFilletList=o.iconFilletList,r.advertId=o.advertId,r.displayCount=0,c._products.push(r)}""==s["default"].openId_csjc&&(i.mOpenId=e.openId,s["default"].openId_csjc=i.mOpenId),console.error("矩阵列表",i._products),c._loaded=!0}i.loadAllLink(),
n&&n(e)},function(e){c._products=[];for(var t=0;10>t;t++){var a={advertId:233,advertPath:"?wxgamecid=CCBgAAoXkpQAM2KVNXRf9BKQ",appId:"wxc5d17fdf515fbbc2",bannerList:["https://hn.g58mall.com/gameDevopsImgs/20200915/20200915104328_he7v.jpg"],displayCount:0,gameName:"香肠大决斗",gifList:[],iconFilletList:["https://hn.g58mall.com/gameDevopsImgs/20201022/20201022162732_utao.jpg","https://hn.g58mall.com/gameDevopsImgs/20201022/20201022162744_58vd.png"],screenList:["https://hn.g58mall.com/gameDevopsImgs/20200915/20200915104244_kepk.jpg","https://hn.g58mall.com/gameDevopsImgs/20200917/20200917160524_hxbi.png"],useImgList:[],weight:10};c._products.push(a)}c._loaded=!0,i.loadAllLink(),n&&n(e)})},e.prototype.NavigateTo=function(t,n,i,a){e.Instance.AddClickRecord(t,n),r["default"].navigateToMiniProgram_csjc(n.appId,n.advertPath,function(a){e.Instance.AddOpenRecord(t,n,!0),e.Instance.UpdateRecord(),u["default"].dispatch_csjc(l.EventDef_csjc.AD_OnShareAdSuccess_csjc,t),i&&i(a)},function(e){console.log(e.errMsg),c["default"].dispatch_csjc(l.EventDef_csjc.AD_OnShareAdFail_csjc),a&&a(e)},function(e){})},e.prototype.GetDataByStyleAndCount=function(e,t){var n=[];if(!this._products||0==this._products.length)return n;if(!this._loaded)return n;var i=[4];return(this.screenList.length<t||this.iconList.length<t)&&this.loadAllLink(),n=3==e?this.bannerList.splice(0,t):i.indexOf(e)>-1?this.screenList.splice(0,t):this.iconList.splice(0,t),this.AddShowRecord(e),n},e.prototype.loadAllLink=function(){this.iconList=[],this.screenList=[];for(var e=0;e<this._products.length;e++){var t=this._products[e];t.iconFilletList.sort(function(e,t){return Math.random()-.5}),t.screenList.sort(function(e,t){return Math.random()-.5})}for(var e=0;4>e;e++){for(var n=[],i=[],a=[],o=[],s=0;s<this._products.length;s++){var t=JSON.parse(JSON.stringify(this._products[s]));t.iconFilletList[e]&&(t=JSON.parse(JSON.stringify(this._products[s])),t.useImgList=[t.iconFilletList[e]],s>this._products.length/2?n.push(t):i.push(t)),t.screenList[e]&&(t=JSON.parse(JSON.stringify(this._products[s])),t.useImgList=[t.screenList[e]],s>this._products.length/2?a.push(t):o.push(t)),t.bannerList[e]&&(t=JSON.parse(JSON.stringify(this._products[s])),t.useImgList=[t.bannerList[e]],this.bannerList.push(t))}n.sort(function(e,t){return Math.random()-.5}),i.sort(function(e,t){return Math.random()-.5}),a.sort(function(e,t){return Math.random()-.5}),o.sort(function(e,t){return Math.random()-.5}),this.bannerList.sort(function(e,t){return Math.random()-.5}),this.iconList=this.iconList.concat(n,i),this.screenList=this.iconList.concat(a,o)}},e.prototype.RepetitionArr=function(e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=t[i.appId];a||(a=[]),a.push(i),t[i.appId]=a}for(var o=[],n=0;5>n;n++)for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=t[s],c=r[n];c&&o.push(r[n])}return o},e.prototype.GetUseImgUrl=function(e,t,n,a){if(!t)return[];var o=[];this.GetIsCanUseGifByStyle(e)&&n&&t.gifList&&t.gifList.length>0&&(o=t.gifList);var s=[];switch(e){case i.ce_la_lan:s=t.screenList;break;case i.big_export_ui:s=t.screenList;break;case i.banner:s=t.bannerList;break;case i.h_slider:s=t.iconFilletList;break;case i.over_ui:s=t.iconFilletList}var r=.5;0==o.length&&(r=1.1);var c=Math.random();if(c>r)return o;if(0==s.length)return[];for(var l=[],u=0;u<s.length;++u)-1==a.indexOf(s[u])&&l.push(s[u]);if(0==l.length)return[];var h=Math.floor(Math.random()*l.length);return[l[h]]},e.prototype.GetRandomByWeight=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].weight;for(var i=Math.floor(Math.random()*t),a=0,n=0;n<e.length;n++)if(n>0&&(i-=e[n-1].weight),i<e[n].weight){a=n;break}return a},e.prototype.GetIsCanUseGifByStyle=function(e){return e==i.ce_la_lan||e==i.big_export_ui||e==i.h_slider},e.prototype.GetParamsMsgForObj=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")},e.prototype.AddShowRecord=function(e){for(var t=!1,n=0;n<this._materiaList.length;n++){var i=this._materiaList[n];e==Number(i.locationCode)&&(this._materiaList[n].displayCount++,t=!0)}if(!t){var i=new h;i.locationCode=""+e,i.displayCount=1,i.clickCount=0,i.isExport=0,i.exportCount=0,i.exportProductId="",this._materiaList.push(i)}},e.prototype.AddClickRecord=function(e,t){for(var n=!1,i=0;i<this._exportProductList.length;i++){var a=this._exportProductList[i];t.advertId==Number(a.productId)&&(this._exportProductList[i].clickCount++,n=!0)}if(!n){var a={productId:""+t.advertId,clickCount:1};this._exportProductList.push(a)}for(var i=0;i<this._materiaList.length;i++){var o=this._materiaList[i];e==Number(o.locationCode)&&this._materiaList[i].clickCount++}},e.prototype.AddOpenRecord=function(e,t,n){for(var i=0;i<this._materiaList.length;i++){var a=this._materiaList[i];if(e==Number(a.locationCode)&&n){this._materiaList[i].exportCount++,this._materiaList[i].exportProductId=t.advertId+"",this._materiaList[i].isExport=1;break}}},e.prototype.UpdateRecord=function(){var e=this;if(this._recording)return void console.log("[Matrix]数据上报中");if(this._exportProductList.length<=0&&!this.CheckMateria())return void console.log("[Matrix]数据无变更，不需要上报");this._recording=!0;var t={openId:s["default"].openId_csjc,productId:this.mProductId,materiaList:this._materiaList,exportProductList:this._exportProductList,shareCount:this.shareCount};if(0!=t.materiaList.length||0!=t.exportProductList.length||0!=t.shareCount){console.log("[Matrix]上传数据到服务器 params:\n",JSON.stringify(t));var n=this.mServerRootUrl+"reportGame/matrixReport";a.HttpTools.PostJson(n,t,this,function(t){console.log("[Matrix]上传数据到服务器结果：",JSON.stringify(t)),-1!=t&&200==t.code&&e.clearRecord(),e._recording=!1},null)}},e.prototype.CheckMateria=function(){if(this._materiaList.length<=0)return!1;for(var e=0;e<this._materiaList.length;e++)if(0!=this._materiaList[e].clickCount||0!=this._materiaList[e].displayCount||0!=this._materiaList[e].exportCount||0!=this._materiaList[e].isExport)return!0;return!1},e.prototype.clearRecord=function(){for(var e=0;e<this._materiaList.length;e++)this._materiaList[e].clickCount=0,this._materiaList[e].displayCount=0,this._materiaList[e].exportCount=0,this._materiaList[e].isExport=0;this._exportProductList=[],this.shareCount=0},e.prototype.GetIsPassed=function(){return this._isCheck},e.prototype.CanUseStyle=function(e){return this._canUsedStyle.indexOf(e)>-1},e}();n.AdDataMgr=p},{"../Event/EventDef":5,"../Event/EventMgr":6,"../GameSettings":8,"../PlatformApi/WXAPI":20,"../User/User":64,"./HttpUnit":29}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../PlatformApi/WXAPI"),a=e("../AdDataMgr"),o=e("../../PlatformApi/CachedWXBannerAd"),s=e("../../CommomAPI/ExamineMgr"),r=function(e){function t(){var t=e.call(this)||this;return t.RefreshTime=6e3,t._data=null,t._wxBanner=null,t}return __extends(t,e),t.prototype.onAwake=function(){this._showSp=this.owner.getChildByName("Display"),null==this._showSp&&(this._showSp=this.owner)},t.prototype.onDisable=function(){this.clearBannerWx()},t.prototype.onStart=function(){s["default"].CanShowAd_Wx?this.refreshAd():this._showSp.visible=!1},t.prototype.refreshAd=function(){console.log("Banner组件显示BannerAd"),this.refreshBannerAd(),Laya.timer.loop(this.RefreshTime,this,this.refreshBannerAd)},t.prototype.refreshBannerAd=function(){this._data=a.AdDataMgr.Instance.GetDataByStyleAndCount(a.ComponentStyle.banner,1)[0],this._data&&(console.log(this._data),this._showSp.loadImage(this._data.bannerList[Math.floor(Math.random()*this._data.bannerList.length)]))},t.prototype.onClick=function(){this._data&&(console.log("跳转游戏： "+this._data.gameName),Laya.Browser.onMiniGame?a.AdDataMgr.Instance.NavigateTo(a.ComponentStyle.banner,this._data):console.log("跳转完成"))},t.prototype.refreshBannerWx=function(){var e=this;if(Laya.timer.clear(this,this.refreshBannerAd),Laya.Browser.onMiniGame&&this.owner.visible){this.clearBannerWx();var t=this,n=Laya.Browser.window.wx.getSystemInfoSync(),a=n.screenWidth,o=n.screenHeight,s=this._showSp.localToGlobal(new Laya.Point(0,0)),r=s.x/Laya.stage.width*a,c=s.y/Laya.stage.height*o,l=this.WXBannerWidth?this.WXBannerWidth/Laya.stage.width*a:a;this._wxBanner=Laya.Browser.window.wx.createBannerAd({adUnitId:i["default"].bannerAdUnitId_csjc,adIntervals:30,style:{left:r,top:c,width:l}}),t._wxBanner.onLoad(function(e){console.log("WXBanner广告 加载完成"),console.log(e)}),this._wxBanner.onError(function(t){console.log("WXBanner广告 加载失败"),console.log(t),e.refreshBannerAd(),e.clearBannerWx()}),this._wxBanner.onResize(function(e){console.log(t._wxBanner.style.realWidth,t._wxBanner.style.realHeight)}),t._wxBanner.show()}},t.prototype.clearBannerWx=function(){this._wxBanner&&this._wxBanner.destroy(),this._wxBanner=null,o["default"].hide_csjc(),Laya.timer.clear(this,this.refreshBannerAd)},t.prototype.onViewShow=function(){},t.prototype.onViewHide=function(){this.clearBannerWx()},t}(Laya.Script);n["default"]=r},{"../../CommomAPI/ExamineMgr":2,"../../PlatformApi/CachedWXBannerAd":17,"../../PlatformApi/WXAPI":20,"../AdDataMgr":21}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../AdDataMgr"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._data=null,t._fontSize=25,t._positionId=0,t._creativeId=0,t._appId="",t}return __extends(t,e),t.prototype.onAwake=function(){this._displaySp=this.owner.getChildByName("Display"),this._disText=this.owner.getChildByName("TitleText"),this._disText.text="",this._fontSize=this._disText.fontSize},t.prototype.setData=function(e,t,n){e&&(this._data=e,this._displaySp.loadImage(this._data.useImgList[Math.floor(Math.random()*this._data.useImgList.length)],Laya.Handler.create(this,function(){})),this._disText.text=this._data.gameName),this._parentAdView=t},t.prototype.onMouseDown=function(){this.NavigateTo()},t.prototype.NavigateTo=function(){this._data&&(console.log("跳转游戏： "+this._data.gameName),Laya.Browser.onMiniGame?i.AdDataMgr.Instance.NavigateTo(i.ComponentStyle.h_slider,this._data):console.log("跳转完成"))},t}(Laya.Script);n["default"]=a},{"../AdDataMgr":21}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./QpListAdBox"),a=e("../AdDataMgr"),o=e("../../CommomAPI/ExamineMgr"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdStyle="Slider",t.ScrollDirection="Horizontal",t.ScrollSpeed=100,t.ListCount=20,t._scrollForward=!0,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._list=this.owner.getChildByName("List"),this._list.elasticEnabled=!0,this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),"Horizontal"==this.ScrollDirection?this._list.hScrollBarSkin="":this._list.vScrollBarSkin="",this.owner.on("AdRefresh",this,this.RefreshAdList)},t.prototype.onEnable=function(){o["default"].CanShowAd_Wx?this.RefreshAdList():this._ownerSp.visible=!1},t.prototype.onUpdate=function(){var e=this.ScrollSpeed*Laya.timer.delta/1e3;this._list.scrollBar.value+=e,this._list.scrollBar.value>=this._list.scrollBar.max?this._list.scrollBar.value=0:this._list.scrollBar.value<0&&(this._list.scrollBar.value=this._list.scrollBar.max)},t.prototype.onListRender=function(e,t){var n=this._list.array[t],a=e.getComponent(i["default"]);a.setData(n,this.owner,t)},t.prototype.RefreshAdList=function(){var e=a.ComponentStyle.h_slider;switch(this.AdStyle){case"Slider":e=a.ComponentStyle.h_slider;break;case"Banner":e=a.ComponentStyle.banner;break;case"Export":e=a.ComponentStyle.big_export_ui}var t=a.AdDataMgr.Instance.GetDataByStyleAndCount(e,30);if(t.length>0&&t.length<this.ListCount){for(var n=this.ListCount-t.length,i=t.concat(),o=0;n>o;o++){var s=t[o];i.push(s)}this._list.array=i}else this._list.array=t},t}(Laya.Script);n["default"]=s},{"../../CommomAPI/ExamineMgr":2,"../AdDataMgr":21,"./QpListAdBox":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../AdDataMgr"),a=e("../../CommomAPI/ExamineMgr"),o=e("../QpGameSwitch"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._clickTimer=500,t}return __extends(t,e),t.prototype.onUpdate=function(){this._clickTimer>0&&(this._clickTimer-=Laya.timer.delta)},t.prototype.onClick=function(){if(Laya.Browser.onMiniGame&&(console.log("自动跳功能屏蔽"+a["default"].CanDoScz_Wx+",开关"+(1==o["default"].GameSwitch.popAd)),a["default"].CanDoScz_Wx&&1==o["default"].GameSwitch.popAd&&o["default"].GameSwitch.indexAd)){if(this._clickTimer>0)return;this._clickTimer=3e3;var e=i.AdDataMgr.Instance.GetDataByStyleAndCount(i.ComponentStyle.h_slider,10);if(e.length>0){var t=e[Math.floor(Math.random()*e.length)];t&&i.AdDataMgr.Instance.NavigateTo(i.ComponentStyle.h_slider,t)}}},t}(Laya.Script);n["default"]=s},{"../../CommomAPI/ExamineMgr":2,"../AdDataMgr":21,"../QpGameSwitch":30}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./QpListAdBox"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.RdName="",t.RdCount=0,t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._rdSp=this.owner.getChildByName("RdSp")},t.prototype.setData=function(e,t,n){if(e&&(this._data=e,this._displaySp.loadImage(this._data.useImgList[Math.floor(Math.random()*this._data.useImgList.length)],Laya.Handler.create(this,function(){})),this._disText.text=this._data.gameName,null!=this.RdName&&this.RdCount>0&&null!=this._rdSp)){var i=n%this.RdCount,a=this.RdName+i+".png";this._rdSp.skin=a}this._parentAdView=t},t}(i["default"]);n["default"]=a},{"./QpListAdBox":23}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./QpListAdBox"),a=e("../AdDataMgr"),o=e("../../CommomAPI/ExamineMgr"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdStyle="Slider",t.ShakeRestTime=1500,t.ShakeTime=300,t.ShakeNeedCount=4,t.ChaneAdTime=6e3,t.RotaAngel=10,t.Scale=.1,t._shakeTimer=0,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._cells=this._list.cells},t.prototype.onEnable=function(){o["default"].CanShowAd_Wx?this.RefreshAdList():this._ownerSp.visible=!1},t.prototype.onUpdate=function(){if(!(this._shakeTimer<=this.ChaneAdTime))return this._shakeTimer=0,void this.RefreshAdList();if(this._shakeTimer+=Laya.timer.delta,this._shakeTimer>this.ShakeRestTime&&this._shakeTimer<=this.ShakeRestTime+this.ShakeTime*this.ShakeNeedCount)for(var e=(this._shakeTimer-this.ShakeRestTime)%this.ShakeTime/this.ShakeTime,t=Math.sin(3.14*e*2),n=0;n<this._cells.length;n++){var i=this._cells[n];i.rotation=t*this.RotaAngel,i.scaleX=1-t*this.Scale,i.scaleY=i.scaleX}else for(var n=0;n<this._cells.length;n++){var i=this._cells[n];i.rotation=0,i.scaleX=1,i.scaleY=1}},t.prototype.onListRender=function(e,t){var n=this._list.array[t],a=e.getComponent(i["default"]);a.setData(n,this.owner,t)},t.prototype.RefreshAdList=function(){var e=a.ComponentStyle.h_slider;switch(this.AdStyle){case"Slider":e=a.ComponentStyle.h_slider;break;case"Banner":e=a.ComponentStyle.banner;break;case"Export":e=a.ComponentStyle.big_export_ui}var t=a.AdDataMgr.Instance.GetDataByStyleAndCount(e,this._cells.length);this._list.array=t},t}(Laya.Script);n["default"]=s},{"../../CommomAPI/ExamineMgr":2,"../AdDataMgr":21,"./QpListAdBox":23}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./QpShakeAd2View"),a=e("./QpListAdBox"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdStyle="Slider",t.ShakeRestTime=1500,t.ShakeTime=300,t.ShakeNeedCount=4,t.ChaneAdTime=6e3,t.RotaAngel=10,t.Scale=.1,t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._list2=this.owner.getChildByName("List2"),this._list2.renderHandler=Laya.Handler.create(this,this.onList2Render,null,!1)},t.prototype.onList2Render=function(e,t){var n=this._list.array[t],i=e.getComponent(a["default"]);i.setData(n,this.owner,t)},t.prototype.RefreshAdList=function(){e.prototype.RefreshAdList.call(this),this._list2.array=this._list.array.concat()},t}(i["default"]);n["default"]=o},{"./QpListAdBox":23,"./QpShakeAd2View":27}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.Requset=function(t,n,i,a,o,s,r,c){var l=this;void 0===r&&(r="json"),void 0===c&&(c=null);var u=new Laya.HttpRequest;u.once(Laya.Event.COMPLETE,null,function(e){return 200!=e.code&&0!=e.code?(l.Error(u,e),void(o&&o.call(e))):void(a&&a.call(i,e))}),u.once(Laya.Event.ERROR,i,o),u.once(Laya.Event.ERROR,e,this.Error),u.send(t,n,s,r,c)},e.Post=function(e,t,n,i,a,o,s){void 0===o&&(o="json"),void 0===s&&(s=null),this.Requset(e,t,n,i,a,"post",o,s)},e.Get=function(e,t,n,i,a,o,s){void 0===o&&(o="json"),void 0===s&&(s=null),this.Requset(e,t,n,i,a,"get",o,s)},e.PostJson=function(e,t,n,i,a){this.Post(e,t,n,i,a,"json")},e.Error=function(e,t){console.log("Requset Error, Url:"+e.url+", Error Message:"+JSON.stringify(t))},e.JsonToKeyValue=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")},e}();n.HttpTools=i},{}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../GameSettings"),a=function(){function e(){this.wudianSwitch=1,this["export"]=1,this.endExport=1,this.btnShowTimer=2,this.btnMoveTimer=2.5,this.bannerMoveTimer=1.5,this.bannerKuangdian1=0,this.bannerKuangdian2=0,this.bannerWudian=0,this.cityList=[],this.indexPanel=0,this.popAd=0,this.sceneList=[1005,1006,1007,1008,1011,1012,1013,1014,1017,1020,1023,1024,1025,1030,1031,1032,1036,1042,1044,1047,1048,1049,1053,1102],this.kuangdianTime=[11,12,13,14,18,19,20],this.startVideo=0,this.indexAd=1}return e}();n.sdkcustom=a;var o=function(){function e(){}return e.getCustomKey=function(e){var t=this;this.httpRequest("https://qp.qingpukj.com:8055/business/product/game/getAttribute","appid="+i["default"].AppID_csjc,"application/x-www-form-urlencoded",function(n){var i=JSON.parse(n.msg);i&&(i.wudianSwitch&&(t.customkey.wudianSwitch=i.wudianSwitch),i["export"]&&(t.customkey["export"]=i["export"]),i.endExport&&(t.customkey.endExport=i.endExport),i.btnShowTimer&&(t.customkey.btnShowTimer=i.btnShowTimer),i.btnMoveTimer&&(t.customkey.btnMoveTimer=i.btnMoveTimer),i.bannerMoveTimer&&(t.customkey.bannerMoveTimer=i.bannerMoveTimer),i.bannerKuangdian1&&(t.customkey.bannerKuangdian1=i.bannerKuangdian1),i.bannerKuangdian2&&(t.customkey.bannerKuangdian2=i.bannerKuangdian2),i.bannerWudian&&(t.customkey.bannerWudian=i.bannerWudian),i.indexPanel&&(t.customkey.indexPanel=i.indexPanel),i.popAd&&(t.customkey.popAd=i.popAd),i.cityList&&(t.customkey.cityList=JSON.parse(i.cityList)),i.sceneList&&(t.customkey.sceneList=JSON.parse(i.sceneList)),i.kuangdianTime&&(t.customkey.kuangdianTime=JSON.parse(i.kuangdianTime)),i.startVideo&&(t.customkey.startVideo=i.startVideo),i.indexAd&&(t.customkey.indexAd=i.indexAd)),e&&e()})},Object.defineProperty(e,"IsIpPass",{get:function(){if(null!=this._city){for(var e=0;e<this.customkey.cityList.length;e++){var t=this.customkey.cityList[e];if(this._city.search(t)>-1)return!1}return!0}},enumerable:!0,configurable:!0}),e.UpdateIpCity=function(e){var t=this;this.httpRequest("https://qp.qingpukj.com:8055/business/product/game/getIPArea","appid="+i["default"].AppID_csjc,"application/x-www-form-urlencoded",function(n){console.log("IP",n),n&&n.area&&(t._city=n.area),e&&e()})},Object.defineProperty(e,"GameSwitch",{get:function(){return this.customkey},enumerable:!0,configurable:!0}),e.httpRequest=function(e,t,n,i,a){void 0===a&&(a="POST"),Laya.Browser.onMiniGame&&Laya.Browser.window.wx.request({url:e,data:t,method:a,header:{"content-type":n},success:function(e){i&&i(e.data),console.log("连接成功",e)},fail:function(e){i&&i(null),console.log("连接错误",e)}})},e.customkey=new a,e}();n["default"]=o},{"../GameSettings":8}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.WorldToScreen2=function(e,t){var n=this.InverseTransformPoint(e.transform,t),i=n.z,a=new Laya.Vector3;e.viewport.project(t,e.projectionViewMatrix,a);var o=new Laya.Vector3(a.x/Laya.stage.clientScaleX,a.y/Laya.stage.clientScaleY,i);return o},e.InverseTransformPoint=function(e,t){var n=new Laya.Vector3;e.getRight(n);var i=new Laya.Vector3;e.getUp(i);var a=new Laya.Vector3;e.getForward(a);var o=new Laya.Vector3(-a.x,-a.y,-a.z),s=this.ProjectDistance(t,e.position,n),r=this.ProjectDistance(t,e.position,i),c=this.ProjectDistance(t,e.position,o),l=new Laya.Vector3(s,r,c);return l},e.ProjectDistance=function(e,t,n){var i=new Laya.Vector3;Laya.Vector3.subtract(e,t,i);var a=this.Angle2(i,n)*Math.PI/180,o=Laya.Vector3.distance(e,t);return o*=Math.cos(a)},e.Angle2=function(e,t){var n=e.x*t.x+e.y*t.y+e.z*t.z,i=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),a=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),o=n/(i*a);-1>o&&(o=-1),o>1&&(o=1);var s=180*Math.acos(o)/Math.PI;return s},e}();n["default"]=i},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Enums"),a=e("./GameSetting"),o=e("../../Event/EventMgr"),s=e("../../Event/EventDef"),r=function(e){function t(){var t=e.call(this)||this;return t._goundOffset=a.CameraSetting.GoundOffset,t._fieldOfView=a.CameraSetting.FieldOfView,t._currentOffset=new Laya.Vector3,t._currentrotate=new Laya.Point,t._angleX=-60,t._angleY=-90,t._curViewForward=0,t._needViewForward=a.CameraSetting.FrontBackOffset,t._shakeTime=0,t._height=0,t._changeMoveSpeed=0,t._changeTotlaDistance=0,t._changeCurrentDistance=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite3D",{get:function(){return this.owner},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){o["default"].regEvent_csjc(s.EventDef_csjc.Camera_Event_csjc,this,this.ChangeCameraState)},t.prototype.onDestroy=function(){o["default"].removeEvent_csjc(s.EventDef_csjc.Camera_Event_csjc,this,this.ChangeCameraState)},t.prototype.onLateUpdate=function(){if(this._cameraState==i.CameraState.ChangeingFollowObj){if(this._changeCurrentDistance>this._changeTotlaDistance)return void(this._cameraState=i.CameraState.Normal);this._changeCurrentDistance+=Laya.timer.delta/1e3*this._changeMoveSpeed;var e=new Laya.Vector3,t=this._changeCurrentDistance/this._changeTotlaDistance;return Laya.Vector3.lerp(this._preFollowObj.transform.position,this._followObjSp3D.transform.position,t,e),Laya.Vector3.add(e,this._followObjSp3D.transform.position,this.Sprite3D.transform.position),void(this.Sprite3D.transform.position=this.Sprite3D.transform.position)}if(null!=this._followObjSp3D){var n=Laya.timer.delta/1e3,o=this.RotateCamera(),s=new Laya.Vector3;this._followObjSp3D.transform.getRight(s),Laya.Vector3.scale(s,o.x,s);var r=new Laya.Vector3;this._followObjSp3D.transform.getUp(r),Laya.Vector3.scale(r,o.y,r);var c=new Laya.Vector3;this._followObjSp3D.transform.getForward(c),Laya.Vector3.scale(c,o.z,c);var l=new Laya.Vector3;Laya.Vector3.add(s,r,l),Laya.Vector3.add(l,c,l),l.y+=this._height,l.x-=this._height,l.z-=this._height;var u=new Laya.Vector3,h=new Laya.Vector3;this._cameraState==i.CameraState.RotatedAround?(h=this._followObjSp3D.transform.position,this._curViewForward>0?(this._curViewForward-=n*a.CameraSetting.FrontBackOffsetMoveSpd,this._curViewForward<0&&(this._curViewForward=0)):this._curViewForward<0&&(this._curViewForward+=n*a.CameraSetting.FrontBackOffsetMoveSpd,this._curViewForward>0&&(this._curViewForward=0))):(this._curViewForward<this._needViewForward?(this._curViewForward+=n*a.CameraSetting.FrontBackOffsetMoveSpd,this._curViewForward>this._needViewForward&&(this._curViewForward=this._needViewForward)):this._curViewForward>this._needViewForward&&(this._curViewForward-=n*a.CameraSetting.FrontBackOffsetMoveSpd,this._curViewForward<this._needViewForward&&(this._curViewForward=this._needViewForward)),h=this._followObjSp3D.transform.position),Laya.Vector3.add(l,h,u),this._cameraParent.transform.position=u;var d=new Laya.Vector3;if(this._followObjSp3D.transform.getForward(d),Laya.Vector3.normalize(d,d),Laya.Vector3.scale(d,-1*this._curViewForward,d),Laya.Vector3.add(d,h,d),this._cameraParent.transform.lookAt(d,Laya.Vector3._Up,!1),null!=this._camera&&(this._camera.fieldOfView=this._fieldOfView,this._shakeTime>0)){var p=2*this._shakeTime*Math.PI*a.CameraSetting.ShakeFrequency,_=new Laya.Vector3(Math.sin(p)*a.CameraSetting.ShakeStrength,0,0);this._cameraParent.transform.getRight(_),Laya.Vector3.scale(_,Math.sin(p)*a.CameraSetting.ShakeStrength,_),Laya.Vector3.add(_,this._camera.transform.position,_),this._camera.transform.position=_,this._shakeTime-=Laya.timer.delta/1e3}}},t.prototype.GetOffsetByAngel=function(){var e,t=Laya.Vector3.distance(this._currentOffset,Laya.Vector3._ZERO.clone());return this._cameraState!=i.CameraState.RotatedAround?(this._angleY>180?this._angleY+=Laya.timer.delta/1e3*360:this._angleY>0&&this._angleY<180&&(this._angleY-=Laya.timer.delta/1e3*360),(this._angleY<0||this._angleY>=360)&&(this._angleY=0),e=this.RotateAroundYByAngle(t,this._currentOffset,this._angleY)):(this._angleY+=Laya.timer.delta/1e3*30,this._angleY>360&&(this._angleY=this._angleY-360),e=this.RotateAroundYByAngle(t,this._currentOffset,this._angleY)),e},t.prototype.RotateCamera=function(){var e,t=Laya.Vector3.distance(this._currentOffset,Laya.Vector3._ZERO.clone());return e=this.RotateAroundByAngle(t,this._currentOffset,this._angleX,this._angleY)},t.prototype.RotateAroundYByAngle=function(e,t,n){if(0==n)return t;var i=new Laya.Vector3,a=n/180*Math.PI;return i.x=Math.sin(a)*e,i.y=t.y,i.z=Math.cos(a)*e,i},t.prototype.RotateAroundXByAngle=function(e,t,n){if(0==n)return t;var i=new Laya.Vector3,a=n/180*Math.PI;return i.x=t.x,i.y=Math.sin(a)*e,i.z=Math.cos(a)*e,i},t.prototype.RotateAroundByAngle=function(e,t,n,i){var a=t.clone(),o=n/180*Math.PI,s=i/180*Math.PI;return a.x=Math.sin(o)*Math.cos(s)*e,a.y=Math.cos(o)*e,a.z=Math.sin(o)*Math.sin(s)*e,a},t.prototype.ChangeCameraState=function(e){var t,n=e.SpeedState,a=e.CameraOffset,o=e.CameraRotate,s=e.CameraRotateX,r=e.CameraRotateY,c=e.CameraViewForward,l=e.ShakeTime,u=e.Height;if(l&&(this._shakeTime=Math.max(0,l)),u&&(this._height=Math.max(0,u)),a){var h=Laya.Vector3.distance(this._currentOffset,a),d=h;h>.1&&Laya.Tween.to(this._currentOffset,{x:a.x,y:a.y,z:a.z},Math.min(1e3,1e3*d),Laya.Ease.linearNone,null,0,!0)}if(s&&(this._angleX+=s,this._angleX>-10?this._angleX=-10:this._angleX<-120&&(this._angleX=-120)),o){var h=Math.pow(o.x-this._angleX,2)+Math.pow(o.y-this._angleY,2);h>1&&Laya.Tween.to(this,{_angleX:o.x,_angleY:o.y},1e3,Laya.Ease.linearNone,null,0,!0)}if(r&&(this._angleY+=r),null!=c&&(this._needViewForward=c),n){switch(n){case i.SpeedState.SpeedUp:t=70;break;case i.SpeedState.SpeedDown:t=55;break;case i.SpeedState.Normal:t=60}if(this._speedState!=n&&t&&this._fieldOfView!=t){this._speedState=n;var d=Math.abs(Math.abs(this._fieldOfView)-Math.abs(t))/45*1e3;Laya.Tween.to(this,{_fieldOfView:t},d,Laya.Ease.linearNone,null,0,!0)}}},t.prototype.InitCamera=function(e){this._cameraParent=this.owner,this._camera=this.owner,null!=this._followObjSp3D&&this._cameraState==i.CameraState.ChangeFollowObj?(this._cameraState=i.CameraState.ChangeingFollowObj,this._preFollowObj=this._followObjSp3D,this._followObjSp3D=e,this._changeTotlaDistance=Laya.Vector3.distance(this._preFollowObj.transform.position,this._followObjSp3D.transform.position),this._changeMoveSpeed=this._changeTotlaDistance/a.CameraSetting.ChangeObjTime,this._changeCurrentDistance=0):this._followObjSp3D=e,this._currentOffset=this._goundOffset.clone(),this._cameraParent.transform.position=this._followObjSp3D.transform.position.clone(),this._cameraState=i.CameraState.Normal},t}(Laya.Script3D);n["default"]=r},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"./Enums":38,"./GameSetting":45}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Enums"),a=e("../SceneMgr"),o=e("../../../Event/EventMgr"),s=e("../../../Event/EventDef"),r=e("../../../Mgr/SoundMgr"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._active=!1,t._canUse=!1,t._activeTime=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite3D",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CanUse",{get:function(){return this._canUse},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this._rigidBody3D=this.owner.getComponent(Laya.Rigidbody3D),this._tail=this.owner.getChildByName("Tail"),this._fireEff=this.owner.getChildByName("SmallFires"),this._explore=this.owner.getChildByName("FireExplosion"),this._model=this.owner.getChildByName("Meteor"),this._rigidBody3D.collisionGroup=i.CollisionGroup.Character,this._rigidBody3D.canCollideWith=i.CollisionGroup.None|i.CollisionGroup.Ground|i.CollisionGroup.Obstacle,this._fireEff.active=!1,this._explore.active=!1,this._tail.active=!1},t.prototype.SetFirePos=function(e,t,n){this._targetPos=e,this._active=!0,this._model.active=!0,this.Sprite3D.transform.position=t,this._tail.active=!0,this._fireEff.active=!1,this._pter=n;var i=new Laya.Vector3;Laya.Vector3.subtract(this.Sprite3D.transform.position,e,i),Laya.Vector3.add(this.Sprite3D.transform.position,i,i),this.Sprite3D.transform.lookAt(i,Laya.Vector3._Up)},t.prototype.onUpdate=function(){var e=this;if(null!=this._targetPos&&this._active){var t=new Laya.Vector3;Laya.Vector3.subtract(this._targetPos,this.Sprite3D.transform.position,t),Laya.Vector3.normalize(t,t),Laya.Vector3.scale(t,Laya.timer.delta/1e3*30,t),Laya.Vector3.add(t,this.Sprite3D.transform.position,t),this.Sprite3D.transform.position=t}this._activeTime>0&&(this._activeTime-=Laya.timer.delta,this._activeTime<=0&&(this._active=!1,Laya.timer.once(2e3,this,function(){a["default"].Instance.CameraCtr.InitCamera(e._pter),o["default"].dispatch_csjc(s.EventDef_csjc.Camera_Event_csjc,{CameraOffset:new Laya.Vector3(0,5,5),CameraViewForward:3,CameraRotate:new Laya.Point(-45,-90)})})))},t.prototype.onCollisionEnter=function(e){var t=this;e.other.owner.name.search("Enemy")>-1&&(r["default"].instance_csjc.playSound_csjc("Explore"),this._activeTime=10,this._model.active=!1,this._fireEff.active=!0,this._explore.active=!0,this._tail.active=!1,Laya.timer.once(1e3,this,function(){t._explore.active=!1}))},t}(Laya.Script3D);n["default"]=c},{"../../../Event/EventDef":5,"../../../Event/EventMgr":6,"../../../Mgr/SoundMgr":10,"../Enums":38,"../SceneMgr":47}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Fsm/FSMSystem"),a=e("../FsmStates/TRexState"),o=e("../FsmStates/PterState"),s=e("../SceneMgr"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireSound="subRes/sound/Fire.mp3",t}return __extends(t,e),Object.defineProperty(t.prototype,"FollowObj",{get:function(){return this._followObj},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StateId",{get:function(){return this._fsm.CurrentStateID},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this._tRex=this.owner.getChildByName("TRex"),this._pter=this.owner.getChildByName("PteroShort"),this.MakeFsm()},t.prototype.onUpdate=function(){this._fsm.CurrentState.Act()},t.prototype.MakeFsm=function(){this._fsm=new i["default"](this),this._fsm.AddState(this._tRex.addComponent(a["default"])),this._fsm.AddState(this._pter.addComponent(o["default"]))},t.prototype.PerformTransition=function(e){this._fsm.PerformTransition(e)},t.prototype.Input=function(e){this._fsm.CurrentState.Reason(e)},t.prototype.SetFollowObj=function(e){this._followObj=e,s["default"].Instance.CameraCtr.InitCamera(this._followObj)},t.prototype.FireSound=function(e){Laya.Browser.onMiniGame&&(this._vsound1||(this._vsound1=wx.createInnerAudioContext()),this._curUrl==this._fireSound?(this._vsound1.paused&&this._vsound1.play(),this._vsound1.volume=e):(this._curUrl=this._fireSound,
this._vsound1.stop(),this._vsound1.src=this._fireSound,this._vsound1.loop=!0,this._vsound1.play()))},t.prototype.StopSound=function(){Laya.Browser.onMiniGame&&this._vsound1&&this._vsound1.stop()},t}(Laya.Script3D);n["default"]=r},{"../Fsm/FSMSystem":42,"../FsmStates/PterState":40,"../FsmStates/TRexState":41,"../SceneMgr":47}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Enums"),a=e("../SceneMgr"),o=e("../../../Mgr/SoundMgr"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._timer=-1,t}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite3D",{get:function(){return this.owner},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this._physicsComponent=this.owner.getComponent(Laya.PhysicsComponent),null!=this._physicsComponent&&(this._physicsComponent.collisionGroup=i.CollisionGroup.Obstacle,this._physicsComponent.canCollideWith=i.CollisionGroup.None|i.CollisionGroup.Character)},t.prototype.onUpdate=function(){this._timer>50?this.Sprite3D.active&&(this.Sprite3D.active=!1):this._timer>=0&&(this._timer+=Laya.timer.delta)},t.prototype.onTriggerEnter=function(){o["default"].instance_csjc.playSound_csjc("Broken");var e=a["default"].Instance.ReplaceObj.getChildByName(this.owner.name+"Replace"),t=e.getComponent(Laya.Animator);t.play(null,0,0),e.transform.worldMatrix=this.Sprite3D.transform.worldMatrix,this._timer<0&&(this._timer=0)},t}(Laya.Script3D);n["default"]=s},{"../../../Mgr/SoundMgr":10,"../Enums":38,"../SceneMgr":47}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../SceneMgr"),a=e("../Enums"),o=e("../../../Mgr/SoundMgr"),s=e("../../../Event/EventMgr"),r=e("../../../Event/EventDef"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._timer=0,t._die=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"EnemySprite3D",{get:function(){return this.Sprite3D},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Alive",{get:function(){return!this._die},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Sprite3D",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Player",{get:function(){return i["default"].Instance.Player.FollowObj},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this._animator=this.owner.getChildAt(0).getComponent(Laya.Animator),this._eff=this.owner.getChildAt(1),this._physicsComponent=this.owner.getComponent(Laya.PhysicsComponent),this._physicsComponent.collisionGroup=a.CollisionGroup.Obstacle,this._physicsComponent.canCollideWith=a.CollisionGroup.None|a.CollisionGroup.Ground|a.CollisionGroup.Character},t.prototype.onUpdate=function(){if(!this._die){var e=Laya.Vector3.distance(this.Sprite3D.transform.position,this.Player.transform.position),t=Math.abs(this.Sprite3D.transform.position.y-this.Player.transform.position.y)<=1;.5>=e&&t?this.Attack():7>e&&t?this.ChaseMethod():15>e&&t?this._eff.active&&(this._eff.active=!1):this._animator.play("Goalkeeper Idle")}},t.prototype.ChaseMethod=function(){this._timer<=0?(this.EnemyTrun(),this.EnemyMove(),this._animator.play("Mutant Walking")):this._timer-=Laya.timer.delta},t.prototype.Attack=function(){this._timer=1e3,this.EnemyTrun(),this._animator.play("Standing Melee Attack Downward")},t.prototype.EnemyTrun=function(){var e=new Laya.Vector3;Laya.Vector3.subtract(this.Sprite3D.transform.position,this.Player.transform.position,e),Laya.Vector3.add(this.Sprite3D.transform.position,e,e),this.Sprite3D.transform.lookAt(e,Laya.Vector3._Up)},t.prototype.EnemyMove=function(){var e=new Laya.Vector3;Laya.Vector3.subtract(this.Player.transform.position,this.Sprite3D.transform.position,e),Laya.Vector3.normalize(e,e),Laya.Vector3.scale(e,Laya.timer.delta/1e3*2,e),Laya.Vector3.add(e,this.Sprite3D.transform.position,e),this.Sprite3D.transform.position=e},t.prototype.onCollisionEnter=function(e){this._die||(this._animator.crossFade("Mutant Dying",.1,0),o["default"].instance_csjc.playSound_csjc("Broken"),s["default"].dispatch_csjc(r.EventDef_csjc.EnemyDead),this._die=!0,this._physicsComponent.enabled=!1,this._eff.active=!1)},t}(Laya.Script3D);n["default"]=c},{"../../../Event/EventDef":5,"../../../Event/EventMgr":6,"../../../Mgr/SoundMgr":10,"../Enums":38,"../SceneMgr":47}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../Mgr/SoundMgr"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.SetCharacter=function(e){this._baseState=e},t.prototype.Attack1=function(){i["default"].instance_csjc.playSound_csjc("Attack1")},t.prototype.Attack2=function(){i["default"].instance_csjc.playSound_csjc("Attack2")},t.prototype.Walk=function(){"Walk"==this._baseState.CurrentAni&&i["default"].instance_csjc.playSound_csjc("Step")},t}(Laya.Script3D);n["default"]=a},{"../../../Mgr/SoundMgr":10}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;!function(e){e[e.Normal=1]="Normal",e[e.RotatedAround=2]="RotatedAround",e[e.ChangeFollowObj=3]="ChangeFollowObj",e[e.ChangeingFollowObj=4]="ChangeingFollowObj"}(i=n.CameraState||(n.CameraState={}));var a;!function(e){e[e.Normal=1]="Normal",e[e.SpeedUp=2]="SpeedUp",e[e.SpeedDown=3]="SpeedDown",e[e.SpeedBackward=4]="SpeedBackward"}(a=n.SpeedState||(n.SpeedState={}));var o;!function(e){e.Idle="Idle",e.Paused="Paused",e.GroundMoving="GroundMoving",e.EndSpeed="EndSpeed",e.EndKick="EndKick",e.EndRoll="EndRoll",e.GameOver="GameOver"}(o=n.CharacterState||(n.CharacterState={}));var s;!function(e){e[e.All=-1]="All",e[e.None=0]="None",e[e.Character=Math.pow(2,0)]="Character",e[e.Obstacle=Math.pow(2,1)]="Obstacle",e[e.Ground=Math.pow(2,3)]="Ground"}(s=n.CollisionGroup||(n.CollisionGroup={}));var r;!function(e){e[e.NotOwned=0]="NotOwned",e[e.Owned=1]="Owned",e[e.Seleced=2]="Seleced"}(r=n.SkinState||(n.SkinState={}));var c;!function(e){e[e.GameLoad=0]="GameLoad",e[e.Prepare=1]="Prepare",e[e.Gameing=2]="Gameing",e[e.GameOver=3]="GameOver"}(c=n.GameState||(n.GameState={}));var l;!function(e){e[e.RockerAxis=0]="RockerAxis",e[e.CameraAxis=1]="CameraAxis",e[e.Jump=2]="Jump",e[e.Transform=3]="Transform",e[e.Attack=4]="Attack",e[e.UP=5]="UP",e[e.Down=6]="Down",e[e.Fire=7]="Fire",e[e.FireBall=8]="FireBall"}(l=n.InputType||(n.InputType={}))},{}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Fsm/FsmState"),a=e("../Enums"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rockerInputTimer=0,t._jumpInputTimer=0,t._fireInputTimer=0,t._fireBallInputTimer=0,t._transformInputTimer=0,t._attackInputTimer=0,t._upTimer=0,t._downTimer=0,t._cameraAxis=new Laya.Point,t}return __extends(t,e),Object.defineProperty(t.prototype,"Animator",{get:function(){return this._animator},set:function(e){this._animator=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentAni",{get:function(){return this._currentAni},set:function(e){this._currentAni=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Sprite3D",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Model",{get:function(){return this.owner.getChildAt(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RockerAxis",{get:function(){return this._rockerInputTimer<=0&&(this._rockerAxis=null),this._rockerAxis},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"JumpInput",{get:function(){return this._jumpInputTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FireInput",{get:function(){return this._fireInputTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FireBallInput",{get:function(){return this._fireBallInputTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TransformInput",{get:function(){return this._transformInputTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AttackInput",{get:function(){return this._attackInputTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UpInput",{get:function(){return this._upTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DownInput",{get:function(){return this._downTimer>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CameraAxis",{get:function(){return this._cameraAxis},enumerable:!0,configurable:!0}),t.prototype.Reason=function(e){var t=e;if(t){var n=t.InputType,i=t.Value;switch(n){case a.InputType.RockerAxis:null!=i?(this._rockerAxis=i,this._rockerInputTimer=150):(this._rockerAxis=null,this._rockerInputTimer=0);break;case a.InputType.CameraAxis:this._cameraAxis=i;break;case a.InputType.Jump:this._jumpInputTimer=100;break;case a.InputType.Fire:this._fireInputTimer=100;break;case a.InputType.FireBall:this._fireBallInputTimer=100;break;case a.InputType.Transform:this._transformInputTimer=100;break;case a.InputType.Attack:this._attackInputTimer=100;break;case a.InputType.UP:this._upTimer=100;break;case a.InputType.Down:this._downTimer=100}}},t.prototype.Act=function(e){this._attackInputTimer-=Laya.timer.delta,this._rockerInputTimer-=Laya.timer.delta,this._transformInputTimer-=Laya.timer.delta,this._jumpInputTimer-=Laya.timer.delta,this._fireInputTimer-=Laya.timer.delta,this._fireBallInputTimer-=Laya.timer.delta,this._upTimer-=Laya.timer.delta,this._downTimer-=Laya.timer.delta},t}(i["default"]);n["default"]=o},{"../Enums":38,"../Fsm/FsmState":44}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("./BaseState"),o=e("../../../Event/EventMgr"),s=e("../../../Event/EventDef"),r=e("../Fsm/FsmEnum"),c=e("../Enums"),l=e("../../../Mgr/SoundMgr"),u=e("../SceneMgr");!function(e){e[e.Idle=0]="Idle",e[e.Move=1]="Move",e[e.Transform=2]="Transform",e[e.FireBall=3]="FireBall"}(i||(i={}));var h=function(e){function t(){var t=e.call(this)||this;return t._subState=i.Idle,t.stateID=r.StateID.Pter,t._speedTimer=0,t._cameraTimer=0,t.AddTransition(r.Transition.Pter2TRex,r.StateID.TRex),t}return __extends(t,e),t.prototype.onAwake=function(){this._animator=this.Model.getComponent(Laya.Animator),this._rigidBody3D=this.owner.getComponent(Laya.Rigidbody3D),this._rigidBody3D.isKinematic=!1,this._rigidBody3D.angularFactor=new Laya.Vector3(0,0,0),this._rigidBody3D.collisionGroup=c.CollisionGroup.Character,this._rigidBody3D.canCollideWith=c.CollisionGroup.All^c.CollisionGroup.Character,this._firePos=this.Model.getChildByName("FirePos"),this.StopMove()},t.prototype.DoBeforeEntering=function(e){this.characterCtr.SetFollowObj(this.Model),this._subState=i.Idle,o["default"].dispatch_csjc(s.EventDef_csjc.TransformEvent,[!0]),o["default"].dispatch_csjc(s.EventDef_csjc.Camera_Event_csjc,{CameraOffset:new Laya.Vector3(0,20,10),CameraViewForward:0}),this.SetCameraPos()},t.prototype.DoBeforeLeaving=function(e){this.Animator.play("Idle"),l["default"].instance_csjc.playSound_csjc("Roar1"),this._subState=i.Idle},t.prototype.Act=function(t){switch(e.prototype.Act.call(this,t),this._subState){case i.Idle:this.Idle();break;case i.Move:this.PterMoveMethod();break;case i.Transform:this.PterTrasform2TRex();break;case i.FireBall:this.FireBallMethod()}},t.prototype.PterMoveMethod=function(){if(this.TransformInput)this._subState=i.Transform;else if(this.FireBallInput)this._subState=i.FireBall;else if(0!=this._speedTimer||null!=this.RockerAxis||this.DownInput||this.UpInput){var e=Laya.timer.delta/1e3*10;null!=this.RockerAxis&&0!=this.RockerAxis.y?this._speedTimer+=this.RockerAxis.y*e*2:this._speedTimer>0?(this._speedTimer-=e,this._speedTimer<0&&(this._speedTimer=0)):this._speedTimer<0&&(this._speedTimer+=e,this._speedTimer>0&&(this._speedTimer=0)),this._cameraTimer+=e*Math.abs(this._speedTimer/3),this._cameraTimer>1&&(this.SetCameraPos(),this._cameraTimer=0),this._speedTimer=Math.max(-10,Math.min(10,this._speedTimer)),null!=this.RockerAxis&&0!=this.RockerAxis.x&&(this.Model.transform.localRotationEulerY+=this.RockerAxis.x),"Flying_"!=this.CurrentAni&&(this.CurrentAni="Flying_",this.Animator.crossFade("Flying_",.1),this.Animator.speed=1),this.MoveForward(3*this._speedTimer)}else this._subState=i.Idle},t.prototype.MoveForward=function(e){1==this._rigidBody3D.isKinematic&&(this._rigidBody3D.isKinematic=!1);var t=(3.14*this.Model.transform.localRotationEulerY/180,new Laya.Vector3);this.Model.transform.getForward(t),Laya.Vector3.normalize(t,t),Laya.Vector3.scale(t,Laya.timer.delta/1e3*-e*20,t),console.log(this.Sprite3D.transform.localPositionY),t.y=.15,this.UpInput?t.y=6:this.DownInput&&(t.y=-6),this._rigidBody3D.linearVelocity=t},t.prototype.MoveUpDown=function(){},t.prototype.SetCameraPos=function(){o["default"].dispatch_csjc(s.EventDef_csjc.Camera_Event_csjc,{CameraOffset:new Laya.Vector3(0,5,5),CameraViewForward:3,CameraRotate:new Laya.Point(-45,-90)})},t.prototype.Idle=function(){this.TransformInput?this._subState=i.Transform:this.FireBallInput?this._subState=i.FireBall:null!=this.RockerAxis||this.UpInput||this.DownInput?this._subState=i.Move:"Soaring"!=this.CurrentAni&&(this.CurrentAni="Soaring",this.Animator.speed=1,this.Animator.crossFade("Soaring",.1),this.StopMove())},t.prototype.PterTrasform2TRex=function(){"Idle"!=this.CurrentAni?(this.CurrentAni="Idle",this.Animator.speed=1,this.Animator.play("Idle"),l["default"].instance_csjc.playSound_csjc("Roar2"),this.StopMove()):"Idle"==this.CurrentAni&&this.Animator.getCurrentAnimatorPlayState(0).normalizedTime>=1&&(this.characterCtr.PerformTransition(r.Transition.Pter2TRex),l["default"].instance_csjc.playSound_csjc("Roar1"))},t.prototype.StopMove=function(){0==this._rigidBody3D.isKinematic&&(this._rigidBody3D.isKinematic=!0,this._rigidBody3D.linearVelocity=new Laya.Vector3)},t.prototype.FireBallMethod=function(){if(this.StopMove(),"Fight Idle"!=this.CurrentAni){this.CurrentAni="Fight Idle",this.Animator.speed=1,this.Animator.play("Fight Idle");var e=u["default"].Instance.Bullets[0];null!=u["default"].Instance.CurrLockEnemy&&(l["default"].instance_csjc.playSound_csjc("FireStart"),e.SetFirePos(u["default"].Instance.CurrLockEnemy.transform.position,this._firePos.transform.position,this.Model),Laya.timer.once(500,this,function(){u["default"].Instance.CameraCtr.InitCamera(e.Sprite3D),o["default"].dispatch_csjc(s.EventDef_csjc.Camera_Event_csjc,{CameraOffset:new Laya.Vector3(0,10,10),CameraViewForward:0,CameraRotate:new Laya.Point(-90,-45)})}))}else"Fight Idle"==this.CurrentAni&&this.Animator.getCurrentAnimatorPlayState(0).normalizedTime>=1&&(this._subState=i.Idle)},t}(a["default"]);n["default"]=h},{"../../../Event/EventDef":5,"../../../Event/EventMgr":6,"../../../Mgr/SoundMgr":10,"../Enums":38,"../Fsm/FsmEnum":43,"../SceneMgr":47,"./BaseState":39}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("./BaseState"),o=e("../Fsm/FsmEnum"),s=e("../../../Event/EventMgr"),r=e("../../../Event/EventDef"),c=e("../SceneMgr"),l=e("../../../Mgr/SoundMgr"),u=e("../Enums"),h=e("../Character/MyAnimatorEvent");!function(e){e[e.Idle=0]="Idle",e[e.Move=1]="Move",e[e.Trans2Pter=2]="Trans2Pter",e[e.Attack=3]="Attack",e[e.SpitFire=4]="SpitFire",e[e.Jumping=5]="Jumping",e[e.Falling=6]="Falling",e[e.Eating=7]="Eating"}(i||(i={}));var d=function(e){function t(){var t=e.call(this)||this;return t._subState=i.Idle,t._attackTimer=0,t.stateID=o.StateID.TRex,t._onGround=!0,t._fireTimer=0,t.AddTransition(o.Transition.TRex2Pter,o.StateID.Pter),t}return __extends(t,e),t.prototype.onAwake=function(){this._animator=this.Model.getComponent(Laya.Animator),this._rigidBody3D=this.owner.getComponent(Laya.Rigidbody3D),this._rigidBody3D.angularFactor=new Laya.Vector3(0,0,0),this._rigidBody3D.collisionGroup=u.CollisionGroup.Character,this._rigidBody3D.canCollideWith=u.CollisionGroup.All^u.CollisionGroup.Character,this._fire=this.Model.getChildByName("Flamestrike"),this._fireCol=this._fire.getComponent(Laya.PhysicsComponent),this._fireCol.collisionGroup=u.CollisionGroup.Character,this._fireCol.canCollideWith=u.CollisionGroup.None|u.CollisionGroup.Obstacle,this._fire.active=!1,this._fireCol.enabled=!1;var e=this.Model.addComponent(h["default"]);e.SetCharacter(this),this.SetAttack()},t.prototype.SetAttack=function(){this._attack1=this.Model.getChildByName("Attack1").getComponent(Laya.PhysicsComponent),this._attack1.collisionGroup=u.CollisionGroup.Character,this._attack1.canCollideWith=u.CollisionGroup.All|u.CollisionGroup.Obstacle^u.CollisionGroup.Character,this._attack2=this.Model.getChildByName("Attack2").getComponent(Laya.PhysicsComponent),this._attack2.collisionGroup=u.CollisionGroup.Character,this._attack2.canCollideWith=u.CollisionGroup.All|u.CollisionGroup.Obstacle^u.CollisionGroup.Character},t.prototype.DoBeforeEntering=function(e){this.characterCtr.SetFollowObj(this.Sprite3D),this.Animator.play("End Sleeping"),s["default"].dispatch_csjc(r.EventDef_csjc.TransformEvent,[!1]),s["default"].dispatch_csjc(r.EventDef_csjc.Camera_Event_csjc,{CameraOffset:new Laya.Vector3(0,20,10),CameraViewForward:0})},t.prototype.DoBeforeLeaving=function(e){this._subState=i.Idle,this.characterCtr.StopSound()},t.prototype.Act=function(t){switch(this._onGround=this.OnGroundCheck(),e.prototype.Act.call(this,t),this._subState){case i.Idle:this.IdleMethod();break;case i.Move:this.MoveMethod();break;case i.Attack:this.AttackMethod();break;case i.Trans2Pter:this.Trasform2PterMethod();break;case i.Jumping:this.JumpMethod();break;case i.Falling:this.Falling();break;case i.SpitFire:this.SpitFireMethod();break;case i.Eating:this.EatingMethod()}},t.prototype.AttackMethod=function(){this.StopMove(),this.characterCtr.StopSound(),this._attackTimer-=Laya.timer.delta;var e=0,t=1;null!=this.RockerAxis&&(e=Math.atan2(this.RockerAxis.x,this.RockerAxis.y)/3.14*180+180,t=Math.min(1,Math.max(.7,this.RockerAxis.distance(0,0)))),"Attack Jaw"==this.CurrentAni&&this._attackTimer>600?(this.TurnAndMove(e,5*t),this.EnableAttack()):"Attack Tail"==this.CurrentAni&&this._attackTimer<800&&this._attackTimer>700&&(this.TurnAndMove(e,5*t),this.EnableAttack()),this._attackTimer<=200&&this.AttackInput?"Attack Jaw"==this.CurrentAni?(this._attackTimer=1400,this.Animator.play("Attack Tail"),this.CurrentAni="Attack Tail"):(this._attackTimer=1e3,this.Animator.play("Attack Jaw"),this.CurrentAni="Attack Jaw",l["default"].instance_csjc.playSound_csjc("Attack Jaw")):this._attackTimer<=0&&(this._subState=i.Idle,this.DisableAttack())},t.prototype.JumpMethod=function(){this.characterCtr.StopSound(),"Jumping"!=this.CurrentAni?(this.CurrentAni="Jumping",this.Animator.speed=1,this.Animator.play("Jumping",0,0),l["default"].instance_csjc.playSound_csjc("Land")):"Jumping"==this.CurrentAni&&this.Animator.getCurrentAnimatorPlayState(0).normalizedTime>0&&(this._rigidBody3D.linearVelocity=new Laya.Vector3(0,20,0),this._subState=i.Falling)},t.prototype.Falling=function(){if(this._onGround&&(this._subState=i.Idle,l["default"].instance_csjc.playSound_csjc("Land")),"Looking Up"!=this.CurrentAni&&this._rigidBody3D.linearVelocity.y<0&&(this.CurrentAni="Looking Up",this.Animator.speed=1,this.Animator.crossFade("Looking Up",.5)),null!=this.RockerAxis){var e=Math.atan2(this.RockerAxis.x,this.RockerAxis.y)/3.14*180+180,t=Math.min(1,Math.max(.7,this.RockerAxis.distance(0,0)));this.TurnAndMove(e,2*t)}s["default"].dispatch_csjc(r.EventDef_csjc.CharacterFalling)},t.prototype.IdleMethod=function(){this._onGround?this.FireInput?this._subState=i.SpitFire:this.TransformInput?this._subState=i.Trans2Pter:this.AttackInput?this._subState=i.Attack:null!=this.RockerAxis?this._subState=i.Move:this.JumpInput?this._subState=i.Jumping:("Idle"!=this.CurrentAni&&"Idle"!=this.CurrentAni&&(this.CurrentAni="Idle",this.Animator.speed=1,this.Animator.crossFade("Idle",.1),this.StopMove()),s["default"].dispatch_csjc(r.EventDef_csjc.CharacterNormal)):this._subState=i.Falling},t.prototype.MoveMethod=function(){if(this.TransformInput)this._subState=i.Trans2Pter;else if(this.AttackInput)this._subState=i.Attack;else if(this.JumpInput)this._subState=i.Jumping;else if(null!=this.RockerAxis){var e=Math.atan2(this.RockerAxis.x,this.RockerAxis.y)/3.14*180+180,t=Math.min(1,Math.max(.2,this.RockerAxis.distance(0,0)));"Walk"!=this.CurrentAni?(this.Animator.play("Walk"),this.CurrentAni="Walk"):this.Animator.speed=t,this.TurnAndMove(e,3*t),s["default"].dispatch_csjc(r.EventDef_csjc.CharacterNormal)}else this._subState=i.Idle},t.prototype.Trasform2PterMethod=function(){"Start Sliping"!=this.CurrentAni?(this.CurrentAni="Start Sliping",this.Animator.speed=1,this.Animator.play("Start Sliping",0,0),l["default"].instance_csjc.playSound_csjc("Roar1"),s["default"].dispatch_csjc(r.EventDef_csjc.CharacterFalling)):"Start Sliping"==this.CurrentAni&&this.Animator.getCurrentAnimatorPlayState(0).normalizedTime>=1&&(l["default"].instance_csjc.playSound_csjc("Roar2"),this.characterCtr.PerformTransition(o.Transition.TRex2Pter)),this.StopMove()},t.prototype.StopMove=function(){this._rigidBody3D.linearVelocity=Laya.Vector3._ZERO.clone()},t.prototype.TurnAndMove=function(e,t){this.TurnByCamera(e),this.MoveForward(t)},t.prototype.Turn=function(e){var t=this.Model.transform.localRotationEulerY;Math.abs(t-e)<3||(t>e?t-e>180?t+=3:t-=3:e>t&&(e-t>180?t-=3:t+=3),t%=360,0>t&&(t+=360),this.Model.transform.localRotationEulerY=t)},t.prototype.TurnByCamera=function(e){var t=new Laya.Vector3;Laya.Vector3.subtract(c["default"].Instance.Camera.transform.position,this.Model.transform.position,t),t.y=0;var n=Math.atan2(t.x,t.z)/Math.PI*180+180;e=(e+n)%360;var i=this.Model.transform.localRotationEulerY;Math.abs(i-e)<3||(i>e?i-e>180?i+=3:i-=3:e>i&&(e-i>180?i-=3:i+=3),i%=360,0>i&&(i+=360),this.Model.transform.localRotationEulerY=i)},t.prototype.MoveForward=function(e){var t=3.14*this.Model.transform.localRotationEulerY/180;this._rigidBody3D.linearVelocity=new Laya.Vector3(3*Math.sin(t)*e,this._rigidBody3D.linearVelocity.y,3*Math.cos(t)*e)},t.prototype.EnableAttack=function(){this._attack1.enabled||(this._attack1.enabled=!0),this._attack2.enabled||(this._attack2.enabled=!0)},t.prototype.DisableAttack=function(){this._attack1.enabled&&(this._attack1.enabled=!1),this._attack2.enabled&&(this._attack2.enabled=!1)},t.prototype.OnGroundCheck=function(){var e=new Laya.Vector3(0,5,0),t=new Laya.Vector3(0,-.1,0);Laya.Vector3.add(this.Sprite3D.transform.position,t,t),Laya.Vector3.add(this.Sprite3D.transform.position,e,e);var n=new Laya.HitResult,i=u.CollisionGroup.Character,a=u.CollisionGroup.None|u.CollisionGroup.Ground|u.CollisionGroup.Obstacle,o=c["default"].Instance.CurrentScene.physicsSimulation.raycastFromTo(e,t,n,i,a);return o},t.prototype.SpitFireMethod=function(){var e=this;if(this.FireInput){if(this._fireTimer=300,this.StopMove(),this.characterCtr.FireSound(1),"Roarning"!=this.CurrentAni&&(this.CurrentAni="Roarning",this.Animator.speed=1,this.Animator.play("Roarning",0,0),Laya.timer.once(200,this,function(){e._fire.active=!0,e._fireCol.enabled=!0})),null!=this.RockerAxis){this.Model.transform.localRotationEulerY-=3*this.RockerAxis.x,null!=this._fireCol.colliderShape&&this._fireCol.colliderShape.destroy();var t=new Laya.BoxColliderShape(5,6,30);t.localOffset=new Laya.Vector3(0,-2,15),this._fireCol.colliderShape=t,s["default"].dispatch_csjc(r.EventDef_csjc.CharacterNormal)}}else{if(this._fireTimer>0&&(this._fireTimer-=Laya.timer.delta),this.characterCtr.StopSound(),this._fireTimer>0)return;Laya.timer.once(1e3,this,function(){e.characterCtr.StopSound()}),this._fire.active=!1,this._fireCol.enabled=!1,this.TransformInput?this._subState=i.Trans2Pter:this.AttackInput?this._subState=i.Attack:this.JumpInput?this._subState=i.Jumping:this._subState=i.Idle}},t.prototype.onCollisionEnter=function(e){var t=e.other.owner;t.name.search("Enemy")>-1&&(this._subState=i.Eating,l["default"].instance_csjc.playSound_csjc("Eating"))},t.prototype.EatingMethod=function(){this.characterCtr.StopSound(),"Eating"!=this.CurrentAni?(this.CurrentAni="Eating",this.Animator.speed=1,this.Animator.play("Eating",0,0),s["default"].dispatch_csjc(r.EventDef_csjc.CharacterFalling),this.StopMove()):"Eating"==this.CurrentAni&&this.Animator.getCurrentAnimatorPlayState(0).normalizedTime>=1&&(s["default"].dispatch_csjc(r.EventDef_csjc.CharacterNormal),this._subState=i.Idle)},t.prototype.onDestroy=function(){this.characterCtr.StopSound()},t}(a["default"]);n["default"]=d},{"../../../Event/EventDef":5,"../../../Event/EventMgr":6,"../../../Mgr/SoundMgr":10,"../Character/MyAnimatorEvent":37,"../Enums":38,"../Fsm/FsmEnum":43,"../SceneMgr":47,"./BaseState":39}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./FsmEnum"),a=function(){function e(e){this.characterCtr=e,this.states=new Array}return Object.defineProperty(e.prototype,"CurrentStateID",{get:function(){return this.currentStateID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurrentState",{get:function(){return this.currentState},enumerable:!0,configurable:!0}),e.prototype.AddState=function(e){if(null==e&&console.error("FSM ERROR: Null reference is not allowed"),0==this.states.length)return e.SetCtr(this.characterCtr),this.states.push(e),this.currentState=e,this.currentStateID=e.ID,void this.currentState.DoBeforeEntering();for(var t=0;t<this.states.length;t++){var n=this.states[t];if(n.ID==e.ID)return void console.error("FSM ERROR: Impossible to add state "+e.ID+" because state has already been added")}e.SetCtr(this.characterCtr),this.states.push(e)},e.prototype.DeleteState=function(e){if(e==i.StateID.NullStateID)return void console.error("FSM ERROR: NullStateID is not allowed for a real state");for(var t=0;t<this.states.length;t++){var n=this.states[t];if(n.ID==e)return void this.states.splice(t,1)}console.error("FSM ERROR: Impossible to delete state "+e+". It was not on the list of states")},e.prototype.PerformTransition=function(e){if(e==i.Transition.NullTransition)return void console.error("FSM ERROR: NullTransition is not allowed for a real transition");var t=this.currentState.GetOutputState(e);if(t==i.StateID.NullStateID)return void console.error("FSM ERROR: State "+this.currentStateID+" does not have a target state  for transition "+e);this.currentStateID=t;for(var n=0;n<this.states.length;n++){var a=this.states[n];if(a.ID==this.currentStateID){this.currentState.DoBeforeLeaving(),this.currentState=a,this.currentState.DoBeforeEntering();break}}},e}();n["default"]=a},{"./FsmEnum":43}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i;!function(e){e[e.NullTransition=0]="NullTransition",e[e.TRex2Pter=1]="TRex2Pter",e[e.Pter2TRex=2]="Pter2TRex"}(i=n.Transition||(n.Transition={}));var a;!function(e){e[e.NullStateID=0]="NullStateID",e[e.TRex=1]="TRex",e[e.Pter=2]="Pter"}(a=n.StateID||(n.StateID={}))},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./FsmEnum"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map=new o,t}return __extends(t,e),Object.defineProperty(t.prototype,"ID",{get:function(){return this.stateID},enumerable:!0,configurable:!0}),t.prototype.SetCtr=function(e){this.characterCtr=e},t.prototype.AddTransition=function(e,t){return e==i.Transition.NullTransition?void console.error("FSMState ERROR: NullTransition is not allowed for a real transition"):t==i.StateID.NullStateID?void console.error("FSMState ERROR: NullStateID is not allowed for a real ID"):this.map.ContainsKey(e)?void console.error("FSMState ERROR: State "+this.stateID+" already has transition "+e+"Impossible to assign to another state"):void this.map.Add(e,t)},t.prototype.DeleteTransition=function(e){return e==i.Transition.NullTransition?void console.error("FSMState ERROR: NullTransition is not allowed"):this.map.ContainsKey(e)?void this.map.Remove(e):void console.error("FSMState ERROR: Transition "+e+" passed to "+this.stateID+" was not on the state's transition list")},t.prototype.GetOutputState=function(e){return this.map.ContainsKey(e)?this.map.Get(e):i.StateID.NullStateID},t}(Laya.Script3D);n["default"]=a;var o=function(){function e(){this._obj={}}return e.prototype.ContainsKey=function(e){return null!=this._obj[e]},e.prototype.Add=function(e,t){this._obj[e]=t},e.prototype.Remove=function(e){delete this._obj[e]},e.prototype.Get=function(e){return this._obj[e]},e}()},{"./FsmEnum":43}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.MaxRoadOffset=3.25,e.Difficulty=0,e.RespwanTime=1e3,e}();n.SceneSetting=i;var a=function(){function e(){}return e.GoundOffset=new Laya.Vector3(0,20,10),e.SkinViewOffset=new Laya.Vector3(-4,5,4),e.FieldOfView=60,e.FrontBackOffset=0,e.FrontBackOffsetMoveSpd=10,e.LeftRightMoveSpd=100,e.LeftRightRate=.5,e.ShakeFrequency=10,e.ShakeStrength=.2,e.ChangeObjTime=10,e}();n.CameraSetting=a;var o=function(){function e(){}return e.NormalSpeed=9,e.EndRollerSpeed=25,e.StartPiece=40,e.AccelerateSpeed=.5,e}();n.CharacterSetting=o;var s=function(){function e(){}return e.PieceLength=.25,e.PieceWidth=1.5,e.PieceThickness=.1,e.ActivePiece=45,e.EmptyLoseDis=.7,e.EndRollLoseDis=.6,e.SizeOfPiece=300,e.MaxRadius=8,e.InitialPhase=45,e.Cycles=15,e}();n.SprialRollerConfigure=s},{}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=e("./Enums"),s=function(e){function t(){var t=e.call(this)||this;return t._rocketType=1,t._rocketShow=1,t._moveRadius=100,t.m_isClick=!1,t.keyList=[],t.keyDown=!1,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSprite=this.owner,this._rockerZone=this.owner.parent,this._moveSp=this.owner.getChildByName("Btn"),this._bgSp=this.owner,2==this._rocketShow&&(this._ownerSprite.visible=!1)},t.prototype.onStart=function(){this._originPoint=new Laya.Point(this._ownerSprite.x,this._ownerSprite.y)},t.prototype.onEnable=function(){this._rockerZone.on(Laya.Event.MOUSE_DOWN,this,this.onRokerZoneClickDown),this._moveSp.on(Laya.Event.MOUSE_UP,this,this.onMoveSpClickUp),this._moveSp.x=this._bgSp.width/2,this._moveSp.y=this._bgSp.height/2,Laya.stage.on(Laya.Event.KEY_UP,this,this.onkeyup),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onkeydown)},t.prototype.onDisable=function(){this._rockerZone.off(Laya.Event.MOUSE_DOWN,this,this.onRokerZoneClickDown),this._moveSp.off(Laya.Event.MOUSE_UP,this,this.onMoveSpClickUp),this._rockerZone.off(Laya.Event.MOUSE_MOVE,this,this.onMoveSpClickMove),i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:null}),this._moveSp.x=this._bgSp.width/2,this._moveSp.y=this._bgSp.height/2},t.prototype.onRokerZoneClickDown=function(){if(2==this._rocketType){var e=this._rockerZone.localToGlobal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this._ownerSprite.x=e.x,this._ownerSprite.y=e.y}this._rockerZone.on(Laya.Event.MOUSE_MOVE,this,this.onMoveSpClickMove),this._rockerZone.on(Laya.Event.MOUSE_UP,this,this.onMoveSpClickUp),this._rockerZone.on(Laya.Event.MOUSE_OUT,this,this.onMoveSpClickUp),this.m_isClick=!0,this._ownerSprite.visible=!0},t.prototype.onMoveSpClickUp=function(){this._rockerZone.off(Laya.Event.MOUSE_MOVE,this,this.onMoveSpClickMove),this._rockerZone.off(Laya.Event.MOUSE_UP,this,this.onMoveSpClickUp),this._rockerZone.off(Laya.Event.MOUSE_OUT,this,this.onMoveSpClickUp);var e=this._bgSp.width/2,t=this._bgSp.height/2;Laya.Tween.to(this._moveSp,{x:e,y:t},100,Laya.Ease.linearNone),this._ownerSprite.x=this._originPoint.x,this._ownerSprite.y=this._originPoint.y,this.m_isClick=!1,2==this._rocketShow&&(this._ownerSprite.visible=!1),i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:null})},t.prototype.onMoveSpClickMove=function(){var e=this.owner.parent,t=e.localToGlobal(new Laya.Point(this._bgSp.x,this._bgSp.y),!0),n=Laya.stage.mouseX-t.x,i=Laya.stage.mouseY-t.y,a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),o=0>i?Math.acos(n/a):2*Math.PI-Math.acos(n/a);
180/Math.PI*o;if(a>this._moveRadius){var s=this._moveRadius*n/a+t.x,r=this._moveRadius*i/a+t.y,c=this._bgSp.globalToLocal(new Laya.Point(s,r),!0);this._moveSp.pos(c.x,c.y)}else{var l=this._bgSp.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),!0);this._moveSp.pos(l.x,l.y)}},t.prototype.getRockerVlaue=function(){var e=(this._moveSp.x-this._bgSp.width/2)/this._moveRadius,t=(this._moveSp.y-this._bgSp.height/2)/this._moveRadius,n=new Laya.Point(e,t);return n},t.prototype.onUpdate=function(){this.m_isClick&&i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:this.getRockerVlaue()}),this.keyList.length>0?(this.keyDown=!0,i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:new Laya.Point(0,-1)})):1==this.keyDown&&(this.keyDown=!1,i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:null}))},t.prototype.onkeyup=function(e){for(var t=0;t<this.keyList.length;t++)if(this.keyList[t]==e.keyCode){this.keyList.splice(t,1);break}},t.prototype.onkeydown=function(e){this.keyList.indexOf(e.keyCode)<0&&this.keyList.push(e.keyCode)},t}(Laya.Script);n["default"]=s},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"./Enums":38}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=e("./Character/CharacterCtr"),s=e("./CameraCtr"),r=e("./Enums"),c=e("./Character/DestructibleObj"),l=e("./Character/Enemy"),u=e("../../User/User"),h=e("./Camera2UI"),d=e("./Character/Bullet"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Scole=0,t._enemyList=[],t._enemyAllList=[],t._restTimer=0,t._gamePlaying=!1,t._enemyLocList=[],t._enemyCount=0,t._enemyKillCount=0,t._gameOver=0,t._fireEffects=[],t._bullets=[],t}return __extends(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentScene",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ReplaceObj",{get:function(){return this._replaceObj},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Player",{get:function(){return this._playerCtr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RestTimer",{get:function(){return Math.floor(this._restTimer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EnemyList",{get:function(){return this._enemyList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EnemyLocList",{get:function(){return this._enemyLocList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EnemCount",{get:function(){return this._enemyCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EnemyKillCount",{get:function(){return this._enemyKillCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GameOver",{get:function(){return this._gameOver},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CameraCtr",{get:function(){return this._cameraCtr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FireEffects",{get:function(){return this._fireEffects},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrLockEnemy",{get:function(){return this._currLockEnemy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrLockEnemyPos",{get:function(){return this._currLockEnemyPos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StateId",{get:function(){return this.Player.StateId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Bullets",{get:function(){return this._bullets},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){t._instance=this,i["default"].dispatch_csjc(a.EventDef_csjc.Game_GameSceneLoadCompelete_csjc);var e=this.owner.getChildByName("Player");this.Camera=this.owner.getChildByName("Main Camera"),this._cameraCtr=this.Camera.addComponent(s["default"]),this._playerCtr=e.addComponent(o["default"]),this._restTimer=150,this.InitGameObjects()},t.prototype.onEnable=function(){this.addEvent()},t.prototype.onDisable=function(){this.RemoveEvent()},t.prototype.addEvent=function(){i["default"].regEvent_csjc(a.EventDef_csjc.Game_Input_csjc,this,this.Input_csjc),i["default"].regEvent_csjc(a.EventDef_csjc.EnemyDead,this,this.OnEnemyDead)},t.prototype.RemoveEvent=function(){i["default"].removeEvent_csjc(a.EventDef_csjc.Game_Input_csjc,this,this.Input_csjc),i["default"].removeEvent_csjc(a.EventDef_csjc.EnemyDead,this,this.OnEnemyDead)},t.prototype.OnEnemyDead=function(){this._enemyKillCount++,this._enemyKillCount>=this._enemyCount&&(this._gameOver=1)},t.prototype.PauseGame=function(){this._gamePlaying=!1},t.prototype.StartGame=function(){this._gamePlaying=!0},t.prototype.onUpdate=function(){0==this._gameOver&&this._gamePlaying&&(this._restTimer-=Math.min(50,Laya.timer.delta)/1e3,this._restTimer<=0&&(this._restTimer=0,this._gameOver=-1),this.CaEnemyLoc())},t.prototype.CaEnemyLoc=function(){this._enemyLocList=[];var e=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),t=-1;this._currLockEnemyPos=null,this._currLockEnemy=null;for(var n=0;n<this.EnemyList.length;n++){var i=this.EnemyList[n];if(i.Alive){var a=i.Sprite3D.transform.position.clone();a.y+=2,a=h["default"].WorldToScreen2(this.Camera,a);var o=a.x>.25*Laya.stage.width&&a.x<.75*Laya.stage.width;if(a.z<=0&&o){var s=Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2);(-1==t||t>s)&&(t=s,this._currLockEnemyPos=a,this._currLockEnemy=i.Sprite3D)}var r=Laya.Vector3.distance(this._playerCtr.FollowObj.transform.position,i.Sprite3D.transform.position);this._enemyLocList.push({Postion:a,Distance:r})}}},t.prototype.Input_csjc=function(e){null==e&&console.log("停止输入"),this._playerCtr.Input(e)},t.prototype.InitGameObjects=function(){for(var e=this.owner.getChildByName("Boundary"),t=0;t<e.numChildren;t++){var n=e.getChildAt(t).getComponent(Laya.PhysicsComponent);n&&this.SetGround(n)}for(var i=this.owner.getChildByName("Buildings"),t=0;t<i.numChildren;t++){var a=i.getChildAt(t).getComponent(Laya.PhysicsComponent);a&&this.SetClimb(a)}for(var o=this.owner.getChildByName("RoadObj"),t=0;t<o.numChildren;t++){var s=o.getChildAt(t);null!=s.getComponent(Laya.PhysicsComponent)&&s.addComponent(c["default"])}this._replaceObj=this.owner.getChildByName("ReplaceObj");for(var l=this.owner.getChildByName("FreeObj"),t=0;t<l.numChildren;t++){var h=l.getChildAt(t).getComponent(Laya.PhysicsComponent);h&&(h.collisionGroup=r.CollisionGroup.Obstacle,h.canCollideWith=r.CollisionGroup.None|r.CollisionGroup.Character|r.CollisionGroup.Ground|r.CollisionGroup.Obstacle)}if(this._playerLoc=this.owner.getChildByName("PlayerLoc"),u["default"].getLeveNum_csjc()>1){var t=Math.floor(Math.random()*this._playerLoc.numChildren),p=this._playerLoc.getChildAt(t);this._playerCtr.FollowObj.transform.worldMatrix=p.transform.worldMatrix.clone()}this.CreatEnemy();for(var _=this.owner.getChildByName("BulletList")._children,t=0;t<_.length;t++){var f=_[t];this._bullets.push(f.addComponent(d["default"]))}},t.prototype.CreatEnemy=function(){this._enemyPrefab=this.owner.getChildByName("Enemys").getChildAt(0);var e=this.owner.getChildByName("EnemyAllList"),t=this.owner.getChildByName("EnemyExList");for(this._enemyCount=1,1==u["default"].getLeveNum_csjc()?Math.random()>.5&&(this._enemyCount=2):u["default"].getLeveNum_csjc()>1&&u["default"].getLeveNum_csjc()<3?this._enemyCount=3+Math.floor(3*Math.random()):this._enemyCount=4+Math.floor(3*Math.random());this._enemyList.length<this._enemyCount;){var n=e.getChildAt(Math.floor(Math.random()*e.numChildren)),i=Laya.Sprite3D.instantiate(this._enemyPrefab,this._enemyPrefab.parent);i.transform.worldMatrix=n.transform.worldMatrix;var a=i.addComponent(l["default"]);this._enemyList.push(a)}for(var o=Math.floor(1*Math.random())+1;this._enemyList.length<this._enemyCount+o;){var n=t.getChildAt(Math.floor(Math.random()*t.numChildren)),i=Laya.Sprite3D.instantiate(this._enemyPrefab,this._enemyPrefab.parent);i.transform.worldMatrix=n.transform.worldMatrix;var a=i.addComponent(l["default"]);this._enemyList.push(a)}this._restTimer=60+30*this._enemyList.length,this._enemyPrefab.removeSelf(),this._enemyPrefab.destroy()},t.prototype.SetGround=function(e){e.collisionGroup=r.CollisionGroup.Obstacle,e.canCollideWith=r.CollisionGroup.None|r.CollisionGroup.Character|r.CollisionGroup.Obstacle},t.prototype.SetClimb=function(e){e.collisionGroup=r.CollisionGroup.Ground,e.canCollideWith=r.CollisionGroup.None|r.CollisionGroup.Character|r.CollisionGroup.Obstacle},t}(Laya.Script3D);n["default"]=p},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../../User/User":64,"./Camera2UI":31,"./CameraCtr":32,"./Character/Bullet":33,"./Character/CharacterCtr":34,"./Character/DestructibleObj":35,"./Character/Enemy":36,"./Enums":38}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Mgr/ViewMgr"),a=e("../User/User"),o=e("../Event/EventMgr"),s=e("../Event/EventDef"),r=e("../PlatformApi/WXAPI"),c=e("./GameCore/SceneMgr"),l=e("../Mgr/SoundMgr"),u=e("../TmAPI/TmAPI"),h=function(e){function t(){var n=e.call(this)||this;return n.FirstAd=!1,n.GameLose=0,t._instance=n,n}return __extends(t,e),t.getInstance=function(){return t._instance},t.prototype.onAwake=function(){Laya.Browser.onMiniGame&&(r["default"].SetShareMenu_csjc("","",function(){},function(){},function(){}),Laya.Browser.window.wx.onShow(function(e){console.log("程序返回,参数为"+e+",场景值"+e.scene),(null!=i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.MainGameView)||null!=i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.InGameView))&&l["default"].instance_csjc.playBGM_csjc("Bgm2")})),Laya.SoundManager.useAudioMusic=!1,o["default"].regEvent_csjc(s.EventDef_csjc.AD_OnShareAdFail_csjc,this,this.ADShareFail),o["default"].regEvent_csjc(s.EventDef_csjc.AD_OnShareAdSuccess_csjc,this,this.ShareAdSuccess)},t.prototype.onStart=function(){this.preCreateGame_csjc()},t.prototype.preCreateGame_csjc=function(){o["default"].regOnceEvent_csjc(s.EventDef_csjc.Game_GameSceneLoadCompelete_csjc,this,function(){i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.MainGameView)}),this.CreatGameScene(),this.CreatOpenContext()},Object.defineProperty(t.prototype,"CurrentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentLevel",{get:function(){return a["default"].getLeveNum_csjc()},enumerable:!0,configurable:!0}),t.prototype.CreatNextGameScene=function(){var e=a["default"].getLeveNum_csjc();e++,a["default"].setLeveNum_csjc(e),a["default"].SaveGameData_csjc(),this.CreatGameScene()},t.prototype.CreatGameScene=function(){if(this._currentScene){var e=this._currentScene.getChildByName("Directional Light");e.shadow=!1,this._currentScene.removeSelf(),this._currentScene.destroy()}var t="",n="1";t="subRes/LayaScene_1/Conventional/"+n+".ls",Laya.Scene3D.load(t,Laya.Handler.create(this,this.LoadComplete))},t.prototype.LoadComplete=function(e){this._currentScene=e,Laya.stage.addChildAt(this._currentScene,0),this._currentScene.addComponent(c["default"]),o["default"].dispatch_csjc(s.EventDef_csjc.Game_OnLevelStart_csjc)},t.prototype.ADShareFail=function(){console.log("AdShareFail")},t.prototype.CreatOpenContext=function(){this._my_open=new Laya.WXOpenDataViewer,this._my_open.width=Laya.stage.width,this._my_open.height=Laya.stage.height},Object.defineProperty(t.prototype,"Context",{get:function(){return this._my_open},enumerable:!0,configurable:!0}),t.prototype.ShareAdSuccess=function(e){i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.MainGameView)?u["default"].SendEvent("ExportAd",{View:1,Style:e}):i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.InGameView)?u["default"].SendEvent("ExportAd",{View:2,Style:e}):i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.HExport1AdView)?u["default"].SendEvent("ExportAd",{View:3,Style:e}):i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.GameOverWinView)||i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.GameOverFailView)?u["default"].SendEvent("ExportAd",{View:4,Style:e}):i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.FriendExportView)?u["default"].SendEvent("ExportAd",{View:5,Style:e}):i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.HExport2AdView)&&u["default"].SendEvent("ExportAd",{View:6,Style:e})},t._instance=null,t}(Laya.Script);n["default"]=h},{"../Event/EventDef":5,"../Event/EventMgr":6,"../Mgr/SoundMgr":10,"../Mgr/ViewMgr":12,"../PlatformApi/WXAPI":20,"../TmAPI/TmAPI":62,"../User/User":64,"./GameCore/SceneMgr":47}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=e("../GameCore/Enums"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._left=!1,t._right=!1,t._front=!1,t._back=!1,t._up=!1,t._down=!1,t._fire=!1,t}return __extends(t,e),t.prototype.onAwake=function(){this._tRexPanle=this.owner.getChildByName("TRexPanel"),this._pterPanel=this.owner.getChildByName("PterPanel"),this._RTransBtn=this._tRexPanle.getChildByName("TransBtn"),this._attackBtn=this._tRexPanle.getChildByName("AttackBtn"),this._jumpBtn=this._tRexPanle.getChildByName("JumpBtn"),this._fireBtn=this._tRexPanle.getChildByName("FireBtn"),this._frontBtn=this._pterPanel.getChildByName("FrontBtn"),this._backBtn=this._pterPanel.getChildByName("BackBtn"),this._rightBtn=this._pterPanel.getChildByName("RightBtn"),this._leftBtn=this._pterPanel.getChildByName("LeftBtn"),this._upBtn=this._pterPanel.getChildByName("UpBtn"),this._downBtn=this._pterPanel.getChildByName("DownBtn"),this._CTransBtn=this._pterPanel.getChildByName("TransBtn"),this._fireBallBtn=this._pterPanel.getChildByName("FireBallBtn"),this.TransformPanle(!1)},t.prototype.onEnable=function(){this.addEvent()},t.prototype.onDisable=function(){this.removeEvent()},t.prototype.onUpdate=function(){if(this._pterPanel.visible){var e=new Laya.Point(0,0);this._left?e.x=1:this._right?e.x=-1:e.x=0,this._front?e.y=1:this._back?e.y=-1:e.y=0,0==e.x&&0==e.y?i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:null}):i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.RockerAxis,Value:e}),this._up?i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.UP}):this._down&&i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.Down})}else this._tRexPanle.visible&&this._fire&&i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.Fire})},t.prototype.addEvent=function(){this._RTransBtn.on(Laya.Event.CLICK,this,this.OnTransBtn),this._CTransBtn.on(Laya.Event.CLICK,this,this.OnTransBtn),this._attackBtn.on(Laya.Event.CLICK,this,this.OnAttackBtn),this._jumpBtn.on(Laya.Event.CLICK,this,this.OnJumpBtn),this._fireBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnFireBtn,[!0]),this._fireBtn.on(Laya.Event.MOUSE_UP,this,this.OnFireBtn,[!1]),this._frontBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnFront,[!0]),this._frontBtn.on(Laya.Event.MOUSE_UP,this,this.OnFront,[!1]),this._backBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnBack,[!0]),this._backBtn.on(Laya.Event.MOUSE_UP,this,this.OnBack,[!1]),this._leftBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnLeft,[!0]),this._leftBtn.on(Laya.Event.MOUSE_UP,this,this.OnLeft,[!1]),this._rightBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnRight,[!0]),this._rightBtn.on(Laya.Event.MOUSE_UP,this,this.OnRight,[!1]),this._upBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnUp,[!0]),this._upBtn.on(Laya.Event.MOUSE_UP,this,this.OnUp,[!1]),this._downBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnDown,[!0]),this._downBtn.on(Laya.Event.MOUSE_UP,this,this.OnDown,[!1]),this._fireBallBtn.on(Laya.Event.MOUSE_DOWN,this,this.OnFireBallBtn),i["default"].regEvent_csjc(a.EventDef_csjc.TransformEvent,this,this.TransformPanle),i["default"].regEvent_csjc(a.EventDef_csjc.CharacterFalling,this,this.Falling),i["default"].regEvent_csjc(a.EventDef_csjc.CharacterClimbing,this,this.Climbing),i["default"].regEvent_csjc(a.EventDef_csjc.CharacterNormal,this,this.Normal)},t.prototype.removeEvent=function(){i["default"].removeEvent_csjc(a.EventDef_csjc.TransformEvent,this,this.TransformPanle),i["default"].removeEvent_csjc(a.EventDef_csjc.CharacterFalling,this,this.Falling),i["default"].removeEvent_csjc(a.EventDef_csjc.CharacterClimbing,this,this.Climbing),i["default"].removeEvent_csjc(a.EventDef_csjc.CharacterNormal,this,this.Normal)},t.prototype.TransformPanle=function(e){e?(this._pterPanel.visible=!0,this._tRexPanle.visible=!1):(this._pterPanel.visible=!1,this._tRexPanle.visible=!0,this.Normal())},t.prototype.OnTransBtn=function(){i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.Transform})},t.prototype.OnAttackBtn=function(){i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.Attack})},t.prototype.OnJumpBtn=function(){i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.Jump})},t.prototype.OnFireBtn=function(e){this._fire=e},t.prototype.OnFireBallBtn=function(e){i["default"].dispatch_csjc(a.EventDef_csjc.Game_Input_csjc,{InputType:o.InputType.FireBall})},t.prototype.OnFront=function(e){this._front=e,e&&(this._back=!1)},t.prototype.OnBack=function(e){this._back=e,e&&(this._front=!1)},t.prototype.OnLeft=function(e){this._left=e,e&&(this._right=!1)},t.prototype.OnRight=function(e){this._right=e,e&&(this._left=!1)},t.prototype.OnUp=function(e){this._up=e,e&&(this._down=!1)},t.prototype.OnDown=function(e){this._down=e,e&&(this._up=!1)},t.prototype.Falling=function(){this._attackBtn.gray||(this._attackBtn.gray=!0),this._RTransBtn.gray||(this._RTransBtn.gray=!0),this._jumpBtn.gray||(this._jumpBtn.gray=!0),this._fireBtn.gray||(this._fireBtn.gray=!0)},t.prototype.Climbing=function(){this._attackBtn.gray||(this._attackBtn.gray=!0),this._RTransBtn.gray||(this._RTransBtn.gray=!0),this._fireBtn.gray||(this._fireBtn.gray=!0),this._jumpBtn.gray&&(this._jumpBtn.gray=!1)},t.prototype.Normal=function(){this._attackBtn.gray&&(this._attackBtn.gray=!1),this._RTransBtn.gray&&(this._RTransBtn.gray=!1),this._jumpBtn.gray&&(this._jumpBtn.gray=!1),this._fireBtn.gray&&(this._fireBtn.gray=!1)},t}(Laya.Script);n["default"]=s},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../GameCore/Enums":38}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=e("../../Mgr/SoundMgr"),s=e("../../User/User"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._coinGetList=[],t._effectCount=0,t._effectTimer=-1,t._goldList=[],t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._coin_Sp=this.owner.getChildByName("CoinSp"),this._coinCount_FontClip=this.owner.getChildByName("CoinCount_FontClip"),this._coinCount_FontClip.value=s["default"].getMoney_csjc().toString(),this._originalScale=this._coinCount_FontClip.scaleX},t.prototype.onStart=function(){this.InitGetCointList()},t.prototype.InitGetCointList=function(){for(var e=this,t=function(t){var i=new Laya.Sprite;i.loadImage("subRes/image/coin.png",Laya.Handler.create(n,function(){Laya.stage.addChild(i),e._coinGetList.push(i),i.visible=!1,i.x=0,i.y=0}))},n=this,i=0;10>i;i++)t(i);for(var a=0;4>a;a++){var o=new Laya.Text;o.text="1000",o.width=120,o.height=40,o.pivotX=60,o.pivotY=20,o.align="center",o.valign="middle",o.font="Microsoft YaHei",o.fontSize=30,o.bold=!0,o.color="#FFFFFF",o.strokeColor="#000000",o.stroke=4,o.visible=!1,this._ownerSp.addChild(o),this._goldList.push(o)}},t.prototype.onEnable=function(){i["default"].regEvent_csjc(a.EventDef_csjc.Game_OnUserMoneyChange_csjc,this,this.CoinChange)},t.prototype.onDestroy=function(){i["default"].removeEvent_csjc(a.EventDef_csjc.Game_OnUserMoneyChange_csjc,this,this.CoinChange)},t.prototype.onUpdate=function(){if(this._effectTimer>=0){this._effectTimer+=Laya.timer.delta/1e3;var e=1440*this._effectTimer,t=e*Math.PI/180,n=this._originalScale+.05*Math.sin(t);this._coinCount_FontClip.scaleX=n,this._coinCount_FontClip.scaleY=n;var i=parseInt(this._coinCount_FontClip.value),a=s["default"].getMoney_csjc()-i,o=(360-e)/360*1e3;o=a/o*Laya.timer.delta,this._coinCount_FontClip.value=(i+Math.floor(o)).toString(),e>360&&(this._effectTimer=-1,this._coinCount_FontClip.value=s["default"].getMoney_csjc().toString())}},t.prototype.CoinChange=function(e){if(null!=e)if(e.curr>e.last)if(e.getLoc){var t=e.curr-e.last;25>=t?this._effectCount=1:50>=t?this._effectCount=3:200>=t?this._effectCount=5:400>=t?this._effectCount=7:this._effectCount=10,this._getLoc=e.getLoc,this.GetCoinStep1(t)}else this._effectTimer=0;else e.curr<e.last&&(o["default"].instance_csjc.playSound_csjc("gold2"),this._effectTimer=0)},t.prototype.GetGoldCount=function(e){var t=this;if(!(this._goldList.length<=0)){var n=this._goldList.pop(),i=this._ownerSp.globalToLocal(this._getLoc,!0);n.x=i.x,n.y=i.y,n.fontSize=40,n.bold=!0,n.color="#FFFFFF",n.strokeColor="#000000",n.stroke=4,n.text="获得金币"+e,n.visible=!0,Laya.timer.once(500,this,function(){n.visible=!1,t._goldList.push(n)})}},t.prototype.GetCoinStep1=function(e){for(var t=this,n=this._ownerSp.globalToLocal(this._getLoc,!0),i=function(e){if(a._coinGetList.length<=0)return"break";var i=a._coinGetList.pop();i.x=n.x,i.y=n.y,i.visible=!0,i.zOrder=i.parent.numChildren-1;var s=(n.x+300*Math.random()-150,n.y+300*Math.random()-150,a._ownerSp.localToGlobal(new Laya.Point(a._coin_Sp.x,a._coin_Sp.y)));Laya.Tween.to(i,{x:s.x,y:s.y},500,null,Laya.Handler.create(i,function(){o["default"].instance_csjc.playSound_csjc("gold2"),t._effectTimer=0,i.visible=!1,t._coinGetList.push(i)}),200+50*e)},a=this,s=0;s<this._effectCount;s++){var r=i(s);if("break"===r)break}},t.prototype.GetCoinStep2=function(e){for(var t=this,n=(this._ownerSp.globalToLocal(this._getLoc),new Laya.Point(this._coin_Sp.x,this._coin_Sp.y)),i=function(e){var i=a._coinGetList[e];Laya.Tween.to(i,{x:n.x,y:n.y},500,null,Laya.Handler.create(i,function(){o["default"].instance_csjc.playSound_csjc("gold2"),t._effectTimer=0,i.visible=!1,t._coinGetList.push(i)}),50*e)},a=this,s=0;s<this._effectCount;s++)i(s)},t}(Laya.Script);n["default"]=r},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../../Mgr/SoundMgr":10,"../../User/User":64}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onMouseDown=function(){this._isMouseDown=!0,this._lastX=null,this._lastY=null},t.prototype.onMouseOut=function(){this._isMouseDown=!1,this._lastX=null,this._lastY=null},t.prototype.onMouseUp=function(){this._isMouseDown=!1,this._lastX=null,this._lastY=null},t.prototype.onMouseMove=function(){if(this._isMouseDown){if(null==this._lastX)this._lastX=Laya.stage.mouseX;else{var e=Laya.stage.mouseX-this._lastX;i["default"].dispatch_csjc(a.EventDef_csjc.Camera_Event_csjc,{CameraRotateY:.3*-e}),this._lastX=Laya.stage.mouseX}if(null==this._lastY)this._lastY=Laya.stage.mouseY;else{var t=Laya.stage.mouseY-this._lastY;i["default"].dispatch_csjc(a.EventDef_csjc.Camera_Event_csjc,{CameraRotateX:.3*t}),this._lastY=Laya.stage.mouseY}}},t}(Laya.Script);n["default"]=o},{"../../Event/EventDef":5,"../../Event/EventMgr":6}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../CommomAPI/ExamineMgr"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){this._owner=this.owner},t.prototype.onStart=function(){i["default"].CanDoScz_Wx||(this._owner.visible=!1)},t}(Laya.Script);n["default"]=a},{"../../CommomAPI/ExamineMgr":2}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../GameCore/SceneMgr"),a=e("../../Event/EventMgr"),o=e("../../Event/EventDef"),s=e("../GameCore/Fsm/FsmEnum"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._enemyList=[],t._testList=[],t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._gameTimer=this.owner.getChildByName("GameTimer"),this._enemyDead=this.owner.getChildByName("EnemyDead"),this._enemyCount=this.owner.getChildByName("EnemyCount"),this._lock=this.owner.getChildByName("Lock"),this._enemyDead.visible=!1,this.InitGetCointList()},t.prototype.onEnable=function(){a["default"].regEvent_csjc(o.EventDef_csjc.EnemyDead,this,this.EnemyDeadEvent),a["default"].regEvent_csjc(o.EventDef_csjc.EnemyLock,this,this.EnemyDeadEvent)},t.prototype.onDestroy=function(){a["default"].removeEvent_csjc(o.EventDef_csjc.EnemyDead,this,this.EnemyDeadEvent),a["default"].removeEvent_csjc(o.EventDef_csjc.EnemyLock,this,this.EnemyDeadEvent)},t.prototype.InitGetCointList=function(){for(var e=this,t=function(t){var i=new Laya.Sprite;i.loadImage("subRes/image/biaoji.png",Laya.Handler.create(n,function(){e._ownerSp.addChild(i),e._enemyList.push(i),i.visible=!1,i.x=0,i.y=0,i.pivotX=25,i.pivotY=25}))},n=this,i=0;10>i;i++)t(i);for(var a=0;4>a;a++){var o=new Laya.Text;o.text="1000",o.width=120,o.height=40,o.pivotX=60,o.pivotY=20,o.align="center",o.valign="middle",o.font="Microsoft YaHei",o.fontSize=30,o.bold=!0,o.color="#FFFFFF",o.strokeColor="#000000",o.stroke=4,o.visible=!1,this._ownerSp.addChild(o),this._testList.push(o)}},t.prototype.onUpdate=function(){for(var e=i["default"].Instance.EnemyLocList,t=0;t<this._enemyList.length;t++){var n=this._enemyList[t],a=e[t];if(null==a||i["default"].Instance.Player.StateId==s.StateID.Pter&&a.Postion==i["default"].Instance.CurrLockEnemyPos)n.visible&&(n.visible=!1);else{var o=new Laya.Point,r=a.Postion,c=a.Distance;r.z>0?o.setTo(Laya.stage.width/2,Laya.stage.height):o.setTo(r.x,r.y),o.x<0?o.x=0:o.x>Laya.stage.width&&(o.x=Laya.stage.width),this._ownerSp.globalToLocal(o),n.x=o.x,n.y=o.y,n.visible||(n.visible=!0),n.scaleX=Math.min(1,Math.max(.7,c/50)),n.scaleY=n.scaleX}}var l=i["default"].Instance.RestTimer,u=Math.floor(l/60),h=l%60,d="",p="";if(d=10>u?"0"+u:u.toString(),p=10>h?"0"+h:h.toString(),this._gameTimer.value=d+":"+p,this._enemyCount.value=i["default"].Instance.EnemyKillCount+"/"+i["default"].Instance.EnemCount,null!=i["default"].Instance.CurrLockEnemyPos&&i["default"].Instance.Player.StateId==s.StateID.Pter){this._lock.visible||(this._lock.visible=!0);var o=new Laya.Point;o.setTo(i["default"].Instance.CurrLockEnemyPos.x,i["default"].Instance.CurrLockEnemyPos.y),this._ownerSp.globalToLocal(o),this._lock.x=o.x,this._lock.y=o.y}else this._lock.visible&&(this._lock.visible=!1)},t.prototype.EnemyDeadEvent=function(){var e=this;Laya.timer.once(500,this,function(){e._enemyDead.visible=!0}),Laya.timer.once(2e3,this,function(){e._enemyDead.visible=!1})},t.prototype.EnemyLock=function(e){},t}(Laya.Script);n["default"]=r},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../GameCore/Fsm/FsmEnum":43,"../GameCore/SceneMgr":47}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../View/ViewBase"),a=e("../../Mgr/ViewMgr"),o=e("../../PlatformApi/CachedWXBannerAd"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._needShowAni=!0,t._countTimer=0,t._progressWidth_csjc=0,t._clickTime_csjc=0,t._totalClickTime_csjc=0,t._totalClickTimer_csjc=30,t._needClickTime_csjc=15,t._bannerClickTime_csjc=Math.floor(5*Math.random())+2,t._bannerClicked_csjc=!1,t.onOpenEvent=function(){o["default"].hide_csjc()},t.onCloseEvent=function(){a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.InGameView),o["default"].hide_csjc()},t}return __extends(t,e),t.prototype.onAwake=function(){this._treasure_csjc=this.owner.getChildByName("Treasure"),this._progress_csjc=this.owner.getChildByName("Progress"),this._progressBar_csjc=this._progress_csjc.getChildByName("Bar"),this._progressWidth_csjc=this._progressBar_csjc.width,this._progressBar_csjc.width=0,this._clickBtn_csjc=this.owner.getChildByName("ClickBtn")},t.prototype.onUpdate=function(){if(this._needShowAni){this._countTimer+=Laya.timer.delta/1e3;var e=3.14*this._countTimer/180*720;this._treasure_csjc.rotation=15*Math.sin(e);var t=this._clickTime_csjc/this._needClickTime_csjc,n=2+2*t;this._progressBar_csjc.width>=n&&(this._progressBar_csjc.width-=n),this._progressBar_csjc.width/this._progressWidth_csjc+.1<t&&this._clickTime_csjc--}else this._treasure_csjc.rotation=0},t.prototype.addEvent=function(){this._clickBtn_csjc.on(Laya.Event.CLICK,this,this.OnClickBtn)},t.prototype.OnClickBtn=function(){var e=this;if(this._totalClickTime_csjc++,this._clickTime_csjc++,this._clickTime_csjc>this._needClickTime_csjc&&(this._clickTime_csjc=this._needClickTime_csjc),this._clickTime_csjc>=this._bannerClickTime_csjc){if(this._clickTime_csjc>=this._needClickTime_csjc&&(this._clickTime_csjc=this._needClickTime_csjc-1),this._bannerClicked_csjc){var t=this._clickTime_csjc/this._needClickTime_csjc;return void(this._progressBar_csjc.width=t*this._progressWidth_csjc)}this._bannerClicked_csjc=!0,this.ShowBanner(),Laya.timer.once(1500,this,function(){e.BannerClicked()})}else this._totalClickTime_csjc>this._totalClickTimer_csjc&&(this.ShowBanner(),this.BannerClicked());var n=this._clickTime_csjc/this._needClickTime_csjc;this._progressBar_csjc.width=n*this._progressWidth_csjc},t.prototype.BannerClicked=function(){this._needShowAni=!1,this._bannerClicked_csjc=!0,this._clickTime_csjc=this._needClickTime_csjc,this._progressBar_csjc.width=this._progressWidth_csjc,this._clickBtn_csjc.visible=!1,this.closeView()},t.prototype.ShowBanner=function(){o["default"].changeShow_csjc(1)},t}(i["default"]);n["default"]=s},{"../../Mgr/ViewMgr":12,"../../PlatformApi/CachedWXBannerAd":17,"../../View/ViewBase":86}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../View/ViewBase"),a=e("../GameCore/SceneMgr"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._index=0,t.onCloseEvent=function(){a["default"].Instance.StartGame()},t}return __extends(t,e),t.prototype.onAwake=function(){this._skipBtn=this.owner.getChildByName("SkipBtn"),this._display=this.owner.getChildByName("Tutorial").getChildByName("Display"),this._nextBtn=this.owner.getChildByName("NextBtn"),this._display.skin="subRes/image/0.jpg"},t.prototype.OnSkipBtn=function(){this.closeView()},t.prototype.addEvent=function(){this._skipBtn.on(Laya.Event.CLICK,this,this.OnSkipBtn),this._nextBtn.on(Laya.Event.CLICK,this,this.OnNextBtn)},t.prototype.OnNextBtn=function(){this._index++,this._index>2&&(this._index=0),this._display.skin="subRes/image/"+this._index+".jpg"},t}(i["default"]);n["default"]=o},{"../../View/ViewBase":86,"../GameCore/SceneMgr":47}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TmAPI"),a=e("../TmAppConfig"),o=e("../../Event/EventMgr"),s=e("../../Event/EventDef"),r=e("../../PlatformApi/WXAPI"),c=function(e){function t(){var t=e.call(this)||this;return t.AdLocationID=i["default"].BannerAdLocationId,t.RefreshTime=10,t._data=null,t._positionId=0,t._creativeId=0,t._appId="",t._wxBanner=null,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner},t.prototype.onDisable=function(){this.clearBannerWx()},t.prototype.refreshAd=function(){a["default"].CurrentConfig.wxBanner&&(Laya.Browser.onMiniGame||Laya.Browser.onQQMiniGame)?(console.log("Banner组件显示BannerWx"),this.refreshBannerWx()):(console.log("Banner组件显示BannerAd"),this.refreshBannerAd())},t.prototype.refreshBannerAd=function(){var e=this;i["default"].TryGetAdvs(this.AdLocationID,function(t){return null==t||null==t.IsOpen||t.IsOpen?null==t||11!=t.type?void console.log("广告位：",e.AdLocationID," 数据位空或者类型错误"):void(e.owner&&!e.owner.destroyed&&(e._data=t.creatives[0],e._creativeId=e._data.creativeId,
e._positionId=e._data.positionId,e._appId=t.appId,Laya.loader.load(e._data.show_config.image,Laya.Handler.create(e,function(){e._ownerSp.loadImage(e._data.show_config.image),Laya.timer.once(1e3*e.RefreshTime,e,e.refreshBannerAd)})))):(console.log("广告位：",e.AdLocationID," 状态为关闭,隐藏控件"),void(e._ownerSp.visible=!1))})},t.prototype.onClick=function(){this._data&&(console.log("跳转游戏： "+this._appId),i["default"].NavigateAndReport(this._positionId,this._creativeId,this._appId,function(e,t){e||o["default"].dispatch_csjc(s.EventDef_csjc.AD_OnShareAdFail_csjc)}))},t.prototype.refreshBannerWx=function(){var e=this;if(Laya.Browser.onMiniGame&&this.owner.visible){this.clearBannerWx();var t=this,n=Laya.Browser.window.wx.getSystemInfoSync(),i=n.screenWidth,a=n.screenHeight,o=this._ownerSp.localToGlobal(new Laya.Point(0,0)),s=o.x/Laya.stage.width*i,c=o.y/Laya.stage.height*a,l=this.WXBannerWidth?this.WXBannerWidth/Laya.stage.width*i:i;this._wxBanner=Laya.Browser.window.wx.createBannerAd({adUnitId:r["default"].bannerAdUnitId_csjc,adIntervals:30,style:{left:s,top:c,width:l}}),t._wxBanner.onLoad(function(e){console.log("WXBanner广告 加载完成"),console.log(e)}),this._wxBanner.onError(function(t){console.log("WXBanner广告 加载失败"),console.log(t),e.refreshBannerAd(),e.clearBannerWx()}),this._wxBanner.onResize(function(e){console.log(t._wxBanner.style.realWidth,t._wxBanner.style.realHeight)}),t._wxBanner.show()}},t.prototype.clearBannerWx=function(){this._wxBanner&&this._wxBanner.destroy(),this._wxBanner=null,Laya.timer.clear(this,this.refreshBannerAd)},t.prototype.onViewShow=function(){this.refreshAd()},t.prototype.onViewHide=function(){this.clearBannerWx()},t}(Laya.Script);n["default"]=c},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../../PlatformApi/WXAPI":20,"../TmAPI":62,"../TmAppConfig":63}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=e("../TmAPI"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._data=null,t._fontSize=25,t._positionId=0,t._creativeId=0,t._appId="",t}return __extends(t,e),t.prototype.onAwake=function(){this._displaySp=this.owner.getChildByName("Display"),this._disText=this.owner.getChildByName("TitleText"),this._disText.text="",this._fontSize=this._disText.fontSize},t.prototype.setData=function(e,t){if(e){this._creativeId=e.creativeId,this._positionId=e.positionId,this._appId=e.appId,this._displaySp.loadImage(e.show_config.image,Laya.Handler.create(this,function(){}));var n=String(e.show_config.title);this._disText.text=n,this._data=e}this._parentAdView=t},t.prototype.onClick=function(){var e=this;this._data&&(console.log("跳转游戏： "+this._appId),o["default"].NavigateAndReport(this._positionId,this._creativeId,this._appId,function(t,n){t?e._parentAdView.event("AdRefresh"):i["default"].dispatch_csjc(a.EventDef_csjc.AD_OnShareAdFail_csjc)}))},t}(Laya.Script);n["default"]=s},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../TmAPI":62}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./TmListAdBox"),a=e("../TmAPI"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ScrollDirection="Horizontal",t.AdLocationID=a["default"].ListIcoAdLocationId,t.ScrollSpeed=100,t._scrollForward=!0,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._list=this.owner.getChildByName("List"),this._list.elasticEnabled=!0,this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),"Horizontal"==this.ScrollDirection?this._list.hScrollBarSkin="":this._list.vScrollBarSkin="",this.owner.on("AdRefresh",this,this.RefreshAdList)},t.prototype.onEnable=function(){this.RefreshAdList()},t.prototype.RefreshAdList=function(){var e=this;a["default"].TryGetAdvs(this.AdLocationID,function(t){if(null!=t&&null!=t.IsOpen&&!t.IsOpen)return console.log("广告位：",e.AdLocationID," 状态为关闭,隐藏控件"),void(e._ownerSp.visible=!1);if(null==t||7!=t.type)return console.log("广告位：",e.AdLocationID," 数据位空或者类型错误"),void(e._list.array=null);if(e.owner&&!e.owner.destroyed){var n=t.creatives;e._list.array=n}})},t.prototype.onUpdate=function(){var e=this.ScrollSpeed*Laya.timer.delta/1e3;this._list.scrollBar.value+=e,this._list.scrollBar.value>=this._list.scrollBar.max?this._list.scrollBar.value=0:this._list.scrollBar.value<0&&(this._list.scrollBar.value=this._list.scrollBar.max)},t.prototype.onListRender=function(e,t){var n=this._list.array[t],a=e.getComponent(i["default"]);a.setData(n,this.owner)},t}(Laya.Script);n["default"]=o},{"../TmAPI":62,"./TmListAdBox":57}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TmAPI"),a=e("./TmListAdBox"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdLocationID=i["default"].ListIcoAdLocationId,t.ShakeTime=1e3,t.ChaneAdTime=6e3,t.RotaAngel=10,t.Scale=.1,t._shakeTimer=0,t._changeAdTimer=0,t._shakeIndex=0,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._cells=this._list.cells},t.prototype.onEnable=function(){this.RefreshAdList()},t.prototype.onUpdate=function(){if(this._changeAdTimer<=this.ChaneAdTime&&(this._changeAdTimer+=Laya.timer.delta),this._shakeTimer<=this.ShakeTime){this._shakeTimer+=Laya.timer.delta;var e=this._cells[this._shakeIndex],t=this._shakeTimer/this.ShakeTime,n=0;n=t>=0&&.2>t?t/.2:t>=.2&&.4>t?1-(t-.2)/.2:t>=.4&&.6>t?-1*((t-.4)/.2):t>=.6&&.8>t?-1+(t-.6)/.2:0,e.rotation=n*this.RotaAngel,e.scaleX=1-n*this.Scale,e.scaleY=e.scaleX}else this._shakeTimer=0,this._shakeIndex++,this._shakeIndex>this._cells.length-1&&(this._shakeIndex=0),this._changeAdTimer>this.ChaneAdTime&&(this._changeAdTimer=0,this.RefreshAdList())},t.prototype.onListRender=function(e,t){var n=this._list.array[t],i=e.getComponent(a["default"]);i.setData(n,this.owner)},t.prototype.RefreshAdList=function(){var e=this;i["default"].TryGetAdvs(this.AdLocationID,function(t){if(null!=t&&null!=t.IsOpen&&!t.IsOpen)return console.log("广告位：",e.AdLocationID," 状态为关闭,隐藏控件"),void(e._ownerSp.visible=!1);if(null==t||7!=t.type)return console.log("广告位：",e.AdLocationID," 数据位空或者类型错误"),void(e._list.array=null);if(e.owner&&!e.owner.destroyed){var n=t.creatives;e._list.array=n}})},t}(Laya.Script);n["default"]=o},{"../TmAPI":62,"./TmListAdBox":57}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=e("../../Utilit"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._bg=this.owner.getChildByName("BG"),this._popBtn=this._bg.getChildByName("PopADBtn"),this._popOut_Img=this._popBtn.getChildByName("PopOut"),this._popIn_Img=this._popBtn.getChildByName("PopIn"),this._popOut_Img.visible=!0,this._popIn_Img.visible=!1},t.prototype.onEnable=function(){var e=this;this._popBtn.on(Laya.Event.CLICK,this,this.onPopBtnClick),i["default"].regEvent_csjc(a.EventDef_csjc.AD_OnShareAdFail_csjc,this,this.onShareAdFail),i["default"].regEvent_csjc(a.EventDef_csjc.AD_SidePopViewSwitch_csjc,this,function(t){e._ownerSp.visible=t})},t.prototype.onDisable=function(){var e=this;this._popBtn.off(Laya.Event.CLICK,this,this.onPopBtnClick),i["default"].removeEvent_csjc(a.EventDef_csjc.AD_OnShareAdFail_csjc,this,this.onShareAdFail),i["default"].regEvent_csjc(a.EventDef_csjc.AD_SidePopViewSwitch_csjc,this,function(t){e._ownerSp.visible=t})},t.prototype.onPopBtnClick=function(){this._bg.x>0?this.popDown():this.popUp()},t.prototype.popDown=function(){Laya.Tween.to(this._bg,{x:0},250,Laya.Ease.circIn,Laya.Handler.create(this,function(){}),null,!0)},t.prototype.popUp=function(){o["default"].forEachChild(this.owner,function(e){e.event("AdRefresh")}),Laya.Tween.to(this._bg,{x:this._bg.width},250,Laya.Ease.circIn,Laya.Handler.create(this,function(){}),null,!0)},t.prototype.onShareAdFail=function(){this.popUp()},t}(Laya.Script);n["default"]=s},{"../../Event/EventDef":5,"../../Event/EventMgr":6,"../../Utilit":65}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TmAPI"),a=function(e){function t(){var t=e.call(this)||this;return t.AdLocationID=i["default"].SingleAdLocationId,t.RefreshTime=0,t._data=null,t._positionId=0,t._creativeId=0,t._appId="",t._isAni=!1,t._aniImageIndex=0,t._aniImageArray=[],t._fpsTimer=0,t._fpsTime=0,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSp=this.owner,this._displaySp=this._ownerSp.getChildByName("Display")},t.prototype.onEnable=function(){this.refreshAd()},t.prototype.refreshAd=function(){var e=this;i["default"].TryGetAdvs(this.AdLocationID,function(t){return null==t||null==t.IsOpen||t.IsOpen?null==t||1!=t.type?void console.log("广告位：",e.AdLocationID," 数据位空或者类型错误"):void(e.owner&&!e.owner.destroyed&&(e._data=t.creatives[0],e._creativeId=e._data.creativeId,e._positionId=e._data.positionId,e._appId=t.appId,null!=e._data.show_config.fps?(console.log("SingleAd显示序列帧"),e._aniImageArray=e._data.show_config.images,e._fpsTime=1e3*e._data.show_config.fps,Laya.loader.load(e._aniImageArray,Laya.Handler.create(e,function(t){t&&(e.RefreshTime>0&&Laya.timer.once(1e3*e.RefreshTime,e,e.refreshAd),e._aniImageIndex=0,e._fpsTimer=0,e._isAni=!0)}))):(console.log("SingleAd显示单独浮动"),e._aniImageArray=[],e._fpsTime=0,e._fpsTimer=0,e._isAni=!1,Laya.loader.load(e._data.show_config.image,Laya.Handler.create(e,function(){e._displaySp.loadImage(e._data.show_config.image),e.RefreshTime>0&&Laya.timer.once(1e3*e.RefreshTime,e,e.refreshAd)}))))):(console.log("广告位：",e.AdLocationID," 状态为关闭,隐藏控件"),void(e._ownerSp.visible=!1))})},t.prototype.onUpdate=function(){this._isAni&&(this._fpsTimer<this._fpsTime?this._fpsTimer+=Laya.timer.delta:(this._fpsTimer=0,this._displaySp.loadImage(this._aniImageArray[this._aniImageIndex]),this._aniImageIndex>this._aniImageArray.length-1?this._aniImageIndex++:this._aniImageIndex=0))},t}(Laya.Script);n["default"]=a},{"../TmAPI":62}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ALD"),a=e("./TmAppConfig"),o=function(){function e(){}return e.Init=function(){Laya.Browser.onMiniGame&&Laya.Browser.window.wx.tmSDK.init({hideRequestLog:!0,appVersion:this.AppVersion})},e.Login=function(e){Laya.Browser.onMiniGame&&Laya.Browser.window.wx.tmSDK.login().then(function(t){console.log("登陆成功",t),null!=e&&e(t)})},e.NoLoginInit=function(e){Laya.Browser.onMiniGame&&(console.log(e),Laya.Browser.window.wx.tmSDK.sendUserInfo({openId:e,gender:1}),console.log("传入天幕OpenId: ",e))},e.TryGetAdvs=function(e,t){var n=this;if(!a["default"].CurrentConfig.adSwitch)return console.log("广告总开关为关闭状态"),void t({IsOpen:!1});if(Laya.Browser.onMiniGame)Laya.Browser.window.wx.tmSDK.checkFlowIsOpen({positionId:e}).then(function(i){i.isOpen?n.GetAdvs(e,t):t({IsOpen:!1})});else if(Laya.Browser.onQQMiniGame);else{console.log("编辑器下调用广告位,返回测试广告:",e);var i={creatives:[],isOpen:!0};switch(e){case this.ListIcoAdLocationId:for(var o=0;20>o;o++){var s={creativeId:1e4,positionId:e,appId:"Ico测试广告",show_config:{image:"res/TmTestAd/TestIcoAd-"+(o%5+1)+".jpg",title:"1"}};i.creatives.push(s)}i.type=7;break;case this.BannerAdLocationId:var r={creativeId:1e4,positionId:e,show_config:{image:"res/TmTestAd/TestBannerAd-"+(Math.floor(2*Math.random())+1)+".jpg",title:"1"}};i.appId="Banner微信测试广告",i.creatives.push(r),i.type=11;break;case this.SingleAdLocationId:var c={creativeId:1e4,positionId:e,appId:"Single微信测试广告",show_config:{image:"res/TmTestAd/TestFlowAd-"+(Math.floor(2*Math.random())+1)+".jpg",title:"1"}};i.creatives.push(c),i.type=1}t(i)}},e.GetAdvs=function(e,t){Laya.Browser.onMiniGame?Laya.Browser.window.wx.tmSDK.getFlowConfig({positionId:e}).then(function(n){console.log(e,"该广告位是否开启:",n),t(n)}):Laya.Browser.onQQMiniGame},e.NavigateAndReport=function(e,t,n,a){Laya.Browser.onMiniGame?this.FlowNavigate(e,t,function(e,t){console.log(e,t),e?i["default"].aldSendReportAdClickSuccess_csjc(n):"navigateToMiniProgram:fail cancel"==t.navigateMessage.errMsg&&(console.log("用户取消跳转"),i["default"].aldSendReportAdClickFail_csjc(n)),a&&a(e,t)}):a&&a(!0,null)},e.FlowNavigate=function(e,t,n){Laya.Browser.onMiniGame?Laya.Browser.window.wx.tmSDK.flowNavigate({positionId:e,creativeId:t}).then(function(e){console.log("调用跳转函数成功"),console.log("自动刷新列表：",e),n&&("navigateToMiniProgram:ok"==e.navigateMessage.errMsg?n(!0,e):n(!1,e))})["catch"](function(e){console.log("调用跳转函数失败",e),n&&n(!1,e)}):n&&(console.log("在模拟器中调用跳转函数,返回虚假成功结果"),n(!0,null))},e.getAppJSONConfig=function(e,t){Laya.Browser.onMiniGame?Laya.Browser.window.wx.tmSDK.getAppJSONConfig(e).then(function(e){t&&t(e)}):t&&t()},e.SendEvent=function(e,t){Laya.Browser.onMiniGame?(console.log("发送事件:",e,"参数:",t),Laya.Browser.window.wx.tmSDK.sendEvent(e,t)):console.log("在编辑器下发送Tm事件",e,t)},e.AppId="",e.AppVersion="1.0.0",e.ListIcoAdLocationId=1075799,e.SingleAdLocationId=1075900,e.BannerAdLocationId=1076001,e._iphoneIgnoreAppIds=["wx2d2acce3c45f4ddf","wxeb93c1298ec7c62b"],e.UserInformation=null,e}();n["default"]=o},{"../ALD":1,"./TmAppConfig":63}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./TmAPI"),a=function(){function e(){this.adSwitch=!1,this.wxBanner=!1,this.wudian=!1,this.examineBlock=!0,this.examineSceneList=[1005,1006,1011,1012,1013,1014,1017,1019,1020,1023,1024,1025,1030,1031,1032,1036,1042,1047,1048,1049,1053,1102,1129],this.wxWuDianBanners=[],this.btnShowTimer=0,this.btnMoveTimer=0,this.bannerMoveTimer=0,this.bannerCreateFailNum=3,this.bannerTodayBannerMax=10,this.maiLiangBlock=!0,this.maiLiangSceneList=[1011,1012,1013,1017,1025,1031,1032,1047,1048,1049,1072]}return e.prototype.initOptions=function(e){null!=e&&("boolean"==typeof e.adSwitch&&(this.adSwitch=e.adSwitch),"boolean"==typeof e.wxBanner&&(this.wxBanner=e.wxBanner),"boolean"==typeof e.wudian&&(this.wudian=e.wudian),"boolean"==typeof e.examineBlock&&(this.examineBlock=e.examineBlock),e.examineSceneList instanceof Array&&(this.examineSceneList=e.examineSceneList),e.wxWuDianBanners instanceof Array&&(this.wxWuDianBanners=e.wxWuDianBanners),"number"==typeof e.btnShowTimer&&(this.btnShowTimer=e.btnShowTimer),"number"==typeof e.btnMoveTimer&&(this.btnMoveTimer=e.btnMoveTimer),"boolean"==typeof e.bannerMoveTimer&&(this.bannerMoveTimer=e.bannerMoveTimer),"boolean"==typeof e.bannerCreateFailNum&&(this.bannerCreateFailNum=e.bannerCreateFailNum),"boolean"==typeof e.bannerTodayBannerMax&&(this.bannerTodayBannerMax=e.bannerTodayBannerMax),"boolean"==typeof e.maiLiangBlock&&(this.maiLiangBlock=e.maiLiangBlock),e.maiLiangSceneList instanceof Array&&(this.maiLiangSceneList=e.maiLiangSceneList))},e}();n.TmAppConfigOptions=a;var o=function(){function e(){}return Object.defineProperty(e,"CurrentConfig",{get:function(){return this._currentConfig},enumerable:!0,configurable:!0}),e.UpdateConfig=function(e){var t=this;console.log("调用在线版本的appConfig"),i["default"].getAppJSONConfig("AppConfig",function(n){t._currentConfig.initOptions(n),console.log(t._currentConfig),e&&e()})},e.UpdateLocalConfig=function(e){var t=this;console.log("调用本地版本的appConfig"),Laya.loader.load(this.LocalConfigPath,Laya.Handler.create(this,function(n){t._currentConfig.initOptions(n),console.log(t._currentConfig),e&&e()}))},e.LocalConfigPath="res/json/AppConfigOption.json",e._currentConfig=new a,e}();n["default"]=o},{"./TmAPI":62}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Event/EventMgr"),a=e("../Event/EventDef"),o=e("../Mgr/StorageMgr"),s=e("../Net/HttpUnit"),r=function(){function e(){this.levelNum=1,this.moneyNum=0,this.crystalNum=0,this.Piece=1,this.Speed=1,this.Foot=1}return e}();n.UserGameData=r;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"isLogin",{get:function(){return""!=t.code_csjc||""!=t.token_csjc},enumerable:!0,configurable:!0}),t.getSaveData_csjc=function(){return JSON.stringify(t._gameData)},t.testInitUser_csjc=function(){t._gameData.levelNum=1,t._gameData.moneyNum=1e7,t._gameData.crystalNum=1e7,t._gameData.Piece=10,t._gameData.Speed=10,t._gameData.Foot=10},t.initiUser_csjc=function(e){if(e&&0!=e)t._useLocalStorage_csjc=!1,console.log("获得在线存档"),t.SetUserData_csjc(e);else{console.log("获得本地存档"),t._useLocalStorage_csjc=!0;var n=o["default"].getStorage_csjc("UserGameData");if(null!=n&&""!=n){var i=JSON.parse(n);t.SetUserData_csjc(i)}else this.SaveGameData_csjc()}},t.SetUserData_csjc=function(e){e.levelNum&&(t._gameData.levelNum=e.levelNum),e.moneyNum&&(t._gameData.moneyNum=e.moneyNum),e.crystalNum&&(t._gameData.crystalNum=e.crystalNum),e.Piece&&(t._gameData.Piece=e.Piece),e.Speed&&(t._gameData.Speed=e.Speed),e.Foot&&(t._gameData.Foot=e.Foot)},t.SaveGameData_csjc=function(){t._useLocalStorage_csjc?t.SaveLocalGameDate_csjc():s["default"].saveGameData_csjc(t.getSaveData_csjc(),function(e){1==e.code?console.log("存档成功"):console.log("存档失败")},function(e){console.log("存档失败")})},t.SaveLocalGameDate_csjc=function(){var e=new o.StorageReq_csjc;e.key="UserGameData",e.data=t._gameData,o["default"].setStorage_csjc(e)},t.setLeveNum_csjc=function(e){t._gameData.levelNum=e,this.SaveGameData_csjc()},t.getLeveNum_csjc=function(){return t._gameData.levelNum},t.addMoney_csjc=function(e,n){e=Math.ceil(e);var o=t._gameData.moneyNum;t._gameData.moneyNum+=e,i["default"].dispatch_csjc(a.EventDef_csjc.Game_OnUserMoneyChange_csjc,{curr:t._gameData.moneyNum,last:o,getLoc:n}),this.SaveGameData_csjc()},t.subMoney_csjc=function(e){e=Math.ceil(e);var n=t._gameData.moneyNum;t._gameData.moneyNum-=e,t._gameData.moneyNum<0&&(t._gameData.moneyNum=0),i["default"].dispatch_csjc(a.EventDef_csjc.Game_OnUserMoneyChange_csjc,{curr:t._gameData.moneyNum,last:n}),this.SaveGameData_csjc()},t.getMoney_csjc=function(){return t._gameData.moneyNum},t.addCrystal_csjc=function(e,n){e=Math.ceil(e);var o=t._gameData.crystalNum;t._gameData.crystalNum+=e,i["default"].dispatch_csjc(a.EventDef_csjc.Game_OnUserCrystalChange_csjc,{curr:t._gameData.crystalNum,last:o,getLoc:n}),this.SaveGameData_csjc()},t.subCrystal_csjc=function(e){e=Math.ceil(e);var n=t._gameData.crystalNum;t._gameData.crystalNum-=e,t._gameData.crystalNum<0&&(t._gameData.crystalNum=0),i["default"].dispatch_csjc(a.EventDef_csjc.Game_OnUserCrystalChange_csjc,{curr:t._gameData.crystalNum,last:n}),this.SaveGameData_csjc()},t.getCrystal_csjc=function(){return t._gameData.crystalNum},t.GetSpeed_csjc=function(){return t._gameData.Speed},t.SetSpeed_csjc=function(e){t._gameData.Speed=e},t.GetPiece_csjc=function(){return t._gameData.Piece},t.SetPiece_csjc=function(e){t._gameData.Piece=e},t.GetFoot_csjc=function(){return t._gameData.Foot},t.SetFoot_csjc=function(e){t._gameData.Foot=e},t.code_csjc="",t.openId_csjc="",t.token_csjc=null,t.nickName_csjc="",t.gender_csjc=0,t.city_csjc="广州市",t._useLocalStorage_csjc=!1,t._gameData=new r,t}(Laya.Script);n["default"]=c},{"../Event/EventDef":5,"../Event/EventMgr":6,"../Mgr/StorageMgr":11,"../Net/HttpUnit":14}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.Lerp=function(e,t,n){if(e==t)return t;if(e>t){var i=e-n;return t>=i?t:i}if(t>e){var i=e+n;return i>=t?t:i}},e.lerpEulerAngle=function(t,n,i){var t=t%360;t=t>=0?t:360+t;var n=n%360;n=n>=0?n:360+n;var a=Math.abs(n-t);a>180&&(n>t?n-=360:t>n&&(n+=360));var o=e.Lerp(t,n,i);return o},e.getRotationByDir=function(t){var n=t.x*e.poinDown.x+t.y*e.poinDown.y,i=n/(t.distance(0,0)*e.poinDown.distance(0,0)),a=Math.acos(i),o=a/(2*Math.PI)*360;return t.x<0&&(o=-o),o},e.getRotationByDirOn3DSpace=function(t){var n=t.x*e.poinUp.x+t.y*e.poinUp.y,i=n/(t.distance(0,0)*e.poinUp.distance(0,0)),a=Math.acos(i),o=a/(2*Math.PI)*360;return t.x<0&&(o+=2*(180-o)),o},e.getDirByRotation=function(e){var t=(e-90)*Math.PI/180,n=Math.cos(t),i=Math.sin(t),a=new Laya.Point(n,i);return a.normalize(),a},e.getDirDirAngle=function(e,t){var n=e.x*t.x+e.y*t.y,i=n/(e.distance(0,0)*t.distance(0,0)),a=Math.acos(i),o=a/(2*Math.PI)*360;return o},e.getDirScalarLength=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return t},e.setSpOnParentCenter=function(e){if(null!=e.parent){var t=e.parent,n=0,i=0,n=n-e.width/2*e.scaleX+t.width/2,i=i-e.height/2*e.scaleY+t.height/2;e.x=n,e.y=i}},e.getPointToLineDistance=function(e,t,n,i){var a=new Laya.Point(e-n.x,t-n.y),o=new Laya.Point(e-i.x,t-i.y),s=new Laya.Point(i.x-n.y,i.y-n.y),r=s.x*a.x+s.y*a.y;if(0>=r)return a.distance(0,0);var c=s.x*o.x+s.y*o.y;if(0>=c)return o.distance(0,0);var l=a.distance(0,0),u=s.distance(0,0),h=r/(l*u),d=Math.acos(h),p=Math.sin(d)*l;return p},e.isIphoneX=function(){return Laya.Browser.onIPhone&&(2436==Laya.Browser.width&&1125==Laya.Browser.height||2436==Laya.Browser.height&&1125==Laya.Browser.width)?!0:!1},e.isIphone=function(){return Laya.Browser.onIPhone},e.getChild=function(t,n){for(var i=0;i<t.numChildren;++i){var a=t.getChildAt(i);if(a.name==n)return a;var o=e.getChild(a,n);if(o)return o}return null},e.forEachChild=function(t,n){for(var i=0;i<t.numChildren;++i){var a=t.getChildAt(i);n(a),e.forEachChild(a,n)}},e.OriginStageWidth=1334,e.OriginStageHeight=750,e.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],e.grayscaleFilter=new Laya.ColorFilter(e.grayscaleMat),e.poinDown=new Laya.Point(0,-1),e.poinUp=new Laya.Point(0,1),e}();n["default"]=i},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BreathingSpeed_csjc=.5,t.MinAlpha=.5,t._add_csjc=!1,t}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSprite_csjc=this.owner},t.prototype.onUpdate=function(){this._ownerSprite_csjc.visible&&this.bgAni_csjc()},t.prototype.bgAni_csjc=function(){var e=Laya.timer.delta/1e3*this.BreathingSpeed_csjc;this._add_csjc?(this._ownerSprite_csjc.alpha=this._ownerSprite_csjc.alpha+e,this._ownerSprite_csjc.alpha>=1&&(this._add_csjc=!1)):(this._ownerSprite_csjc.alpha=this._ownerSprite_csjc.alpha-e,this._ownerSprite_csjc.alpha<=this.MinAlpha&&(this._add_csjc=!0))},t}(Laya.Script);n["default"]=i},{}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Mgr/SoundMgr"),a=function(e){function t(){var t=e.call(this)||this;return t.useSound_csjc=!0,t}return __extends(t,e),t.prototype.onAwake=function(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown_csjc),this.owner.on(Laya.Event.MOUSE_UP,this,this.onUp_csjc),this.owner.on(Laya.Event.MOUSE_OUT,this,this.onUp_csjc)},t.prototype.onDisable=function(){this.owner.offAll(),Laya.Tween.clearAll(this)},t.prototype.onDown_csjc=function(){Laya.Tween.to(this.owner,{scaleX:.9,scaleY:.9},50),this.useSound_csjc&&i["default"].instance_csjc.playSound_csjc("anniu")},t.prototype.onUp_csjc=function(){Laya.Tween.to(this.owner,{scaleX:1,scaleY:1},50)},t}(Laya.Script);n["default"]=a},{"../Mgr/SoundMgr":10}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){this._ownerSprite_csjc=this.owner,this._autoZone_csjc=this._ownerSprite_csjc.getChildByName("AutoZone"),this._loopADZone_csjc=this._ownerSprite_csjc.getChildByName("LoopAD"),this._bannerADZone_csjc=this._ownerSprite_csjc.getChildByName("BannerAD")},t.prototype.onEnable=function(){var e=Laya.stage.width/Laya.stage.height;.5>e?(this._autoZone_csjc.bottom=this._loopADZone_csjc.height+this._bannerADZone_csjc.height,this._loopADZone_csjc.bottom=this._bannerADZone_csjc.height,this._bannerADZone_csjc.visible=!0):(this._autoZone_csjc.bottom=this._loopADZone_csjc.height,this._loopADZone_csjc.bottom=0,this._bannerADZone_csjc.visible=!1)},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){this._bannerADZone_csjc.visible||this._bannerADZone_csjc.onDisable()},t}(Laya.Script);n["default"]=i},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Mgr/ViewMgr"),a=e("./WudianView"),o=e("../../QpAPI/QpGameSwitch"),s=e("../../TmAPI/TmAPI"),r=e("../../User/User"),c=e("../../QpAPI/AdDataMgr"),l=e("../../CommomAPI/ExamineMgr"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._skipBtnMove=!1,t._hideFirst=!0,t._wudianTpye=2,t}return __extends(t,e),Object.defineProperty(t.prototype,"NeedWudian",{get:function(){var e=1==o["default"].GameSwitch.bannerWudian,t=1==o["default"].GameSwitch.wudianSwitch;return console.log("wd功能总开关wudianSwitch: "+t+"，分开关bannerWudian："+e),e&&t},enumerable:!0,configurable:!0}),t.prototype.OnSkipBtn=function(){this.closeView(),i["default"].instance_csjc.getView_csjc(i.ViewDef_csjc.InGameView)?i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.InGameView):null==this._data?i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.MainGameView):this._data.Win?i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.GameOverWinView):i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.GameOverFailView)},t.prototype.addEvent=function(){this._skipBtn.on(Laya.Event.CLICK,this,this.OnSkipBtn)},t.prototype.onStart=function(){e.prototype.onStart.call(this),1==r["default"].getLeveNum_csjc()&&s["default"].SendEvent("GameStep",{Step:4});var t=new Laya.Skeleton;if(this.owner.addChild(t),t.pos(700,350),t.load("subRes/sk/NewProject.sk",Laya.Handler.create(this,function(e){e.scaleX=.5,e.scaleY=.5})),Laya.Browser.onMiniGame&&(console.log("自动跳功能屏蔽"+l["default"].CanDoScz_Wx+",开关"+(1==o["default"].GameSwitch.popAd)),l["default"].CanDoScz_Wx&&1==o["default"].GameSwitch.popAd)){var n=c.AdDataMgr.Instance.GetDataByStyleAndCount(c.ComponentStyle.h_slider,10);if(n.length>0){var i=n[Math.floor(Math.random()*n.length)];i&&c.AdDataMgr.Instance.NavigateTo(c.ComponentStyle.h_slider,i)}}},t}(a["default"]);n["default"]=u},{"../../CommomAPI/ExamineMgr":2,"../../Mgr/ViewMgr":12,"../../QpAPI/AdDataMgr":21,"../../QpAPI/QpGameSwitch":30,"../../TmAPI/TmAPI":62,"../../User/User":64,"./WudianView":79}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Mgr/ViewMgr"),a=e("./WudianView"),o=e("../../QpAPI/QpGameSwitch"),s=e("../../Scripts/GameMgr"),r=e("../../User/User"),c=e("../../TmAPI/TmAPI"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._skipBtnMove=!1,t._hideFirst=!1,t._wudianTpye=2,t}return __extends(t,e),Object.defineProperty(t.prototype,"NeedWudian",{get:function(){var e=1==o["default"].GameSwitch.bannerWudian,t=1==o["default"].GameSwitch.wudianSwitch;return console.log("wd功能总开关wudianSwitch: "+t+"，分开关bannerWudian："+e),e&&t},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),s["default"].getInstance().CreatNextGameScene()},t.prototype.addEvent=function(){this._skipBtn.on(Laya.Event.CLICK,this,this.OnSkipBtn)},t.prototype.OnSkipBtn=function(){this.closeView(),i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.MainGameView)},t.prototype.onStart=function(){var e=new Laya.Skeleton;this.owner.addChild(e),e.pos(700,350),e.load("subRes/sk/NewProject.sk",Laya.Handler.create(this,function(e){e.scaleX=.5,e.scaleY=.5})),r["default"].getLeveNum_csjc()<=2&&c["default"].SendEvent("GameStep",{Step:6})},t}(a["default"]);n["default"]=l},{"../../Mgr/ViewMgr":12,"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameMgr":48,"../../TmAPI/TmAPI":62,"../../User/User":64,"./WudianView":79}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Mgr/ViewMgr"),a=e("./WudianView"),o=e("../../QpAPI/QpGameSwitch"),s=e("../../QpAPI/AdDataMgr"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._skipBtnMove=!0,t._hideFirst=!0,t._wudianTpye=2,t.onCloseEvent=function(){i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.Export1AdView)},t}return __extends(t,e),t.prototype.onAwake=function(){if(e.prototype.onAwake.call(this),this._btn1=this.owner.getChildByName("BG").getChildByName("Btn1"),this._btn2=this.owner.getChildByName("BG").getChildByName("Btn2"),Laya.Browser.onMiniGame){var t=s.AdDataMgr.Instance.GetDataByStyleAndCount(s.ComponentStyle.h_slider,10);t.length>0&&(this._game1=t[Math.floor(Math.random()*t.length)],this._game2=t[Math.floor(Math.random()*t.length)])}},Object.defineProperty(t.prototype,"NeedWudian",{get:function(){var e=1==o["default"].GameSwitch.bannerWudian,t=1==o["default"].GameSwitch.wudianSwitch;return console.log("wd功能总开关wudianSwitch: "+t+"，分开关bannerWudian："+e),e&&t},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){this._skipBtn.on(Laya.Event.CLICK,this,this.closeView),this._btn1.on(Laya.Event.CLICK,this,this.Game1),this._btn2.on(Laya.Event.CLICK,this,this.Game2)},t.prototype.OnSkipBtn=function(){this.closeView()},t.prototype.Game1=function(){Laya.Browser.onMiniGame&&this._game1&&s.AdDataMgr.Instance.NavigateTo(s.ComponentStyle.h_slider,this._game1)},t.prototype.Game2=function(){Laya.Browser.onMiniGame&&this._game2&&s.AdDataMgr.Instance.NavigateTo(s.ComponentStyle.h_slider,this._game2)},t}(a["default"]);n["default"]=r},{"../../Mgr/ViewMgr":12,"../../QpAPI/AdDataMgr":21,"../../QpAPI/QpGameSwitch":30,"./WudianView":79}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Scripts/GameMgr"),a=e("../../QpAPI/QpGameSwitch"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onStart=function(){(0==i["default"].getInstance().FirstAd&&2!=a["default"].customkey.indexAd||0==a["default"].customkey.indexAd)&&(this.owner.visible=!1)},t}(Laya.Script);n["default"]=o},{"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameMgr":48}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Mgr/ViewMgr"),a=e("./WudianView"),o=e("../../QpAPI/QpGameSwitch"),s=e("../../TmAPI/TmAPI"),r=e("../../User/User"),c=e("../../Scripts/GameMgr"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._skipBtnMove=!1,t._hideFirst=!0,t._wudianTpye=2,t}return __extends(t,e),Object.defineProperty(t.prototype,"NeedWudian",{get:function(){var e=1==o["default"].GameSwitch.bannerWudian,t=1==o["default"].GameSwitch.wudianSwitch;return console.log("wd功能总开关wudianSwitch: "+t+"，分开关bannerWudian："+e),e&&t},enumerable:!0,configurable:!0}),t.prototype.OnSkipBtn=function(){this.closeView()},t.prototype.addEvent=function(){this._skipBtn.on(Laya.Event.CLICK,this,this.OnSkipBtn)},t.prototype.onStart=function(){e.prototype.onStart.call(this),1==r["default"].getLeveNum_csjc()&&s["default"].SendEvent("GameStep",{Step:5}),this.owner.addChild(c["default"].getInstance().Context),c["default"].getInstance().Context.postMsg({cmd:"OpenExport",data:{width:Laya.stage.width,height:Laya.stage.height}})},t.prototype.onClose=function(){e.prototype.onClose.call(this),i["default"].instance_csjc.openView_csjc(i.ViewDef_csjc.HExport2AdView)},t.prototype.onDestroy=function(){c["default"].getInstance().Context.removeSelf(),e.prototype.onDestroy.call(this)},t}(a["default"]);n["default"]=l},{"../../Mgr/ViewMgr":12,"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameMgr":48,"../../TmAPI/TmAPI":62,"../../User/User":64,"./WudianView":79}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../QpAPI/QpGameSwitch"),a=e("../../Mgr/ViewMgr"),o=e("../../User/User"),s=e("./GameOverWinVIew"),r=e("../../TmAPI/TmAPI"),c=e("../../CommomAPI/ExamineMgr"),l=e("../../Scripts/GameMgr"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetReward=function(){var e=this;if(c["default"].CanDoScz_Wx){this._skipBtn.mouseEnabled=!1;var t=new Laya.Point(100,100);this._money.localToGlobal(t,!1),o["default"].addMoney_csjc(100,t),Laya.timer.once(1500,this,function(){
e.closeView(),console.log("好友热玩"+c["default"].CanDoScz_Wx+",开关"+(1==i["default"].GameSwitch.indexPanel)),c["default"].CanDoScz_Wx&&1==i["default"].GameSwitch.indexPanel?a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.FriendExportView):a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.HExport2AdView)})}else this.closeView(),l["default"].getInstance().CreatGameScene(),a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.MainGameView)},t.prototype.SendGameResult=function(){r["default"].SendEvent("GameResult",{Level:o["default"].getLeveNum_csjc(),Result:0})},t}(s["default"]);n["default"]=u},{"../../CommomAPI/ExamineMgr":2,"../../Mgr/ViewMgr":12,"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameMgr":48,"../../TmAPI/TmAPI":62,"../../User/User":64,"./GameOverWinVIew":75}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./WudianView"),a=e("../../QpAPI/QpGameSwitch"),o=e("../../Mgr/ViewMgr"),s=e("../../User/User"),r=e("../../Scripts/GameCore/SceneMgr"),c=e("../../TmAPI/TmAPI"),l=e("../../CommomAPI/ExamineMgr"),u=e("../../Scripts/GameMgr"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._skipBtnMove=!1,t._hideFirst=!0,t._wudianTpye=2,t}return __extends(t,e),Object.defineProperty(t.prototype,"NeedWudian",{get:function(){var e=1==a["default"].GameSwitch.bannerWudian,t=1==a["default"].GameSwitch.wudianSwitch;return console.log("wd功能总开关wudianSwitch: "+t+"，分开关bannerWudian："+e),e&&t},enumerable:!0,configurable:!0}),t.prototype.OnSkipBtn=function(){this.GetReward()},t.prototype.addEvent=function(){this._skipBtn.on(Laya.Event.CLICK,this,this.OnSkipBtn)},t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._money=this.owner.getChildByName("Money"),this._enemyCount=this.owner.getChildByName("Destory").getChildByName("EnemyCount"),this._enemyCount.value=r["default"].Instance.EnemyKillCount+"/"+r["default"].Instance.EnemCount,this.SendGameResult(),l["default"].CanDoScz_Wx||(this._money.visible=!1)},t.prototype.GetReward=function(){var e=this;if(l["default"].CanDoScz_Wx){this._skipBtn.mouseEnabled=!1;var t=new Laya.Point(100,100);this._money.localToGlobal(t,!1),s["default"].addMoney_csjc(500,t),Laya.timer.once(1500,this,function(){e.closeView(),console.log("好友热玩"+l["default"].CanDoScz_Wx+",开关"+(1==a["default"].GameSwitch.indexPanel)),l["default"].CanDoScz_Wx&&1==a["default"].GameSwitch.indexPanel?o["default"].instance_csjc.openView_csjc(o.ViewDef_csjc.FriendExportView):o["default"].instance_csjc.openView_csjc(o.ViewDef_csjc.HExport2AdView)})}else this.closeView(),u["default"].getInstance().CreatNextGameScene(),o["default"].instance_csjc.openView_csjc(o.ViewDef_csjc.MainGameView)},t.prototype.SendGameResult=function(){c["default"].SendEvent("GameResult",{Level:s["default"].getLeveNum_csjc(),Result:1})},t}(i["default"]);n["default"]=h},{"../../CommomAPI/ExamineMgr":2,"../../Mgr/ViewMgr":12,"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameCore/SceneMgr":47,"../../Scripts/GameMgr":48,"../../TmAPI/TmAPI":62,"../../User/User":64,"./WudianView":79}],76:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{"../../CommomAPI/ExamineMgr":2,"../../Mgr/ViewMgr":12,"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameCore/SceneMgr":47,"../../Scripts/GameMgr":48,"../../TmAPI/TmAPI":62,"../../User/User":64,"./WudianView":79,dup:75}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../View/ViewBase"),a=e("../../Scripts/GameCore/SceneMgr"),o=e("../../Mgr/SoundMgr"),s=e("../../Mgr/ViewMgr"),r=e("../../User/User"),c=e("../../TmAPI/TmAPI"),l=e("../../CommomAPI/ExamineMgr"),u=e("../../PlatformApi/CachedWXBannerAd"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._gameOver=!1,t.onCloseEvent=function(){u["default"].hide_csjc(),o["default"].instance_csjc.stopBGM_csjc(),1==r["default"].getLeveNum_csjc()&&c["default"].SendEvent("GameStep",{Step:3})},t}return __extends(t,e),t.prototype.onAwake=function(){this._moreGameBtn=this.owner.getChildByName("MoreGameBtn"),this._tutorialBtn=this.owner.getChildByName("TutorialBtn"),this._complete=this.owner.getChildByName("Complete"),this._fail=this.owner.getChildByName("Fail"),this._complete.visible=!1,this._fail.visible=!1,l["default"].CanDoScz_Wx&&this.ShowBanner()},t.prototype.addEvent=function(){this._tutorialBtn.on(Laya.Event.CLICK,this,this.OnTutorialBtn),this._moreGameBtn.on(Laya.Event.CLICK,this,this.OnMoreGameBtn)},t.prototype.onStart=function(){o["default"].instance_csjc.playBGM_csjc("Bgm2"),1==r["default"].getLeveNum_csjc()&&c["default"].SendEvent("GameStep",{Step:2})},t.prototype.OnMoreGameBtn=function(){a["default"].Instance.PauseGame(),s["default"].instance_csjc.openView_csjc(s.ViewDef_csjc.HExport1AdView)},t.prototype.OnTutorialBtn=function(){a["default"].Instance.PauseGame(),s["default"].instance_csjc.openView_csjc(s.ViewDef_csjc.TutorialView)},t.prototype.onShow=function(){e.prototype.onShow.call(this),a["default"].Instance.StartGame()},t.prototype.onUpdate=function(){var e=this;this._gameOver||0==a["default"].Instance.GameOver||(this._gameOver=!0,1==a["default"].Instance.GameOver?this._complete.visible=!0:-1==a["default"].Instance.GameOver&&(this._fail.visible=!0),Laya.timer.once(3e3,this,function(){1==a["default"].Instance.GameOver?e.GameOver(!0):-1==a["default"].Instance.GameOver&&e.GameOver(!1)}))},t.prototype.GameOver=function(e){if(this.closeView(),l["default"].CanDoScz_Wx){var t={Win:!1};e?t.Win=!0:t.Win=!1,s["default"].instance_csjc.openView_csjc(s.ViewDef_csjc.HExport1AdView,t)}else e?s["default"].instance_csjc.openView_csjc(s.ViewDef_csjc.GameOverWinView):s["default"].instance_csjc.openView_csjc(s.ViewDef_csjc.GameOverFailView)},t.prototype.ShowBanner=function(){var e=this,t=5e3*Math.random();Laya.timer.once(15e3+t,this,function(){u["default"].changeShow_csjc(0),Laya.timer.once(2500,e,function(){u["default"].hide_csjc(),e.ShowBanner()})})},t}(i["default"]);n["default"]=h},{"../../CommomAPI/ExamineMgr":2,"../../Mgr/SoundMgr":10,"../../Mgr/ViewMgr":12,"../../PlatformApi/CachedWXBannerAd":17,"../../Scripts/GameCore/SceneMgr":47,"../../TmAPI/TmAPI":62,"../../User/User":64,"../../View/ViewBase":86}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ViewBase"),a=e("../../Mgr/ViewMgr"),o=e("../../Mgr/SoundMgr"),s=e("../../CommomAPI/ExamineMgr"),r=e("../../TmAPI/TmAPI"),c=e("../../User/User"),l=e("../../PlatformApi/CachedWXBannerAd"),u=e("../../QpAPI/QpGameSwitch"),h=e("../../PlatformApi/WXAPI"),d=e("../../Scripts/GameMgr"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCloseEvent=function(){d["default"].getInstance().FirstAd=!0,l["default"].hide_csjc()},t}return __extends(t,e),t.prototype.onAwake=function(){this._aniZone=this.owner.getChildByName("AniZone"),this._ani1=this._aniZone.getChildByName("Robot"),this._ani2=this._aniZone.getChildByName("Car"),this._loopAd=this.owner.getChildByName("BottomLoopAd"),this._startBtn=this.owner.getChildByName("StartBtn"),this._moreGameBtn=this.owner.getChildByName("MoreGameBtn")},t.prototype.onStart=function(){if(1==c["default"].getLeveNum_csjc()&&r["default"].SendEvent("GameStep",{Step:1}),Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getSystemInfoSync(),t=e.screenWidth,n=(e.screenHeight,Laya.stage.width/t);console.log(e.screenWidth,e.screenHeight),this._loopAd.left=Laya.stage.width-(t-350)*n}else this._loopAd.left=Laya.stage.width-350},t.prototype.addEvent=function(){this._startBtn.on(Laya.Event.CLICK,this,this.OnStartBtn),this._moreGameBtn.on(Laya.Event.CLICK,this,this.OnMoreGameBtn)},t.prototype.OnStartBtn=function(){var e=this;Laya.Browser.onMiniGame&&s["default"].CanDoKd_Wx&&1==u["default"].customkey.startVideo?h["default"].showRewardedVideoAd_csjc(function(){e.StartGame()},function(){e.StartGame()}):this.StartGame()},t.prototype.StartGame=function(){this.closeView(),s["default"].CanDoScz_Wx&&1==u["default"].GameSwitch.bannerKuangdian1?a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.KdBannerView):a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.InGameView)},t.prototype.OnMoreGameBtn=function(){this.closeView(),a["default"].instance_csjc.openView_csjc(a.ViewDef_csjc.HExport1AdView)},t.prototype.onShow=function(){var t=this;e.prototype.onShow.call(this),l["default"].changeShow_csjc(-1),o["default"].instance_csjc.playBGM_csjc("Bgm2"),Laya.timer.once(500,this,function(){Laya.Tween.to(t._ani1,{right:0},500),Laya.Tween.to(t._ani2,{left:150},500)})},t}(i["default"]);n["default"]=p},{"../../CommomAPI/ExamineMgr":2,"../../Mgr/SoundMgr":10,"../../Mgr/ViewMgr":12,"../../PlatformApi/CachedWXBannerAd":17,"../../PlatformApi/WXAPI":20,"../../QpAPI/QpGameSwitch":30,"../../Scripts/GameMgr":48,"../../TmAPI/TmAPI":62,"../../User/User":64,"../ViewBase":86}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ViewBase"),a=e("../../QpAPI/QpGameSwitch"),o=e("../../PlatformApi/CachedWXBannerAd"),s=e("../../CommomAPI/ExamineMgr"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._wudianTpye=2,t._hideFirst=!1,t._skipBtnMove=!0,t._bannerShowTime=0,t.onOpenEvent=function(){return console.log("BtnMovetime:"+a["default"].GameSwitch.btnMoveTimer+",bannerMoveTimer:"+a["default"].GameSwitch.bannerMoveTimer),o["default"].hide_csjc(),s["default"].CanDoScz_Wx?void(t.NeedWudian?(t._skipBtnMove&&(t._skipBtn.bottom=100),t._skipBtn.offAllCaller(t),t._hideFirst&&a["default"].GameSwitch.btnShowTimer>0?(t._skipBtn.visible=!1,Laya.timer.once(1e3*a["default"].GameSwitch.btnShowTimer,t,function(){t._skipBtn.visible=!0,t.SelectWudianMethod()})):t.SelectWudianMethod()):(t._skipBtnMove&&(t._skipBtn.bottom=320,o["default"].changeShow_csjc(0),Laya.timer.once(500,t,function(){o["default"].changeShow_csjc(0)})),a["default"].GameSwitch.btnShowTimer>0&&(t._skipBtn.visible=!1,Laya.timer.once(1e3*a["default"].GameSwitch.btnShowTimer,t,function(){t._skipBtn.visible=!0})))):void(t._skipBtnMove&&o["default"].changeShow_csjc(0))},t}return __extends(t,e),t.prototype.onAwake=function(){this._skipBtn=this.owner.getChildByName("SkipBtn")},t.prototype.onClose=function(){e.prototype.onClose.call(this),o["default"].hide_csjc()},t.prototype.SelectWudianMethod=function(){if(1==this._wudianTpye){console.log("WMethod1"),this._skipBtn.offAllCaller(this);var e=1e3*Math.random()+500;Laya.timer.once(e,this,this.FlashBanner2)}else console.log("WMethod2"),this._skipBtn.once(Laya.Event.CLICK,this,this.WudianMethod1)},t.prototype.WudianMethod1=function(){var e=this;Laya.timer.clearAll(this),o["default"].hide_csjc();var t=a["default"].GameSwitch.btnMoveTimer,n=a["default"].GameSwitch.bannerMoveTimer;100>t&&(t*=1e3),100>n&&(n*=1e3),Laya.timer.once(t,this,function(){e._skipBtnMove&&(e._skipBtn.bottom=320),e._skipBtn.on(Laya.Event.CLICK,e,e.OnSkipBtn)}),Laya.timer.once(n,this,this.FlashBanner1)},t.prototype.WudianMethod2=function(){var e=this,t=a["default"].GameSwitch.btnMoveTimer,n=a["default"].GameSwitch.bannerMoveTimer;100>t&&(t*=1e3),100>n&&(n*=1e3),Laya.timer.once(t,this,function(){e._skipBtnMove&&(e._skipBtn.bottom=320),e._skipBtn.on(Laya.Event.CLICK,e,e.OnSkipBtn)}),Laya.timer.once(n,this,this.FlashBanner1)},t.prototype.FlashBanner1=function(){o["default"].changeShow_csjc(0),this._skipBtnMove||Laya.timer.once(2200,this,function(){o["default"].hide_csjc()})},t.prototype.FlashBanner2=function(){o["default"].changeShow_csjc(0),Laya.timer.once(500,this,function(){o["default"].hide_csjc()}),this._skipBtn.once(Laya.Event.CLICK,this,this.WudianMethod1)},t}(i["default"]);n["default"]=r},{"../../CommomAPI/ExamineMgr":2,"../../PlatformApi/CachedWXBannerAd":17,"../../QpAPI/QpGameSwitch":30,"../ViewBase":86}],80:[function(e,t,n){"use strict";function i(e){return null!=e.onViewShow&&"function"==typeof e.onViewShow&&null!=e.onViewHide&&"function"==typeof e.onViewHide?!0:!1}Object.defineProperty(n,"__esModule",{value:!0}),n.isIViewStateListener_csjc=i},{}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Event/EventMgr"),a=e("../../Event/EventDef"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._processWidth_csjc=0,t}return __extends(t,e),t.prototype.onAwake=function(){this._processBarBg_csjc=this.owner.getChildByName("ProcessBarBg"),this._processBar_csjc=this._processBarBg_csjc.getChildByName("ProcessBar"),this._processWidth_csjc=this._processBar_csjc.width,i["default"].regOnceEvent_csjc(a.EventDef_csjc.Game_GameSceneLoadCompelete_csjc,this,this.FinishLoading_csjc)},t.prototype.onUpdate=function(){if(this._processBar_csjc.width<this._currentProcess_csjc){var e=Math.floor((this._currentProcess_csjc-this._processBar_csjc.width)/100);this._processBar_csjc.width+=5+e,this._processBar_csjc.width>this._currentProcess_csjc&&(this._processBar_csjc.width=this._currentProcess_csjc)}},t.prototype.onDestroy=function(){i["default"].removeEvent_csjc(a.EventDef_csjc.Game_GameSceneLoadCompelete_csjc,this,this.FinishLoading_csjc)},t.prototype.setProcess_csjc=function(e){0>e&&(e=0),e>1&&(e=1),this._currentProcess_csjc=this._processWidth_csjc*e},t.prototype.FinishLoading_csjc=function(){this._processBar_csjc.width=this._processWidth_csjc,Laya.timer.once(200,this,function(){i["default"].dispatch_csjc(a.EventDef_csjc.App_CloseFirstLoadingView_csjc)})},t}(Laya.Script);n["default"]=o},{"../../Event/EventDef":5,"../../Event/EventMgr":6}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../View/ViewBase"),a=e("../../PlatformApi/OPPOAPI"),o=e("../../CommomAPI/GameSwitch/GameSwitch"),s=e("../../Mgr/ViewMgr"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._nativeAd_csjc=null,t._curAdItem_csjc=null,t._reTry_csjc=!1,t.onCloseEvent=function(){s["default"].instance_csjc.openView_csjc(s.ViewDef_csjc.InGameView)},t}return __extends(t,e),t.prototype.onAwake=function(){this._centerZone_csjc=this.owner.getChildByName("CenterZone"),this._display_csjc=this._centerZone_csjc.getChildByName("Display"),this._okBtn_csjc=this._centerZone_csjc.getChildByName("OkBtn"),this._closeBtn_csjc=this._centerZone_csjc.getChildByName("CloseBtn"),this._title_Text_csjc=this._centerZone_csjc.getChildByName("Title_Text"),this._desc_Text_csjc=this._centerZone_csjc.getChildByName("Desc_Text")},t.prototype.onStart=function(){this.loadAd_csjc()},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._okBtn_csjc.on(Laya.Event.CLICK,this,this.onOkBtn_csjc),this._closeBtn_csjc.on(Laya.Event.CLICK,this,this.onCloseBtn_csjc),this._display_csjc.on(Laya.Event.CLICK,this,this.onDisplayClick_csjc)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._okBtn_csjc.off(Laya.Event.CLICK,this,this.onOkBtn_csjc),this._closeBtn_csjc.off(Laya.Event.CLICK,this,this.onCloseBtn_csjc),this._display_csjc.off(Laya.Event.CLICK,this,this.onDisplayClick_csjc)},t.prototype.loadAd_csjc=function(){var e=this,t=this;Laya.Browser.onQGMiniGame?(this._closeBtn_csjc.visible=!1,this._nativeAd_csjc&&(this._nativeAd_csjc.destroy(),this._nativeAd_csjc=null),this._curAdItem_csjc=null,this._nativeAd_csjc=qg.createNativeAd({posId:a["default"].GetNativeAd_csjc}),this._nativeAd_csjc.load(),this._nativeAd_csjc.onLoad(function(n){console.log("原生广告加载成功：",n);for(var i=n.adList,a=0;a<i.length;++a){var o=i[a];console.log("原生广告数据：",a);for(var s in o)console.log(s,o[s])}if(e._curAdItem_csjc=i[Math.floor(Math.random()*i.length)],null!=e._curAdItem_csjc){for(var a=0;a<e._curAdItem_csjc.imgUrlList.length;++a)console.log("imgUrlList : ",a+" ",e._curAdItem_csjc.imgUrlList[a]);var r=e._curAdItem_csjc.imgUrlList[Math.floor(Math.random()*e._curAdItem_csjc.imgUrlList.length)];t._display_csjc.loadImage(r,Laya.Handler.create(t,function(){t._title_Text_csjc.text=e._curAdItem_csjc.title,t._desc_Text_csjc.text=e._curAdItem_csjc.desc,t._nativeAd_csjc.reportAdShow({adId:t._curAdItem_csjc.adId})})),console.log("加载图片",r)}t.showCenterZone_csjc()}),this._nativeAd_csjc.onError(function(n){console.log("原生广告加载失败：",n);for(var i in n)console.log(i,n[i]);e._reTry_csjc?t.closeView():(e._reTry_csjc=!0,e._centerZone_csjc.visible=!1,Laya.timer.once(1e3,t,function(){console.log("原生广告重新加载"),t.loadAd_csjc()}))})):t.closeView()},t.prototype.onCloseBtn_csjc=function(){var e=o["default"].CurrentConfig.oppoConf_csjc.yuanshengWudian_csjc;Math.random()<=e&&null!=this._nativeAd_csjc&&null!=this._curAdItem_csjc&&(console.log("点击上报！！！"),this._nativeAd_csjc.reportAdClick({adId:this._curAdItem_csjc.adId})),this.closeView()},t.prototype.onOkBtn_csjc=function(){null!=this._nativeAd_csjc&&null!=this._curAdItem_csjc&&(console.log("点击上报！！！"),this._nativeAd_csjc.reportAdClick({adId:this._curAdItem_csjc.adId}))},t.prototype.onDisplayClick_csjc=function(){null!=this._nativeAd_csjc&&null!=this._curAdItem_csjc&&(console.log("点击上报！！！"),this._nativeAd_csjc.reportAdClick({adId:this._curAdItem_csjc.adId}))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),Laya.Browser.onQGMiniGame&&(this._nativeAd_csjc&&this._nativeAd_csjc.destroy(),this._nativeAd_csjc=null,this._curAdItem_csjc=null)},t.prototype.showCenterZone_csjc=function(){var e=this;this._centerZone_csjc.visible=!0;var t=1e3*o["default"].CurrentConfig.oppoConf_csjc.yuanshengBtnShowTime_csjc;t>0?(this._closeBtn_csjc.visible=!1,Laya.timer.once(t,this,function(){e._closeBtn_csjc.visible=!0})):this._closeBtn_csjc.visible=!0},t}(i["default"]);n["default"]=r},{"../../CommomAPI/GameSwitch/GameSwitch":3,"../../Mgr/ViewMgr":12,"../../PlatformApi/OPPOAPI":18,"../../View/ViewBase":86}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ViewBase"),a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(){this._bg=this.owner.getChildByName("Bg"),this._tipsText=this._bg.getChildByName("Text")},t.prototype.openView=function(t){var n=this;e.prototype.openView.call(this,t),this.setTipsMsg(t),Laya.timer.clearAll(this),Laya.Tween.to(this._bg,{alpha:0},1500,Laya.Ease.quintIn,Laya.Handler.create(this,function(){n.closeView()}))},t.prototype.setTipsMsg=function(e){this._tipsText.text=e},t}(i["default"]);n["default"]=a},{"../ViewBase":86}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return t.TwinkleSpeed=1e3,t.TwinkleMinSize=.95,t.TwinkleMaxSize=1.05,t._aniForward_csjc=!1,t._fontSize_csjc=25,t._originSize_csjc=1,t}return __extends(t,e),t.prototype.onAwake=function(){this._displaySp_csjc=this.owner,this._disText_csjc=this.owner.getChildByName("TitelText"),this._originSize_csjc=this._displaySp_csjc.scaleX,null!=this._disText_csjc&&(this._disText_csjc.text="",this._fontSize_csjc=this._disText_csjc.fontSize)},t.prototype.onEnable=function(){this._displaySp_csjc.scale(this._originSize_csjc,this._originSize_csjc)},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){this.displayAni_csjc()},t.prototype.displayAni_csjc=function(){if(this._aniForward_csjc){var e=this._displaySp_csjc.scaleX+Laya.timer.delta/this.TwinkleSpeed;e=Math.min(e,this.TwinkleMaxSize*this._originSize_csjc),this._displaySp_csjc.scale(e,e),this._displaySp_csjc.scaleX>=this.TwinkleMaxSize*this._originSize_csjc&&(this._aniForward_csjc=!1)}else{var e=this._displaySp_csjc.scaleX-Laya.timer.delta/this.TwinkleSpeed;e=Math.max(e,this.TwinkleMinSize*this._originSize_csjc),this._displaySp_csjc.scale(e,e),this._displaySp_csjc.scaleX<=this.TwinkleMinSize*this._originSize_csjc&&(this._aniForward_csjc=!0)}},t}(Laya.Script);n["default"]=i},{}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../View/ViewBase"),a=e("../../CommomAPI/GameSwitch/GameSwitch"),o=e("../../PlatformApi/VIVOAPI"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._nativeAd_csjc=null,t._curAdItem_csjc=null,t._reTry_csjc=!1,t}return __extends(t,e),t.prototype.onAwake=function(){this._centerZone_csjc=this.owner.getChildByName("CenterZone"),this._display_csjc=this._centerZone_csjc.getChildByName("Display"),this._okBtn_csjc=this._centerZone_csjc.getChildByName("OkBtn"),this._closeBtn_csjc=this._centerZone_csjc.getChildByName("CloseBtn"),this._title_Text_csjc=this._centerZone_csjc.getChildByName("Title_Text"),this._desc_Text_csjc=this._centerZone_csjc.getChildByName("Desc_Text")},t.prototype.onStart=function(){this.loadAd_csjc()},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._okBtn_csjc.on(Laya.Event.CLICK,this,this.onOkBtn_csjc),this._closeBtn_csjc.on(Laya.Event.CLICK,this,this.onCloseBtn_csjc),this._display_csjc.on(Laya.Event.CLICK,this,this.onDisplayClick_csjc)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._okBtn_csjc.off(Laya.Event.CLICK,this,this.onOkBtn_csjc),this._closeBtn_csjc.off(Laya.Event.CLICK,this,this.onCloseBtn_csjc),this._display_csjc.off(Laya.Event.CLICK,this,this.onDisplayClick_csjc)},t.prototype.loadAd_csjc=function(){var e=this,t=this;if(Laya.Browser.onVVMiniGame){this._nativeAd_csjc=null,this._curAdItem_csjc=null,this._nativeAd_csjc=qg.createNativeAd({posId:o["default"].nativeAdId_csjc}),this._nativeAd_csjc.onLoad(function(e){console.log("原生广告加载成功：",e);for(var n=e.adList,i=0;i<n.length;++i){var a=n[i];console.log("原生广告数据：",i);for(var o in a)console.log(o,a[o])}if(t._curAdItem_csjc=n[Math.floor(Math.random()*n.length)],null!=t._curAdItem_csjc){for(var i=0;i<t._curAdItem_csjc.imgUrlList.length;++i)console.log("imgUrlList : ",i+" ",t._curAdItem_csjc.imgUrlList[i]);var s=t._curAdItem_csjc.imgUrlList[Math.floor(Math.random()*t._curAdItem_csjc.imgUrlList.length)];t._display_csjc.loadImage(s,Laya.Handler.create(t,function(){t.showCenterZone_csjc(),t._nativeAd_csjc.reportAdShow({adId:t._curAdItem_csjc.adId}),console.log("加载图片并上报",s)}))}});var n=this._nativeAd_csjc.load();n&&n.then(function(){console.log("原生广告加载完成")})["catch"](function(n){console.log("加载失败",JSON.stringify(n)),e._centerZone_csjc.visible=!1,e._reTry_csjc?t.closeView():(e._reTry_csjc=!0,Laya.timer.once(1e3,t,function(){console.log("原生广告重新加载"),t.loadAd_csjc()}))})}else t.closeView()},t.prototype.onCloseBtn_csjc=function(){var e=a["default"].CurrentConfig.vivoAdConf_csjc.yuanshengWudian_csjc;Math.random()<=e&&null!=this._nativeAd_csjc&&null!=this._curAdItem_csjc&&(console.log("点击上报！！！"),this._nativeAd_csjc.reportAdClick({adId:this._curAdItem_csjc.adId})),this.closeView()},t.prototype.onOkBtn_csjc=function(){this._nativeAd_csjc.reportAdClick({adId:this._curAdItem_csjc.adId})},t.prototype.onDisplayClick_csjc=function(){null!=this._nativeAd_csjc&&null!=this._curAdItem_csjc&&(console.log("点击上报！！！"),this._nativeAd_csjc.reportAdClick({adId:this._curAdItem_csjc.adId}))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),Laya.Browser.onVVMiniGame&&(this._nativeAd_csjc&&null!=this._nativeAd_csjc.title&&this._nativeAd_csjc.destroy(),this._nativeAd_csjc=null,this._curAdItem_csjc=null)},t.prototype.showCenterZone_csjc=function(){var e=this;this._centerZone_csjc.visible=!0;var t=1e3*a["default"].CurrentConfig.vivoAdConf_csjc.yuanshengBtnShowTime_csjc;t>0?(this._okBtn_csjc.visible=!1,Laya.timer.once(t,this,function(){e._okBtn_csjc.visible=!0})):this._okBtn_csjc.visible=!0},t}(i["default"]);n["default"]=s},{"../../CommomAPI/GameSwitch/GameSwitch":3,"../../PlatformApi/VIVOAPI":19,"../../View/ViewBase":86}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Mgr/ViewMgr"),a=e("../Event/EventMgr"),o=e("../Event/EventDef"),s=e("../Utilit"),r=e("./IViewStateListener"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCloseEvent=null,t.onOpenEvent=null,t._viewBase=!0,t._viewDef=i.ViewDef_csjc.None,t._data={},t}return __extends(t,e),t.prototype.onAwake=function(){this.owner.autoDestroyAtClosed=!0,this.owner.height=Laya.stage.height},t.prototype.onEnable=function(){this.addEvent()},t.prototype.onDisable=function(){this.removeEvent()},t.prototype.onDestroy=function(){this.removeEvent()},t.prototype.openView=function(e){this._data=e,this.show(),a["default"].dispatch_csjc(o.EventDef_csjc.Game_OnViewOpen_csjc,{view:this._viewDef}),this.onOpenEvent&&this.onOpenEvent()},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){Laya.timer.clearAll(this)},t.prototype.closeView=function(){i["default"].instance_csjc.closeView_csjc(this._viewDef)},t.prototype.hide=function(){var e=this;this.owner.visible=!1,this.onHide(),s["default"].forEachChild(this.owner,function(t){var n=t._components;if(n)for(var i=0;i<n.length;i++){var a=n[i];r.isIViewStateListener_csjc(a)&&a.onViewHide(e)}})},t.prototype.show=function(){var e=this;this.owner.visible=!0,this.onShow(),s["default"].forEachChild(this.owner,function(t){var n=t._components;if(n)for(var i=0;i<n.length;i++){var a=n[i];r.isIViewStateListener_csjc(a)&&a.onViewShow(e)}})},t.prototype.viewIsHide=function(){return this.owner.visible},t.prototype.onHide=function(){},t.prototype.onShow=function(){},t.prototype.onClose=function(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),a["default"].dispatch_csjc(o.EventDef_csjc.Game_OnViewClose_csjc,{view:this._viewDef}),this.onCloseEvent&&this.onCloseEvent()},t}(Laya.Script);n["default"]=c},{"../Event/EventDef":5,"../Event/EventMgr":6,"../Mgr/ViewMgr":12,"../Utilit":65,"./IViewStateListener":80}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,a=Laya.ClassUtils.regClass;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{zOrder:10,width:1334,top:0,right:0,mouseThrough:!1,left:0,height:750,bottom:0},compId:2,child:[{type:"Image",props:{skin:"LoadingView/zhuyebeijing.jpg",right:0,name:"BG",left:0,bottom:0},compId:11},{type:"Image",props:{y:0,x:0,skin:"LoadingView/long2.png"},compId:23},{type:"Image",props:{y:0,x:1050,skin:"LoadingView/long3.png"},compId:24},{type:"Image",props:{y:116,x:682,skin:"LoadingView/jiqiren.png",scaleY:2,scaleX:2,right:0,bottom:0},compId:21,child:[{type:"Script",props:{MinAlpha:.8,BreathingSpeed_csjc:.3,runtime:"View/AlphaBreathingAni.ts"},compId:22}]},{type:"Image",props:{skin:"LoadingView/long1.png",scaleY:2,scaleX:2,left:150,bottom:0},compId:19,child:[{type:"Script",props:{MinAlpha:.8,BreathingSpeed_csjc:.3,runtime:"View/AlphaBreathingAni.ts"},compId:20}]},{type:"Image",props:{top:0,skin:"LoadingView/logo.png",name:"Logo",centerX:0},compId:12},{type:"Image",props:{y:679,x:667,skin:"LoadingView/zg.png",scaleY:.7,scaleX:.7,centerX:0,bottom:0,anchorY:.5,anchorX:.5},compId:14},{type:"Image",props:{zOrder:0,skin:"LoadingView/jiazaijindu1.png",pivotY:22,name:"ProcessBarBg",centerX:0,bottom:116},compId:5,child:[{type:"Image",props:{y:3,x:3,width:456,skin:"LoadingView/jiazaijindu2.png",sizeGrid:"0,45,0,531",name:"ProcessBar"},compId:9},{type:"Sprite",props:{y:-36,x:378,texture:"LoadingView/text_jiazai.png"},compId:15,child:[{type:"Script",props:{runtime:"View/AlphaBreathingAni.ts"},compId:16}]}]},{type:"Script",props:{y:0,x:0,runtime:"View/LoadingView/LoadingView.ts"},compId:7}],loadList:["LoadingView/zhuyebeijing.jpg","LoadingView/long2.png","LoadingView/long3.png","LoadingView/jiqiren.png","LoadingView/long1.png","LoadingView/logo.png","LoadingView/zg.png","LoadingView/jiazaijindu1.png","LoadingView/jiazaijindu2.png","LoadingView/text_jiazai.png"],loadList3D:[]},t}(Laya.View);e.LoadingUI=t,a("ui.View.LoadingUI",t)}(t=e.View||(e.View={}))}(i=n.ui||(n.ui={}))},{}]},{},[9]);